var Wt=s=>{throw TypeError(s)};var yt=(s,e,r)=>e.has(s)||Wt("Cannot "+r);var i=(s,e,r)=>(yt(s,e,"read from private field"),r?r.call(s):e.get(s)),k=(s,e,r)=>e.has(s)?Wt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,r),w=(s,e,r,a)=>(yt(s,e,"write to private field"),a?a.call(s,r):e.set(s,r),r),L=(s,e,r)=>(yt(s,e,"access private method"),r);var ct=(s,e,r,a)=>({set _(n){w(s,e,n,r)},get _(){return i(s,e,a)}});import{r as b,a as zs,O as Vs,N as gt,L as z,R as qt,u as Cs,b as _t,B as Gs,c as Js,d as te,e as Re}from"./vendor-BEEOvD6K.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var ks={exports:{}},ft={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=b,Xs=Symbol.for("react.element"),Zs=Symbol.for("react.fragment"),er=Object.prototype.hasOwnProperty,tr=Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sr={key:!0,ref:!0,__self:!0,__source:!0};function Ss(s,e,r){var a,n={},o=null,l=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(a in e)er.call(e,a)&&!sr.hasOwnProperty(a)&&(n[a]=e[a]);if(s&&s.defaultProps)for(a in e=s.defaultProps,e)n[a]===void 0&&(n[a]=e[a]);return{$$typeof:Xs,type:s,key:o,ref:l,props:n,_owner:tr.current}}ft.Fragment=Zs;ft.jsx=Ss;ft.jsxs=Ss;ks.exports=ft;var t=ks.exports,jt={},Kt=zs;jt.createRoot=Kt.createRoot,jt.hydrateRoot=Kt.hydrateRoot;var Ge=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rr={setTimeout:(s,e)=>setTimeout(s,e),clearTimeout:s=>clearTimeout(s),setInterval:(s,e)=>setInterval(s,e),clearInterval:s=>clearInterval(s)},ce,Tt,ms,ar=(ms=class{constructor(){k(this,ce,rr);k(this,Tt,!1)}setTimeoutProvider(s){w(this,ce,s)}setTimeout(s,e){return i(this,ce).setTimeout(s,e)}clearTimeout(s){i(this,ce).clearTimeout(s)}setInterval(s,e){return i(this,ce).setInterval(s,e)}clearInterval(s){i(this,ce).clearInterval(s)}},ce=new WeakMap,Tt=new WeakMap,ms),ve=new ar;function nr(s){setTimeout(s,0)}var Fe=typeof window>"u"||"Deno"in globalThis;function U(){}function ir(s,e){return typeof s=="function"?s(e):s}function vt(s){return typeof s=="number"&&s>=0&&s!==1/0}function Ms(s,e){return Math.max(s+(e||0)-Date.now(),0)}function ge(s,e){return typeof s=="function"?s(e):s}function K(s,e){return typeof s=="function"?s(e):s}function zt(s,e){const{type:r="all",exact:a,fetchStatus:n,predicate:o,queryKey:l,stale:d}=s;if(l){if(a){if(e.queryHash!==It(l,e.options))return!1}else if(!Ze(e.queryKey,l))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||n&&n!==e.state.fetchStatus||o&&!o(e))}function Vt(s,e){const{exact:r,status:a,predicate:n,mutationKey:o}=s;if(o){if(!e.options.mutationKey)return!1;if(r){if(Ae(e.options.mutationKey)!==Ae(o))return!1}else if(!Ze(e.options.mutationKey,o))return!1}return!(a&&e.state.status!==a||n&&!n(e))}function It(s,e){return((e==null?void 0:e.queryKeyHashFn)||Ae)(s)}function Ae(s){return JSON.stringify(s,(e,r)=>wt(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function Ze(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ze(s[r],e[r])):!1}var or=Object.prototype.hasOwnProperty;function Ps(s,e){if(s===e)return s;const r=Gt(s)&&Gt(e);if(!r&&!(wt(s)&&wt(e)))return e;const n=(r?s:Object.keys(s)).length,o=r?e:Object.keys(e),l=o.length,d=r?new Array(l):{};let c=0;for(let h=0;h<l;h++){const f=r?h:o[h],u=s[f],v=e[f];if(u===v){d[f]=u,(r?h<n:or.call(s,f))&&c++;continue}if(u===null||v===null||typeof u!="object"||typeof v!="object"){d[f]=v;continue}const y=Ps(u,v);d[f]=y,y===u&&c++}return n===l&&c===n?s:d}function xt(s,e){if(!e||Object.keys(s).length!==Object.keys(e).length)return!1;for(const r in s)if(s[r]!==e[r])return!1;return!0}function Gt(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function wt(s){if(!Jt(s))return!1;const e=s.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Jt(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Jt(s){return Object.prototype.toString.call(s)==="[object Object]"}function lr(s){return new Promise(e=>{ve.setTimeout(e,s)})}function Nt(s,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,e):r.structuralSharing!==!1?Ps(s,e):e}function cr(s,e,r=0){const a=[...s,e];return r&&a.length>r?a.slice(1):a}function dr(s,e,r=0){const a=[e,...s];return r&&a.length>r?a.slice(0,-1):a}var Dt=Symbol();function Ls(s,e){return!s.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!s.queryFn||s.queryFn===Dt?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function Os(s,e){return typeof s=="function"?s(...e):!!s}function ur(s,e,r){let a=!1,n;return Object.defineProperty(s,"signal",{enumerable:!0,get:()=>(n??(n=e()),a||(a=!0,n.aborted?r():n.addEventListener("abort",r,{once:!0})),n)}),s}var Ne,de,_e,xs,hr=(xs=class extends Ge{constructor(){super();k(this,Ne);k(this,de);k(this,_e);w(this,_e,e=>{if(!Fe&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){i(this,de)||this.setEventListener(i(this,_e))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,de))==null||e.call(this),w(this,de,void 0))}setEventListener(e){var r;w(this,_e,e),(r=i(this,de))==null||r.call(this),w(this,de,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){i(this,Ne)!==e&&(w(this,Ne,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof i(this,Ne)=="boolean"?i(this,Ne):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ne=new WeakMap,de=new WeakMap,_e=new WeakMap,xs),$t=new hr;function Ct(){let s,e;const r=new Promise((n,o)=>{s=n,e=o});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),s(n)},r.reject=n=>{a({status:"rejected",reason:n}),e(n)},r}var mr=nr;function xr(){let s=[],e=0,r=d=>{d()},a=d=>{d()},n=mr;const o=d=>{e?s.push(d):n(()=>{r(d)})},l=()=>{const d=s;s=[],d.length&&n(()=>{a(()=>{d.forEach(c=>{r(c)})})})};return{batch:d=>{let c;e++;try{c=d()}finally{e--,e||l()}return c},batchCalls:d=>(...c)=>{o(()=>{d(...c)})},schedule:o,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{a=d},setScheduler:d=>{n=d}}}var _=xr(),Ie,ue,De,ps,pr=(ps=class extends Ge{constructor(){super();k(this,Ie,!0);k(this,ue);k(this,De);w(this,De,e=>{if(!Fe&&window.addEventListener){const r=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){i(this,ue)||this.setEventListener(i(this,De))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,ue))==null||e.call(this),w(this,ue,void 0))}setEventListener(e){var r;w(this,De,e),(r=i(this,ue))==null||r.call(this),w(this,ue,e(this.setOnline.bind(this)))}setOnline(e){i(this,Ie)!==e&&(w(this,Ie,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return i(this,Ie)}},Ie=new WeakMap,ue=new WeakMap,De=new WeakMap,ps),pt=new pr;function fr(s){return Math.min(1e3*2**s,3e4)}function Es(s){return(s??"online")==="online"?pt.isOnline():!0}var kt=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function Rs(s){let e=!1,r=0,a;const n=Ct(),o=()=>n.status!=="pending",l=p=>{var C;if(!o()){const j=new kt(p);v(j),(C=s.onCancel)==null||C.call(s,j)}},d=()=>{e=!0},c=()=>{e=!1},h=()=>$t.isFocused()&&(s.networkMode==="always"||pt.isOnline())&&s.canRun(),f=()=>Es(s.networkMode)&&s.canRun(),u=p=>{o()||(a==null||a(),n.resolve(p))},v=p=>{o()||(a==null||a(),n.reject(p))},y=()=>new Promise(p=>{var C;a=j=>{(o()||h())&&p(j)},(C=s.onPause)==null||C.call(s)}).then(()=>{var p;a=void 0,o()||(p=s.onContinue)==null||p.call(s)}),m=()=>{if(o())return;let p;const C=r===0?s.initialPromise:void 0;try{p=C??s.fn()}catch(j){p=Promise.reject(j)}Promise.resolve(p).then(u).catch(j=>{var N;if(o())return;const S=s.retry??(Fe?0:3),M=s.retryDelay??fr,x=typeof M=="function"?M(r,j):M,g=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,j);if(e||!g){v(j);return}r++,(N=s.onFail)==null||N.call(s,r,j),lr(x).then(()=>h()?void 0:y()).then(()=>{e?v(j):m()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(a==null||a(),n),cancelRetry:d,continueRetry:c,canStart:f,start:()=>(f()?m():y().then(m),n)}}var Ce,fs,Fs=(fs=class{constructor(){k(this,Ce)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vt(this.gcTime)&&w(this,Ce,ve.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Fe?1/0:5*60*1e3))}clearGcTimeout(){i(this,Ce)&&(ve.clearTimeout(i(this,Ce)),w(this,Ce,void 0))}},Ce=new WeakMap,fs),ke,$e,W,Se,I,tt,Me,V,se,ys,yr=(ys=class extends Fs{constructor(e){super();k(this,V);k(this,ke);k(this,$e);k(this,W);k(this,Se);k(this,I);k(this,tt);k(this,Me);w(this,Me,!1),w(this,tt,e.defaultOptions),this.setOptions(e.options),this.observers=[],w(this,Se,e.client),w(this,W,i(this,Se).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,w(this,ke,Xt(this.options)),this.state=e.state??i(this,ke),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=i(this,I))==null?void 0:e.promise}setOptions(e){if(this.options={...i(this,tt),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Xt(this.options);r.data!==void 0&&(this.setState(Yt(r.data,r.dataUpdatedAt)),w(this,ke,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,W).remove(this)}setData(e,r){const a=Nt(this.state.data,e,this.options);return L(this,V,se).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(e,r){L(this,V,se).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var a,n;const r=(a=i(this,I))==null?void 0:a.promise;return(n=i(this,I))==null||n.cancel(e),r?r.then(U).catch(U):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,ke))}isActive(){return this.observers.some(e=>K(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ge(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ms(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=i(this,I))==null||r.continue()}onOnline(){var r;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=i(this,I))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),i(this,W).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(i(this,I)&&(i(this,Me)?i(this,I).cancel({revert:!0}):i(this,I).cancelRetry()),this.scheduleGc()),i(this,W).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||L(this,V,se).call(this,{type:"invalidate"})}async fetch(e,r){var c,h,f,u,v,y,m,p,C,j,S,M;if(this.state.fetchStatus!=="idle"&&((c=i(this,I))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(i(this,I))return i(this,I).continueRetry(),i(this,I).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(g=>g.options.queryFn);x&&this.setOptions(x.options)}const a=new AbortController,n=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(w(this,Me,!0),a.signal)})},o=()=>{const x=Ls(this.options,r),N=(()=>{const O={client:i(this,Se),queryKey:this.queryKey,meta:this.meta};return n(O),O})();return w(this,Me,!1),this.options.persister?this.options.persister(x,N,this):x(N)},d=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:i(this,Se),state:this.state,fetchFn:o};return n(x),x})();(h=this.options.behavior)==null||h.onFetch(d,this),w(this,$e,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=d.fetchOptions)==null?void 0:f.meta))&&L(this,V,se).call(this,{type:"fetch",meta:(u=d.fetchOptions)==null?void 0:u.meta}),w(this,I,Rs({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,onCancel:x=>{x instanceof kt&&x.revert&&this.setState({...i(this,$e),fetchStatus:"idle"}),a.abort()},onFail:(x,g)=>{L(this,V,se).call(this,{type:"failed",failureCount:x,error:g})},onPause:()=>{L(this,V,se).call(this,{type:"pause"})},onContinue:()=>{L(this,V,se).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const x=await i(this,I).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(y=(v=i(this,W).config).onSuccess)==null||y.call(v,x,this),(p=(m=i(this,W).config).onSettled)==null||p.call(m,x,this.state.error,this),x}catch(x){if(x instanceof kt){if(x.silent)return i(this,I).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw L(this,V,se).call(this,{type:"error",error:x}),(j=(C=i(this,W).config).onError)==null||j.call(C,x,this),(M=(S=i(this,W).config).onSettled)==null||M.call(S,this.state.data,x,this),x}finally{this.scheduleGc()}}},ke=new WeakMap,$e=new WeakMap,W=new WeakMap,Se=new WeakMap,I=new WeakMap,tt=new WeakMap,Me=new WeakMap,V=new WeakSet,se=function(e){const r=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...As(a.data,this.options),fetchMeta:e.meta??null};case"success":const n={...a,...Yt(e.data,e.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return w(this,$e,e.manual?n:void 0),n;case"error":const o=e.error;return{...a,error:o,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=r(this.state),_.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),i(this,W).notify({query:this,type:"updated",action:e})})},ys);function As(s,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Es(e.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Yt(s,e){return{data:s,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Xt(s){const e=typeof s.initialData=="function"?s.initialData():s.initialData,r=e!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var H,E,st,D,Pe,Ue,re,he,rt,He,Be,Le,Oe,me,Qe,F,Ye,St,Mt,Pt,Lt,Ot,Et,Rt,Ts,gs,gr=(gs=class extends Ge{constructor(e,r){super();k(this,F);k(this,H);k(this,E);k(this,st);k(this,D);k(this,Pe);k(this,Ue);k(this,re);k(this,he);k(this,rt);k(this,He);k(this,Be);k(this,Le);k(this,Oe);k(this,me);k(this,Qe,new Set);this.options=r,w(this,H,e),w(this,he,null),w(this,re,Ct()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,E).addObserver(this),Zt(i(this,E),this.options)?L(this,F,Ye).call(this):this.updateResult(),L(this,F,Lt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ft(i(this,E),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ft(i(this,E),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,L(this,F,Ot).call(this),L(this,F,Et).call(this),i(this,E).removeObserver(this)}setOptions(e){const r=this.options,a=i(this,E);if(this.options=i(this,H).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof K(this.options.enabled,i(this,E))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");L(this,F,Rt).call(this),i(this,E).setOptions(this.options),r._defaulted&&!xt(this.options,r)&&i(this,H).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,E),observer:this});const n=this.hasListeners();n&&es(i(this,E),a,this.options,r)&&L(this,F,Ye).call(this),this.updateResult(),n&&(i(this,E)!==a||K(this.options.enabled,i(this,E))!==K(r.enabled,i(this,E))||ge(this.options.staleTime,i(this,E))!==ge(r.staleTime,i(this,E)))&&L(this,F,St).call(this);const o=L(this,F,Mt).call(this);n&&(i(this,E)!==a||K(this.options.enabled,i(this,E))!==K(r.enabled,i(this,E))||o!==i(this,me))&&L(this,F,Pt).call(this,o)}getOptimisticResult(e){const r=i(this,H).getQueryCache().build(i(this,H),e),a=this.createResult(r,e);return jr(this,a)&&(w(this,D,a),w(this,Ue,this.options),w(this,Pe,i(this,E).state)),a}getCurrentResult(){return i(this,D)}trackResult(e,r){return new Proxy(e,{get:(a,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&i(this,re).status==="pending"&&i(this,re).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(e){i(this,Qe).add(e)}getCurrentQuery(){return i(this,E)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=i(this,H).defaultQueryOptions(e),a=i(this,H).getQueryCache().build(i(this,H),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(e){return L(this,F,Ye).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,D)))}createResult(e,r){var Q;const a=i(this,E),n=this.options,o=i(this,D),l=i(this,Pe),d=i(this,Ue),h=e!==a?e.state:i(this,st),{state:f}=e;let u={...f},v=!1,y;if(r._optimisticResults){const R=this.hasListeners(),q=!R&&Zt(e,r),Te=R&&es(e,a,r,n);(q||Te)&&(u={...u,...As(f.data,e.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:C}=u;y=u.data;let j=!1;if(r.placeholderData!==void 0&&y===void 0&&C==="pending"){let R;o!=null&&o.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData)?(R=o.data,j=!0):R=typeof r.placeholderData=="function"?r.placeholderData((Q=i(this,Be))==null?void 0:Q.state.data,i(this,Be)):r.placeholderData,R!==void 0&&(C="success",y=Nt(o==null?void 0:o.data,R,r),v=!0)}if(r.select&&y!==void 0&&!j)if(o&&y===(l==null?void 0:l.data)&&r.select===i(this,rt))y=i(this,He);else try{w(this,rt,r.select),y=r.select(y),y=Nt(o==null?void 0:o.data,y,r),w(this,He,y),w(this,he,null)}catch(R){w(this,he,R)}i(this,he)&&(m=i(this,he),y=i(this,He),p=Date.now(),C="error");const S=u.fetchStatus==="fetching",M=C==="pending",x=C==="error",g=M&&S,N=y!==void 0,P={status:C,fetchStatus:u.fetchStatus,isPending:M,isSuccess:C==="success",isError:x,isInitialLoading:g,isLoading:g,data:y,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:S,isRefetching:S&&!M,isLoadingError:x&&!N,isPaused:u.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:x&&N,isStale:Ut(e,r),refetch:this.refetch,promise:i(this,re),isEnabled:K(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const R=lt=>{P.status==="error"?lt.reject(P.error):P.data!==void 0&&lt.resolve(P.data)},q=()=>{const lt=w(this,re,P.promise=Ct());R(lt)},Te=i(this,re);switch(Te.status){case"pending":e.queryHash===a.queryHash&&R(Te);break;case"fulfilled":(P.status==="error"||P.data!==Te.value)&&q();break;case"rejected":(P.status!=="error"||P.error!==Te.reason)&&q();break}}return P}updateResult(){const e=i(this,D),r=this.createResult(i(this,E),this.options);if(w(this,Pe,i(this,E).state),w(this,Ue,this.options),i(this,Pe).data!==void 0&&w(this,Be,i(this,E)),xt(r,e))return;w(this,D,r);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!i(this,Qe).size)return!0;const l=new Set(o??i(this,Qe));return this.options.throwOnError&&l.add("error"),Object.keys(i(this,D)).some(d=>{const c=d;return i(this,D)[c]!==e[c]&&l.has(c)})};L(this,F,Ts).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&L(this,F,Lt).call(this)}},H=new WeakMap,E=new WeakMap,st=new WeakMap,D=new WeakMap,Pe=new WeakMap,Ue=new WeakMap,re=new WeakMap,he=new WeakMap,rt=new WeakMap,He=new WeakMap,Be=new WeakMap,Le=new WeakMap,Oe=new WeakMap,me=new WeakMap,Qe=new WeakMap,F=new WeakSet,Ye=function(e){L(this,F,Rt).call(this);let r=i(this,E).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(U)),r},St=function(){L(this,F,Ot).call(this);const e=ge(this.options.staleTime,i(this,E));if(Fe||i(this,D).isStale||!vt(e))return;const a=Ms(i(this,D).dataUpdatedAt,e)+1;w(this,Le,ve.setTimeout(()=>{i(this,D).isStale||this.updateResult()},a))},Mt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,E)):this.options.refetchInterval)??!1},Pt=function(e){L(this,F,Et).call(this),w(this,me,e),!(Fe||K(this.options.enabled,i(this,E))===!1||!vt(i(this,me))||i(this,me)===0)&&w(this,Oe,ve.setInterval(()=>{(this.options.refetchIntervalInBackground||$t.isFocused())&&L(this,F,Ye).call(this)},i(this,me)))},Lt=function(){L(this,F,St).call(this),L(this,F,Pt).call(this,L(this,F,Mt).call(this))},Ot=function(){i(this,Le)&&(ve.clearTimeout(i(this,Le)),w(this,Le,void 0))},Et=function(){i(this,Oe)&&(ve.clearInterval(i(this,Oe)),w(this,Oe,void 0))},Rt=function(){const e=i(this,H).getQueryCache().build(i(this,H),this.options);if(e===i(this,E))return;const r=i(this,E);w(this,E,e),w(this,st,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Ts=function(e){_.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(i(this,D))}),i(this,H).getQueryCache().notify({query:i(this,E),type:"observerResultsUpdated"})})},gs);function br(s,e){return K(e.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&e.retryOnMount===!1)}function Zt(s,e){return br(s,e)||s.state.data!==void 0&&Ft(s,e,e.refetchOnMount)}function Ft(s,e,r){if(K(e.enabled,s)!==!1&&ge(e.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&Ut(s,e)}return!1}function es(s,e,r,a){return(s!==e||K(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&Ut(s,r)}function Ut(s,e){return K(e.enabled,s)!==!1&&s.isStaleByTime(ge(e.staleTime,s))}function jr(s,e){return!xt(s.getCurrentResult(),e)}function ts(s){return{onFetch:(e,r)=>{var f,u,v,y,m;const a=e.options,n=(v=(u=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:u.fetchMore)==null?void 0:v.direction,o=((y=e.state.data)==null?void 0:y.pages)||[],l=((m=e.state.data)==null?void 0:m.pageParams)||[];let d={pages:[],pageParams:[]},c=0;const h=async()=>{let p=!1;const C=M=>{ur(M,()=>e.signal,()=>p=!0)},j=Ls(e.options,e.fetchOptions),S=async(M,x,g)=>{if(p)return Promise.reject();if(x==null&&M.pages.length)return Promise.resolve(M);const O=(()=>{const q={client:e.client,queryKey:e.queryKey,pageParam:x,direction:g?"backward":"forward",meta:e.options.meta};return C(q),q})(),P=await j(O),{maxPages:Q}=e.options,R=g?dr:cr;return{pages:R(M.pages,P,Q),pageParams:R(M.pageParams,x,Q)}};if(n&&o.length){const M=n==="backward",x=M?vr:ss,g={pages:o,pageParams:l},N=x(a,g);d=await S(g,N,M)}else{const M=s??o.length;do{const x=c===0?l[0]??a.initialPageParam:ss(a,d);if(c>0&&x==null)break;d=await S(d,x),c++}while(c<M)}return d};e.options.persister?e.fetchFn=()=>{var p,C;return(C=(p=e.options).persister)==null?void 0:C.call(p,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=h}}}function ss(s,{pages:e,pageParams:r}){const a=e.length-1;return e.length>0?s.getNextPageParam(e[a],e,r[a],r):void 0}function vr(s,{pages:e,pageParams:r}){var a;return e.length>0?(a=s.getPreviousPageParam)==null?void 0:a.call(s,e[0],e,r[0],r):void 0}var at,Y,$,Ee,X,le,bs,wr=(bs=class extends Fs{constructor(e){super();k(this,X);k(this,at);k(this,Y);k(this,$);k(this,Ee);w(this,at,e.client),this.mutationId=e.mutationId,w(this,$,e.mutationCache),w(this,Y,[]),this.state=e.state||qs(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,Y).includes(e)||(i(this,Y).push(e),this.clearGcTimeout(),i(this,$).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){w(this,Y,i(this,Y).filter(r=>r!==e)),this.scheduleGc(),i(this,$).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,Y).length||(this.state.status==="pending"?this.scheduleGc():i(this,$).remove(this))}continue(){var e;return((e=i(this,Ee))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var l,d,c,h,f,u,v,y,m,p,C,j,S,M,x,g,N,O,P,Q;const r=()=>{L(this,X,le).call(this,{type:"continue"})},a={client:i(this,at),meta:this.options.meta,mutationKey:this.options.mutationKey};w(this,Ee,Rs({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(R,q)=>{L(this,X,le).call(this,{type:"failed",failureCount:R,error:q})},onPause:()=>{L(this,X,le).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,$).canRun(this)}));const n=this.state.status==="pending",o=!i(this,Ee).canStart();try{if(n)r();else{L(this,X,le).call(this,{type:"pending",variables:e,isPaused:o}),await((d=(l=i(this,$).config).onMutate)==null?void 0:d.call(l,e,this,a));const q=await((h=(c=this.options).onMutate)==null?void 0:h.call(c,e,a));q!==this.state.context&&L(this,X,le).call(this,{type:"pending",context:q,variables:e,isPaused:o})}const R=await i(this,Ee).start();return await((u=(f=i(this,$).config).onSuccess)==null?void 0:u.call(f,R,e,this.state.context,this,a)),await((y=(v=this.options).onSuccess)==null?void 0:y.call(v,R,e,this.state.context,a)),await((p=(m=i(this,$).config).onSettled)==null?void 0:p.call(m,R,null,this.state.variables,this.state.context,this,a)),await((j=(C=this.options).onSettled)==null?void 0:j.call(C,R,null,e,this.state.context,a)),L(this,X,le).call(this,{type:"success",data:R}),R}catch(R){try{await((M=(S=i(this,$).config).onError)==null?void 0:M.call(S,R,e,this.state.context,this,a))}catch(q){Promise.reject(q)}try{await((g=(x=this.options).onError)==null?void 0:g.call(x,R,e,this.state.context,a))}catch(q){Promise.reject(q)}try{await((O=(N=i(this,$).config).onSettled)==null?void 0:O.call(N,void 0,R,this.state.variables,this.state.context,this,a))}catch(q){Promise.reject(q)}try{await((Q=(P=this.options).onSettled)==null?void 0:Q.call(P,void 0,R,e,this.state.context,a))}catch(q){Promise.reject(q)}throw L(this,X,le).call(this,{type:"error",error:R}),R}finally{i(this,$).runNext(this)}}},at=new WeakMap,Y=new WeakMap,$=new WeakMap,Ee=new WeakMap,X=new WeakSet,le=function(e){const r=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),_.batch(()=>{i(this,Y).forEach(a=>{a.onMutationUpdate(e)}),i(this,$).notify({mutation:this,type:"updated",action:e})})},bs);function qs(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ae,G,nt,js,Nr=(js=class extends Ge{constructor(e={}){super();k(this,ae);k(this,G);k(this,nt);this.config=e,w(this,ae,new Set),w(this,G,new Map),w(this,nt,0)}build(e,r,a){const n=new wr({client:e,mutationCache:this,mutationId:++ct(this,nt)._,options:e.defaultMutationOptions(r),state:a});return this.add(n),n}add(e){i(this,ae).add(e);const r=dt(e);if(typeof r=="string"){const a=i(this,G).get(r);a?a.push(e):i(this,G).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,ae).delete(e)){const r=dt(e);if(typeof r=="string"){const a=i(this,G).get(r);if(a)if(a.length>1){const n=a.indexOf(e);n!==-1&&a.splice(n,1)}else a[0]===e&&i(this,G).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=dt(e);if(typeof r=="string"){const a=i(this,G).get(r),n=a==null?void 0:a.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){var a;const r=dt(e);if(typeof r=="string"){const n=(a=i(this,G).get(r))==null?void 0:a.find(o=>o!==e&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_.batch(()=>{i(this,ae).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,ae).clear(),i(this,G).clear()})}getAll(){return Array.from(i(this,ae))}find(e){const r={exact:!0,...e};return this.getAll().find(a=>Vt(r,a))}findAll(e={}){return this.getAll().filter(r=>Vt(e,r))}notify(e){_.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return _.batch(()=>Promise.all(e.map(r=>r.continue().catch(U))))}},ae=new WeakMap,G=new WeakMap,nt=new WeakMap,js);function dt(s){var e;return(e=s.options.scope)==null?void 0:e.id}var ne,xe,B,ie,oe,mt,At,vs,Cr=(vs=class extends Ge{constructor(r,a){super();k(this,oe);k(this,ne);k(this,xe);k(this,B);k(this,ie);w(this,ne,r),this.setOptions(a),this.bindMethods(),L(this,oe,mt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const a=this.options;this.options=i(this,ne).defaultMutationOptions(r),xt(this.options,a)||i(this,ne).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,B),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Ae(a.mutationKey)!==Ae(this.options.mutationKey)?this.reset():((n=i(this,B))==null?void 0:n.state.status)==="pending"&&i(this,B).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=i(this,B))==null||r.removeObserver(this)}onMutationUpdate(r){L(this,oe,mt).call(this),L(this,oe,At).call(this,r)}getCurrentResult(){return i(this,xe)}reset(){var r;(r=i(this,B))==null||r.removeObserver(this),w(this,B,void 0),L(this,oe,mt).call(this),L(this,oe,At).call(this)}mutate(r,a){var n;return w(this,ie,a),(n=i(this,B))==null||n.removeObserver(this),w(this,B,i(this,ne).getMutationCache().build(i(this,ne),this.options)),i(this,B).addObserver(this),i(this,B).execute(r)}},ne=new WeakMap,xe=new WeakMap,B=new WeakMap,ie=new WeakMap,oe=new WeakSet,mt=function(){var a;const r=((a=i(this,B))==null?void 0:a.state)??qs();w(this,xe,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},At=function(r){_.batch(()=>{var a,n,o,l,d,c,h,f;if(i(this,ie)&&this.hasListeners()){const u=i(this,xe).variables,v=i(this,xe).context,y={client:i(this,ne),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(n=(a=i(this,ie)).onSuccess)==null||n.call(a,r.data,u,v,y)}catch(m){Promise.reject(m)}try{(l=(o=i(this,ie)).onSettled)==null||l.call(o,r.data,null,u,v,y)}catch(m){Promise.reject(m)}}else if((r==null?void 0:r.type)==="error"){try{(c=(d=i(this,ie)).onError)==null||c.call(d,r.error,u,v,y)}catch(m){Promise.reject(m)}try{(f=(h=i(this,ie)).onSettled)==null||f.call(h,void 0,r.error,u,v,y)}catch(m){Promise.reject(m)}}}this.listeners.forEach(u=>{u(i(this,xe))})})},vs),Z,ws,kr=(ws=class extends Ge{constructor(e={}){super();k(this,Z);this.config=e,w(this,Z,new Map)}build(e,r,a){const n=r.queryKey,o=r.queryHash??It(n,r);let l=this.get(o);return l||(l=new yr({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(r),state:a,defaultOptions:e.getQueryDefaults(n)}),this.add(l)),l}add(e){i(this,Z).has(e.queryHash)||(i(this,Z).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=i(this,Z).get(e.queryHash);r&&(e.destroy(),r===e&&i(this,Z).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,Z).get(e)}getAll(){return[...i(this,Z).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(a=>zt(r,a))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(a=>zt(e,a)):r}notify(e){_.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){_.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Z=new WeakMap,ws),T,pe,fe,We,Ke,ye,ze,Ve,Ns,Sr=(Ns=class{constructor(s={}){k(this,T);k(this,pe);k(this,fe);k(this,We);k(this,Ke);k(this,ye);k(this,ze);k(this,Ve);w(this,T,s.queryCache||new kr),w(this,pe,s.mutationCache||new Nr),w(this,fe,s.defaultOptions||{}),w(this,We,new Map),w(this,Ke,new Map),w(this,ye,0)}mount(){ct(this,ye)._++,i(this,ye)===1&&(w(this,ze,$t.subscribe(async s=>{s&&(await this.resumePausedMutations(),i(this,T).onFocus())})),w(this,Ve,pt.subscribe(async s=>{s&&(await this.resumePausedMutations(),i(this,T).onOnline())})))}unmount(){var s,e;ct(this,ye)._--,i(this,ye)===0&&((s=i(this,ze))==null||s.call(this),w(this,ze,void 0),(e=i(this,Ve))==null||e.call(this),w(this,Ve,void 0))}isFetching(s){return i(this,T).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return i(this,pe).findAll({...s,status:"pending"}).length}getQueryData(s){var r;const e=this.defaultQueryOptions({queryKey:s});return(r=i(this,T).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(s){const e=this.defaultQueryOptions(s),r=i(this,T).build(this,e),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(ge(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(s){return i(this,T).findAll(s).map(({queryKey:e,state:r})=>{const a=r.data;return[e,a]})}setQueryData(s,e,r){const a=this.defaultQueryOptions({queryKey:s}),n=i(this,T).get(a.queryHash),o=n==null?void 0:n.state.data,l=ir(e,o);if(l!==void 0)return i(this,T).build(this,a).setData(l,{...r,manual:!0})}setQueriesData(s,e,r){return _.batch(()=>i(this,T).findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,e,r)]))}getQueryState(s){var r;const e=this.defaultQueryOptions({queryKey:s});return(r=i(this,T).get(e.queryHash))==null?void 0:r.state}removeQueries(s){const e=i(this,T);_.batch(()=>{e.findAll(s).forEach(r=>{e.remove(r)})})}resetQueries(s,e){const r=i(this,T);return _.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...s},e)))}cancelQueries(s,e={}){const r={revert:!0,...e},a=_.batch(()=>i(this,T).findAll(s).map(n=>n.cancel(r)));return Promise.all(a).then(U).catch(U)}invalidateQueries(s,e={}){return _.batch(()=>(i(this,T).findAll(s).forEach(r=>{r.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries({...s,type:(s==null?void 0:s.refetchType)??(s==null?void 0:s.type)??"active"},e)))}refetchQueries(s,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},a=_.batch(()=>i(this,T).findAll(s).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,r);return r.throwOnError||(o=o.catch(U)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(U)}fetchQuery(s){const e=this.defaultQueryOptions(s);e.retry===void 0&&(e.retry=!1);const r=i(this,T).build(this,e);return r.isStaleByTime(ge(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(U).catch(U)}fetchInfiniteQuery(s){return s.behavior=ts(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(U).catch(U)}ensureInfiniteQueryData(s){return s.behavior=ts(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return pt.isOnline()?i(this,pe).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,T)}getMutationCache(){return i(this,pe)}getDefaultOptions(){return i(this,fe)}setDefaultOptions(s){w(this,fe,s)}setQueryDefaults(s,e){i(this,We).set(Ae(s),{queryKey:s,defaultOptions:e})}getQueryDefaults(s){const e=[...i(this,We).values()],r={};return e.forEach(a=>{Ze(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,e){i(this,Ke).set(Ae(s),{mutationKey:s,defaultOptions:e})}getMutationDefaults(s){const e=[...i(this,Ke).values()],r={};return e.forEach(a=>{Ze(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const e={...i(this,fe).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return e.queryHash||(e.queryHash=It(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Dt&&(e.enabled=!1),e}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...i(this,fe).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){i(this,T).clear(),i(this,pe).clear()}},T=new WeakMap,pe=new WeakMap,fe=new WeakMap,We=new WeakMap,Ke=new WeakMap,ye=new WeakMap,ze=new WeakMap,Ve=new WeakMap,Ns),_s=b.createContext(void 0),it=s=>{const e=b.useContext(_s);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Mr=({client:s,children:e})=>(b.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),t.jsx(_s.Provider,{value:s,children:e})),Is=b.createContext(!1),Pr=()=>b.useContext(Is);Is.Provider;function Lr(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Or=b.createContext(Lr()),Er=()=>b.useContext(Or),Rr=(s,e)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(e.isReset()||(s.retryOnMount=!1))},Fr=s=>{b.useEffect(()=>{s.clearReset()},[s])},Ar=({result:s,errorResetBoundary:e,throwOnError:r,query:a,suspense:n})=>s.isError&&!e.isReset()&&!s.isFetching&&a&&(n&&s.data===void 0||Os(r,[s.error,a])),Tr=s=>{if(s.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=s.staleTime;s.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},qr=(s,e)=>s.isLoading&&s.isFetching&&!e,_r=(s,e)=>(s==null?void 0:s.suspense)&&e.isPending,rs=(s,e,r)=>e.fetchOptimistic(s).catch(()=>{r.clearReset()});function Ir(s,e,r){var u,v,y,m,p;const a=Pr(),n=Er(),o=it(),l=o.defaultQueryOptions(s);(v=(u=o.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||v.call(u,l),l._optimisticResults=a?"isRestoring":"optimistic",Tr(l),Rr(l,n),Fr(n);const d=!o.getQueryCache().get(l.queryHash),[c]=b.useState(()=>new e(o,l)),h=c.getOptimisticResult(l),f=!a&&s.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(C=>{const j=f?c.subscribe(_.batchCalls(C)):U;return c.updateResult(),j},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(l)},[l,c]),_r(l,h))throw rs(l,c,n);if(Ar({result:h,errorResetBoundary:n,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((m=(y=o.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||m.call(y,l,h),l.experimental_prefetchInRender&&!Fe&&qr(h,a)){const C=d?rs(l,c,n):(p=o.getQueryCache().get(l.queryHash))==null?void 0:p.promise;C==null||C.catch(U).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?h:c.trackResult(h)}function ee(s,e){return Ir(s,gr)}function et(s,e){const r=it(),[a]=b.useState(()=>new Cr(r,s));b.useEffect(()=>{a.setOptions(s)},[a,s]);const n=b.useSyncExternalStore(b.useCallback(l=>a.subscribe(_.batchCalls(l)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=b.useCallback((l,d)=>{a.mutate(l,d).catch(U)},[a]);if(n.error&&Os(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}const Ds=b.createContext(null);function Dr({children:s}){const[e,r]=b.useState({type:"none"}),[a,n]=b.useState(!0),o=b.useRef(null),l=b.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),d=b.useCallback(m=>{l(),r({type:"module",module:m})},[l]),c=b.useCallback((m,p)=>{l(),r({type:"field",field:m,module:p})},[l]),h=b.useCallback((m,p)=>{l(),r({type:"action",action:m,module:p})},[l]),f=b.useCallback(()=>{l(),o.current=setTimeout(()=>{r({type:"none"})},300)},[l]),u=b.useCallback(()=>{n(m=>!m)},[]),v=b.useCallback(m=>{n(m)},[]),y=b.useMemo(()=>({focus:e,focusModule:d,focusField:c,focusAction:h,clearFocus:f,cancelClearFocus:l,isExpanded:a,toggleExpanded:u,setExpanded:v}),[e,d,c,h,f,l,a,u,v]);return t.jsx(Ds.Provider,{value:y,children:s})}function ot(){const s=b.useContext(Ds);if(!s)throw new Error("useDocumentation must be used within a DocumentationProvider");return s}function $r(s,e){const{focusField:r,clearFocus:a}=ot();return b.useMemo(()=>({onFocus:()=>r(s,e),onMouseEnter:()=>r(s,e),onBlur:a,onMouseLeave:a}),[s,e,r,a])}const $s=b.createContext(null);function Ur({children:s}){const[e,r]=b.useState(null),[a,n]=b.useState(!0),[o,l]=b.useState(!1),d=async()=>{try{if((await(await fetch("/mod/auth/setup-required",{credentials:"include"})).json()).setup_required){l(!0),r(null),n(!1);return}l(!1);const m=await fetch("/mod/auth/me",{credentials:"include"});if(m.ok){const p=await m.json();r(p.user)}else r(null)}catch{r(null)}finally{n(!1)}};b.useEffect(()=>{d()},[]);const c=async(v,y)=>{const m=await fetch("/mod/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:v,password:y})}),p=await m.json();if(!m.ok)throw new Error(p.error||"Login failed");r(p.user)},h=async(v,y,m)=>{const p=await fetch("/mod/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:v,password:y,name:m})}),C=await p.json();if(!p.ok)throw new Error(C.error||"Registration failed");r(C.user)},f=async(v,y,m)=>{const p=await fetch("/mod/auth/setup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:v,password:y,name:m})}),C=await p.json();if(!p.ok)throw new Error(C.error||"Setup failed");l(!1),r(C.user)},u=async()=>{await fetch("/mod/auth/logout",{method:"POST",credentials:"include"}),r(null)};return t.jsx($s.Provider,{value:{user:e,isLoading:a,isAuthenticated:!!e,setupRequired:o,login:c,register:h,setup:f,logout:u,checkAuth:d},children:s})}function Je(){const s=b.useContext($s);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}const be="/mod",as=new Map,Hr=5*60*1e3,je={credentials:"include"};async function Ht(){const s=await fetch(`${be}/_schema`,je);if(!s.ok)throw new Error(`Failed to fetch modules: ${s.statusText}`);return((await s.json()).modules||[]).map(r=>({module:r.name,plural:r.plural,description:r.description||""}))}async function Us(s){const e=as.get(s);if(e&&Date.now()-e.timestamp<Hr)return e.data;const r=await fetch(`${be}/_schema/${s}`,je);if(!r.ok)throw new Error(`Failed to fetch schema for ${s}: ${r.statusText}`);const a=await r.json();return as.set(s,{data:a,timestamp:Date.now()}),a}async function Bt(s,e){const r=new URLSearchParams;e!=null&&e.limit&&r.set("limit",String(e.limit)),e!=null&&e.offset&&r.set("offset",String(e.offset));const a=`${be}/${s}${r.toString()?`?${r}`:""}`,n=await fetch(a,je);if(!n.ok)throw new Error(`Failed to fetch ${s}: ${n.statusText}`);return n.json()}async function Br(s,e){const r=await fetch(`${be}/${s}/${encodeURIComponent(e)}`,je);if(!r.ok)throw r.status===404?new Error(`Record not found: ${e}`):new Error(`Failed to fetch record: ${r.statusText}`);return r.json()}async function Qr(s,e){const r=await fetch(`${be}/${s}`,{...je,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.json().catch(()=>({error:r.statusText}));throw new Error(a.error||"Failed to create record")}return r.json()}async function Wr(s,e,r){const a=await fetch(`${be}/${s}/${encodeURIComponent(e)}`,{...je,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok){const n=await a.json().catch(()=>({error:a.statusText}));throw new Error(n.error||"Failed to update record")}return a.json()}async function Kr(s,e){const r=await fetch(`${be}/${s}/${encodeURIComponent(e)}`,{...je,method:"DELETE"});if(!r.ok){const a=await r.json().catch(()=>({error:r.statusText}));throw new Error(a.error||"Failed to delete record")}}async function Hs(s,e,r,a){const n=await fetch(`${be}/${s}/${encodeURIComponent(r)}/${e}`,{...je,method:"POST",headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0});if(!n.ok){const o=await n.json().catch(()=>({error:n.statusText}));throw new Error(o.error||`Failed to execute ${e}`)}return n.json()}function Bs(s,e,r){const a="http://localhost:8080";let n=s.http.path.replace("{module}",e.plural).replace("{id}","<id>"),o=`curl -X ${s.http.method} "${a}${n}"`;return o+=` \\
  -H "Content-Type: application/json"`,s.auth&&s.auth!=="none"&&(o+=` \\
  -H "X-API-Key: <your-api-key>"`),["POST","PUT","PATCH"].includes(s.http.method)&&r&&(o+=` \\
  -d '${JSON.stringify(r,null,2)}'`),o}function we(s,e="create"){const r={};for(const a of s.fields)a.internal||a.computed||e==="update"&&a.immutable||(r[a.name]=zr(a));return r}function zr(s){var e;if(s.default!==void 0)return s.default;switch(s.type){case"string":case"text":return`sample_${s.name}`;case"int":return 100;case"float":return 99.99;case"bool":return!0;case"email":return"user@example.com";case"url":return"https://example.com";case"uuid":return"550e8400-e29b-41d4-a716-446655440000";case"datetime":return new Date().toISOString();case"date":return new Date().toISOString().split("T")[0];case"time":return"12:00:00";case"duration":return"1h30m";case"json":return{key:"value"};case"secret":return"********";case"enum":return((e=s.values)==null?void 0:e[0])??"option1";case"ref":return`${s.ref}_id_123`;case"bytes":return"<binary data>";default:return null}}function Vr(s){const e=[];for(const r of s.actions){const a=Gr(r,s);a&&e.push(a)}return e}function Gr(s,e){const r=s.type==="create"||s.type==="update"?we(e,s.type):void 0,a=s.http.path.replace("{module}",e.plural).replace("{id}","user_123");return{title:`${s.type.charAt(0).toUpperCase()+s.type.slice(1)} ${e.module}`,description:s.description,method:s.http.method,path:a,curl:Bs(s,e,r),requestBody:r?JSON.stringify(r,null,2):void 0,responseBody:Jr(s,e)}}function Jr(s,e){switch(s.type){case"list":return JSON.stringify({module:e.module,count:2,data:[we(e),we(e)]},null,2);case"get":case"create":case"update":return JSON.stringify({module:e.module,data:we(e)},null,2);case"delete":return JSON.stringify({success:!0},null,2);default:return JSON.stringify({module:e.module,data:we(e)},null,2)}}function Qs(s){var e;return s.type==="enum"&&((e=s.values)!=null&&e.length)?`enum(${s.values.join(" | ")})`:s.type==="ref"&&s.ref?`ref(${s.ref})`:s.type}function Yr(s){switch(s.type){case"min":return`Minimum value: ${s.value}`;case"max":return`Maximum value: ${s.value}`;case"min_length":return`Minimum length: ${s.value} characters`;case"max_length":return`Maximum length: ${s.value} characters`;case"pattern":return`Must match pattern: ${s.value}`;case"ref_exists":return"Referenced record must exist";default:return`${s.type}: ${s.value}`}}function Xr(s){const e=[];if(s.required&&e.push("Required field"),s.unique&&e.push("Must be unique"),s.immutable&&e.push("Cannot be changed after creation"),s.constraints)for(const r of s.constraints)e.push(Yr(r));switch(s.type){case"email":e.push("Must be a valid email address");break;case"url":e.push("Must be a valid URL");break;case"uuid":e.push("Must be a valid UUID");break}return e}const Zr=[{id:"spec",label:"Spec"},{id:"details",label:"Details"},{id:"api",label:"API"},{id:"examples",label:"Examples"}];function ea(){const{focus:s,isExpanded:e,toggleExpanded:r,cancelClearFocus:a}=ot(),[n,o]=b.useState("spec");return e?t.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col h-full",onMouseEnter:a,children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50",children:[t.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Documentation"}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Hide Documentation",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"flex border-b border-gray-200",children:Zr.map(l=>t.jsx("button",{onClick:()=>o(l.id),className:`flex-1 px-3 py-2 text-xs font-medium transition-colors ${n===l.id?"text-primary-600 border-b-2 border-primary-600 bg-primary-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:l.label},l.id))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[s.type==="none"&&t.jsx(ta,{}),s.type==="module"&&s.module&&t.jsx(sa,{module:s.module,tab:n}),s.type==="field"&&s.field&&s.module&&t.jsx(ra,{field:s.field,module:s.module,tab:n}),s.type==="action"&&s.action&&s.module&&t.jsx(aa,{action:s.action,module:s.module,tab:n})]})]}):t.jsx("button",{onClick:r,className:"fixed right-0 top-1/2 -translate-y-1/2 bg-primary-600 text-white p-2 rounded-l-lg shadow-lg hover:bg-primary-700 transition-colors",title:"Show Documentation",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}function ta(){return t.jsxs("div",{className:"text-center text-gray-500 py-8",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("p",{className:"text-sm",children:"Hover over or focus on a field to see its documentation."})]})}function sa({module:s,tab:e}){const r=b.useMemo(()=>Vr(s),[s]);switch(e){case"spec":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs(A,{title:"Module",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.module}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Plural: ",s.plural]})]}),t.jsx(A,{title:"Fields",children:t.jsx("ul",{className:"space-y-1",children:s.fields.filter(a=>!a.internal).map(a=>t.jsxs("li",{className:"text-xs",children:[t.jsx("code",{className:"text-primary-600",children:a.name}),t.jsxs("span",{className:"text-gray-500",children:[" : ",Qs(a)]}),a.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]},a.name))})}),t.jsx(A,{title:"Lookups",children:t.jsxs("p",{className:"text-xs text-gray-600",children:["Records can be looked up by: ",s.lookups.join(", ")]})})]});case"details":return t.jsxs("div",{className:"space-y-4",children:[t.jsx(A,{title:"Description",children:t.jsx("p",{className:"text-sm text-gray-700",children:s.description||"No description available."})}),t.jsx(A,{title:"Actions",children:t.jsx("ul",{className:"space-y-2",children:s.actions.map(a=>t.jsxs("li",{className:"text-xs",children:[t.jsx("span",{className:"font-medium text-gray-900",children:a.name}),t.jsx("p",{className:"text-gray-500",children:a.description})]},a.name))})})]});case"api":return t.jsx("div",{className:"space-y-4",children:t.jsx(A,{title:"Endpoints",children:s.actions.map(a=>t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Ws,{method:a.http.method}),t.jsx("code",{className:"text-xs text-gray-700",children:a.http.path.replace("{module}",s.plural)})]}),t.jsx("p",{className:"text-xs text-gray-500",children:a.description})]},a.name))})});case"examples":return t.jsx("div",{className:"space-y-4",children:r.slice(0,3).map((a,n)=>t.jsx(A,{title:a.title,children:t.jsx(qe,{code:a.curl})},n))});default:return null}}function ra({field:s,module:e,tab:r}){const a=b.useMemo(()=>Xr(s),[s]);switch(r){case"spec":return t.jsxs("div",{className:"space-y-4",children:[t.jsx(A,{title:"Field",children:t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name})}),t.jsx(A,{title:"Type",children:t.jsx("code",{className:"text-sm text-primary-600",children:Qs(s)})}),s.values&&s.values.length>0&&t.jsx(A,{title:"Allowed Values",children:t.jsx("ul",{className:"space-y-1",children:s.values.map(n=>t.jsx("li",{className:"text-xs",children:t.jsx("code",{className:"bg-gray-100 px-1 rounded",children:n})},n))})}),t.jsx(A,{title:"Attributes",children:t.jsxs("ul",{className:"space-y-1 text-xs",children:[t.jsxs("li",{children:["Required: ",t.jsx("span",{className:s.required?"text-red-600":"text-gray-500",children:s.required?"Yes":"No"})]}),s.unique&&t.jsxs("li",{children:["Unique: ",t.jsx("span",{className:"text-amber-600",children:"Yes"})]}),s.immutable&&t.jsxs("li",{children:["Immutable: ",t.jsx("span",{className:"text-amber-600",children:"Yes"})]}),s.computed&&t.jsxs("li",{children:["Computed: ",t.jsx("span",{className:"text-blue-600",children:"Yes (auto-generated)"})]})]})})]});case"details":return t.jsxs("div",{className:"space-y-4",children:[t.jsx(A,{title:"Description",children:t.jsx("p",{className:"text-sm text-gray-700",children:s.description||"No description available."})}),a.length>0&&t.jsx(A,{title:"Validation Rules",children:t.jsx("ul",{className:"space-y-1",children:a.map((n,o)=>t.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[t.jsx("span",{className:"text-primary-500 mt-0.5",children:"*"}),n]},o))})}),s.ref&&t.jsx(A,{title:"Reference",children:t.jsxs("p",{className:"text-xs text-gray-600",children:["References a record in the ",t.jsx("code",{className:"text-primary-600",children:s.ref})," module."]})})]});case"api":return t.jsxs("div",{className:"space-y-4",children:[t.jsx(A,{title:"JSON Path",children:t.jsxs("code",{className:"text-sm text-gray-700",children:["$.data.",s.name]})}),t.jsx(A,{title:"In Request Body",children:t.jsx(qe,{code:JSON.stringify({[s.name]:ns(s)},null,2)})})]});case"examples":return t.jsxs("div",{className:"space-y-4",children:[t.jsx(A,{title:"Example Values",children:t.jsx(qe,{code:String(ns(s))})}),s.type==="enum"&&s.values&&t.jsx(A,{title:"Valid Options",children:t.jsx("ul",{className:"space-y-1",children:s.values.map(n=>t.jsx("li",{className:"text-xs",children:t.jsx("code",{className:"bg-gray-100 px-2 py-0.5 rounded",children:n})},n))})})]});default:return null}}function ns(s){var e;if(s.default!==void 0)return s.default;switch(s.type){case"string":return`sample_${s.name}`;case"int":return 100;case"float":return 99.99;case"bool":return!0;case"email":return"user@example.com";case"url":return"https://example.com";case"enum":return((e=s.values)==null?void 0:e[0])??"option1";case"ref":return`${s.ref}_id`;default:return null}}function aa({action:s,module:e,tab:r}){const a=b.useMemo(()=>s.type==="create"||s.type==="update"?we(e,s.type):void 0,[s,e]),n=b.useMemo(()=>Bs(s,e,a),[s,e,a]);switch(r){case"spec":return t.jsxs("div",{className:"space-y-4",children:[t.jsx(A,{title:"Action",children:t.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name})}),t.jsx(A,{title:"Type",children:t.jsx("span",{className:"inline-block px-2 py-0.5 bg-primary-100 text-primary-700 text-xs rounded",children:s.type})}),t.jsx(A,{title:"HTTP",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ws,{method:s.http.method}),t.jsx("code",{className:"text-xs text-gray-700",children:s.http.path.replace("{module}",e.plural)})]})}),s.auth&&s.auth!=="none"&&t.jsx(A,{title:"Authentication",children:t.jsxs("p",{className:"text-xs text-gray-600",children:["Requires: ",s.auth]})}),s.confirm&&t.jsx(A,{title:"Confirmation",children:t.jsx("p",{className:"text-xs text-amber-600",children:"This action requires confirmation"})})]});case"details":return t.jsxs("div",{className:"space-y-4",children:[t.jsx(A,{title:"Description",children:t.jsx("p",{className:"text-sm text-gray-700",children:s.description})}),s.input.length>0&&t.jsx(A,{title:"Input Fields",children:t.jsx("ul",{className:"space-y-2",children:s.input.map(o=>t.jsxs("li",{className:"text-xs",children:[t.jsx("code",{className:"text-primary-600",children:o.name}),t.jsxs("span",{className:"text-gray-500",children:[" : ",o.type]}),o.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"}),o.description&&t.jsx("p",{className:"text-gray-500 mt-0.5",children:o.description})]},o.name))})})]});case"api":return t.jsx("div",{className:"space-y-4",children:t.jsx(A,{title:"Curl Command",children:t.jsx(qe,{code:n})})});case"examples":return t.jsxs("div",{className:"space-y-4",children:[a&&t.jsx(A,{title:"Request Body",children:t.jsx(qe,{code:JSON.stringify(a,null,2)})}),t.jsx(A,{title:"Response",children:t.jsx(qe,{code:JSON.stringify({module:e.module,data:s.type==="delete"?null:we(e)},null,2)})})]});default:return null}}function A({title:s,children:e}){return t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:s}),e]})}function Ws({method:s}){const e={GET:"bg-green-100 text-green-700",POST:"bg-blue-100 text-blue-700",PUT:"bg-amber-100 text-amber-700",PATCH:"bg-orange-100 text-orange-700",DELETE:"bg-red-100 text-red-700"};return t.jsx("span",{className:`inline-block px-1.5 py-0.5 text-xs font-mono font-medium rounded ${e[s]||"bg-gray-100 text-gray-700"}`,children:s})}function qe({code:s}){const[e,r]=b.useState(!1),a=()=>{navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)};return t.jsxs("div",{className:"relative group",children:[t.jsx("pre",{className:"bg-gray-900 text-gray-100 text-xs p-3 rounded-lg overflow-x-auto",children:t.jsx("code",{children:s})}),t.jsx("button",{onClick:a,className:"absolute top-2 right-2 p-1 bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy to clipboard",children:e?t.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}function J(s){const e={api:"API",api_key:"API Key",api_keys:"API Keys",id:"ID",url:"URL",uuid:"UUID",sse:"SSE",http:"HTTP"};return e[s.toLowerCase()]?e[s.toLowerCase()]:s.split("_").map(r=>{const a=r.toLowerCase();return e[a]?e[a]:r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}).join(" ")}function na(){const{isExpanded:s}=ot();return t.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[t.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("svg",{className:"w-8 h-8 text-primary-600",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"APIGate"}),t.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-0.5 rounded-full",children:"Admin"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("a",{href:"/mod/_schema",target:"_blank",className:"text-sm text-gray-500 hover:text-gray-700",children:"Schema API"}),t.jsx("a",{href:"/swagger",target:"_blank",className:"text-sm text-gray-500 hover:text-gray-700",children:"Swagger"})]})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsx(ia,{}),t.jsx("main",{className:`flex-1 overflow-y-auto p-6 transition-all ${s?"mr-80":""}`,children:t.jsx(Vs,{})}),t.jsx("div",{className:"fixed right-0 top-[57px] bottom-0",children:t.jsx(ea,{})})]})]})}function ia(){const{data:s,isLoading:e,error:r}=ee({queryKey:["modules"],queryFn:Ht});return t.jsxs("aside",{className:"w-56 bg-white border-r border-gray-200 flex flex-col",children:[t.jsxs("nav",{className:"p-4 border-b border-gray-100 space-y-1",children:[t.jsxs(gt,{to:"/",end:!0,className:({isActive:a})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${a?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]}),t.jsxs(gt,{to:"/usage",className:({isActive:a})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${a?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Usage Analytics"]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[t.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Modules"}),e&&t.jsx("div",{className:"text-sm text-gray-500 px-3",children:"Loading..."}),r&&t.jsx("div",{className:"text-sm text-red-500 px-3",children:"Failed to load modules"}),s&&t.jsx("nav",{className:"space-y-1",children:s.map(a=>t.jsxs(gt,{to:`/${a.module}`,className:({isActive:n})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[t.jsx(oa,{module:a.module}),t.jsx("span",{children:J(a.plural)})]},a.module))})]}),t.jsx("div",{className:"p-4 border-t border-gray-100",children:t.jsx("p",{className:"text-xs text-gray-400 text-center",children:"APIGate v1.0.0"})})]})}function oa({module:s}){return{user:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),plan:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),api_key:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),route:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),upstream:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}[s]||t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}function la(){const{data:s,isLoading:e,error:r}=ee({queryKey:["modules"],queryFn:Ht});return e?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[t.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading modules..."]})}):r?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Failed to load modules"}),t.jsx("p",{className:"text-red-600",children:"Please check that the API server is running."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),t.jsx("p",{className:"text-gray-500",children:"Manage your API resources"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:s==null?void 0:s.map(a=>t.jsx(ca,{module:a},a.module))}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(z,{to:"/users/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Add User"]}),t.jsxs(z,{to:"/plans/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Create Plan"]}),t.jsxs(z,{to:"/api_key/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Generate Key"]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg shadow-sm p-6 text-white",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Schema API"}),t.jsx("p",{className:"text-primary-100 mb-4",children:"Access the module schema API for integration and documentation."}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("a",{href:"/mod/_schema",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-lg hover:bg-white/30 transition-colors text-sm",children:[t.jsx("code",{children:"/mod/_schema"}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),t.jsxs("a",{href:"/swagger",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-lg hover:bg-white/30 transition-colors text-sm",children:["Swagger UI",t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})]})}function ca({module:s}){const{data:e}=ee({queryKey:["records",s.plural,{limit:1}],queryFn:()=>Bt(s.plural,{limit:1}),staleTime:3e4});return t.jsxs(z,{to:`/${s.module}`,"data-testid":"module-card","data-module":s.module,className:"block bg-white rounded-lg shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:J(s.plural)}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description||`Manage ${J(s.plural)}`})]}),t.jsx("div",{className:"text-2xl font-bold text-primary-600",children:(e==null?void 0:e.count)??"-"})]}),t.jsxs("div",{className:"mt-4 flex items-center text-sm text-primary-600",children:["View all",t.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}function da({module:s,records:e,isLoading:r,onDelete:a,onAction:n}){const{focusModule:o,focusField:l}=ot(),[d,c]=b.useState(null),[h,f]=b.useState("asc"),u=b.useMemo(()=>s.fields.filter(p=>!p.internal&&p.type!=="secret"&&p.type!=="bytes"),[s.fields]),v=b.useMemo(()=>s.actions.filter(p=>p.type==="custom"),[s.actions]),y=b.useMemo(()=>d?[...e].sort((p,C)=>{const j=p[d],S=C[d];if(j===S)return 0;if(j==null)return 1;if(S==null)return-1;const M=String(j).localeCompare(String(S));return h==="asc"?M:-M}):e,[e,d,h]),m=p=>{d===p?f(C=>C==="asc"?"desc":"asc"):(c(p),f("asc"))};return qt.useEffect(()=>{o(s)},[s,o]),r?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:t.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-500",children:[t.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):e.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",s.plural," found"]}),t.jsxs("p",{className:"text-gray-500 mb-4",children:["Get started by creating a new ",s.module,"."]}),t.jsxs(z,{to:`/${s.module}/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",s.module]})]}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[u.map(p=>t.jsx("th",{onClick:()=>m(p.name),onMouseEnter:()=>l(p,s),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-1",children:[is(p.name),d===p.name&&t.jsx("svg",{className:`w-4 h-4 ${h==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},p.name)),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(p=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[u.map(C=>t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:ua(p[C.name],C)},C.name)),t.jsx("td",{className:"px-4 py-3 text-right text-sm whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(z,{to:`/${s.module}/${p.id}`,className:"text-primary-600 hover:text-primary-800",title:"View",children:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),v.map(C=>t.jsx("button",{onClick:()=>n==null?void 0:n(C.name,String(p.id)),className:ha(C.name),title:C.description||is(C.name),children:ma(C.name)},C.name)),a&&t.jsx("button",{onClick:()=>a(String(p.id)),className:"text-red-400 hover:text-red-600",title:"Delete",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},String(p.id)))})]})}),t.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:t.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," ",s.plural]})})]})}function is(s){return s.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function ua(s,e){if(s==null)return t.jsx("span",{className:"text-gray-400",children:"-"});switch(e.type){case"bool":return t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s?"Yes":"No"});case"enum":return t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-100 text-primary-800",children:String(s)});case"datetime":return new Date(String(s)).toLocaleString();case"date":return new Date(String(s)).toLocaleDateString();case"email":return t.jsx("a",{href:`mailto:${s}`,className:"text-primary-600 hover:underline",children:String(s)});case"url":return t.jsx("a",{href:String(s),target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:ut(String(s),30)});case"json":return t.jsx("code",{className:"text-xs bg-gray-100 px-1 rounded",children:ut(JSON.stringify(s),30)});case"ref":return t.jsx("span",{className:"text-gray-600",children:ut(String(s),20)});default:return ut(String(s),40)}}function ut(s,e){return s.length<=e?s:s.slice(0,e)+"..."}function ha(s){const e=s.toLowerCase();return e.includes("enable")||e.includes("activate")?"text-green-400 hover:text-green-600":e.includes("disable")||e.includes("suspend")||e.includes("cancel")?"text-orange-400 hover:text-orange-600":e.includes("revoke")?"text-red-400 hover:text-red-600":"text-gray-400 hover:text-gray-600"}function ma(s){const e=s.toLowerCase();return e.includes("enable")||e.includes("activate")?t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.includes("disable")||e.includes("suspend")?t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}):e.includes("cancel")||e.includes("revoke")?t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):e.includes("default")||e.includes("set")?t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}):t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}function xa(){var C;const{module:s}=Cs(),e=it(),[r,a]=b.useState(null),[n,o]=b.useState(null),{data:l,isLoading:d}=ee({queryKey:["schema",s],queryFn:()=>Us(s),enabled:!!s}),{data:c,isLoading:h}=ee({queryKey:["records",s],queryFn:()=>Bt(l.plural,{limit:100}),enabled:!!s&&!!l}),f=et({mutationFn:j=>Kr(l.plural,j),onSuccess:()=>{e.invalidateQueries({queryKey:["records",s]}),a(null)}}),u=et({mutationFn:({action:j,id:S})=>Hs(l.plural,j,S),onSuccess:()=>{e.invalidateQueries({queryKey:["records",s]}),o(null)}}),v=j=>{a(j)},y=()=>{r&&f.mutate(r)},m=(j,S)=>{const M=l==null?void 0:l.actions.find(x=>x.name===j);M!=null&&M.confirm?o({action:j,id:S}):u.mutate({action:j,id:S})},p=()=>{n&&u.mutate(n)};return d?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[t.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):l?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:J(l.plural)}),t.jsx("p",{className:"text-gray-500",children:l.description||`Manage ${J(l.plural)}`})]}),t.jsxs(z,{to:`/${s}/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",J(l.module)]})]}),t.jsx(da,{module:l,records:(c==null?void 0:c.data)||[],isLoading:h,onDelete:v,onAction:m}),r&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirm Delete"}),t.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",J(l.module).toLowerCase(),"? This action cannot be undone."]}),t.jsxs("div",{className:"flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>a(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{onClick:y,disabled:f.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50",children:f.isPending?"Deleting...":"Delete"})]})]})}),n&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Confirm ",bt(n.action)]}),t.jsx("p",{className:"text-gray-600 mb-6",children:((C=l.actions.find(j=>j.name===n.action))==null?void 0:C.description)||`Are you sure you want to ${bt(n.action).toLowerCase()} this ${J(l.module).toLowerCase()}?`}),t.jsxs("div",{className:"flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{onClick:p,disabled:u.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:u.isPending?"Processing...":bt(n.action)})]})]})})]}):t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Module not found"}),t.jsxs("p",{className:"text-red-600",children:['The module "',s,'" does not exist.']})]})}function bt(s){return s.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function os(s){const e=["name","title","email","label","slug"];for(const r of e)if(s[r]&&typeof s[r]=="string")return s[r];return String(s.id||"Unknown")}function pa({targetModule:s,value:e,onChange:r,disabled:a,className:n="",placeholder:o,hasError:l}){var m;const{data:d}=ee({queryKey:["modules"],queryFn:Ht,staleTime:3e5}),c=((m=d==null?void 0:d.find(p=>p.module===s))==null?void 0:m.plural)||`${s}s`,{data:h,isLoading:f,error:u}=ee({queryKey:["records",c],queryFn:()=>Bt(c,{limit:100}),enabled:!!c,staleTime:30*1e3}),v=(h==null?void 0:h.data)||[],y=`
    w-full px-3 py-2 border rounded-lg text-sm
    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
    transition-colors
    ${l?"border-red-300 bg-red-50":"border-gray-300 bg-white"}
    ${a?"bg-gray-100 text-gray-500 cursor-not-allowed":""}
    ${n}
  `.trim();return f?t.jsxs("div",{className:"relative",children:[t.jsx("select",{disabled:!0,className:y,children:t.jsxs("option",{children:["Loading ",s,"s..."]})}),t.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2",children:t.jsxs("svg",{className:"animate-spin w-4 h-4 text-gray-400",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})]}):u?t.jsxs("div",{className:"text-sm text-red-500",children:["Failed to load ",s,"s: ",u instanceof Error?u.message:"Unknown error"]}):v.length===0?t.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg px-3 py-2",children:["No ",s,"s available. Please create a ",s," first."]}):t.jsxs("select",{value:e||"",onChange:p=>r(p.target.value||null),disabled:a,className:y,children:[t.jsx("option",{value:"",children:o||`Select ${s}...`}),v.map(p=>t.jsxs("option",{value:String(p.id),children:[os(p),p.id!==os(p)&&` (${p.id})`]},String(p.id)))]})}const Ks=b.forwardRef(function({field:e,module:r,value:a,onChange:n,error:o,disabled:l},d){var y;const c=$r(e,r),h=`
      w-full px-3 py-2 border rounded-lg text-sm
      focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
      transition-colors
      ${o?"border-red-300 bg-red-50":"border-gray-300 bg-white"}
      ${l?"bg-gray-100 text-gray-500 cursor-not-allowed":""}
    `,f=t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[ht(e.name),e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"}),e.computed&&t.jsx("span",{className:"text-gray-400 ml-1 text-xs",children:"(auto)"})]}),u=o&&t.jsx("p",{className:"mt-1 text-xs text-red-500",children:o}),v=e.description&&t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.description});switch(e.type){case"bool":return t.jsxs("div",{className:"mb-4",...c,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{ref:d,type:"checkbox",checked:!!a,onChange:m=>n(m.target.checked),disabled:l||e.computed,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[ht(e.name),e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),v,u]});case"enum":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsxs("select",{value:String(a??""),onChange:m=>n(m.target.value),disabled:l||e.computed,className:h,children:[t.jsxs("option",{value:"",children:["Select ",ht(e.name),"..."]}),(y=e.values)==null?void 0:y.map(m=>t.jsx("option",{value:m,children:m},m))]}),v,u]});case"text":case"json":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("textarea",{value:e.type==="json"?fa(a):String(a??""),onChange:m=>n(e.type==="json"?ya(m.target.value):m.target.value),disabled:l||e.computed,rows:4,className:h}),v,u]});case"secret":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"password",value:String(a??""),onChange:m=>n(m.target.value),disabled:l||e.computed,className:h,autoComplete:"new-password"}),v,u]});case"email":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"email",value:String(a??""),onChange:m=>n(m.target.value),disabled:l||e.computed,className:h,placeholder:"user@example.com"}),v,u]});case"url":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"url",value:String(a??""),onChange:m=>n(m.target.value),disabled:l||e.computed,className:h,placeholder:"https://example.com"}),v,u]});case"int":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"number",value:a!=null?String(a):"",onChange:m=>n(m.target.value?parseInt(m.target.value,10):null),disabled:l||e.computed,className:h,step:"1"}),v,u]});case"float":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"number",value:a!=null?String(a):"",onChange:m=>n(m.target.value?parseFloat(m.target.value):null),disabled:l||e.computed,className:h,step:"any"}),v,u]});case"datetime":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"datetime-local",value:ga(a),onChange:m=>n(m.target.value?new Date(m.target.value).toISOString():null),disabled:l||e.computed,className:h}),v,u]});case"date":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"date",value:String(a??""),onChange:m=>n(m.target.value),disabled:l||e.computed,className:h}),v,u]});case"time":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"time",value:String(a??""),onChange:m=>n(m.target.value),disabled:l||e.computed,className:h}),v,u]});case"ref":return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx(pa,{targetModule:e.ref||"",value:a,onChange:m=>n(m),disabled:l||e.computed,hasError:!!o,placeholder:`Select ${ht(e.ref||"reference")}...`}),v,u]});case"string":default:return t.jsxs("div",{className:"mb-4",...c,children:[f,t.jsx("input",{ref:d,type:"text",value:String(a??""),onChange:m=>n(m.target.value),disabled:l||e.computed,className:h}),v,u]})}});function ht(s){return s.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function fa(s){return s==null?"":typeof s=="string"?s:JSON.stringify(s,null,2)}function ya(s){try{return JSON.parse(s)}catch{return s}}function ga(s){if(!s)return"";try{return new Date(String(s)).toISOString().slice(0,16)}catch{return""}}function ba({module:s,initialData:e={},mode:r,onSubmit:a,onCancel:n,isLoading:o}){const{focusModule:l}=ot(),[d,c]=b.useState(()=>{if(r==="edit")return e;const j={...e};for(const S of s.fields)S.default!==void 0&&j[S.name]===void 0&&(j[S.name]=S.default);return j}),[h,f]=b.useState({}),[u,v]=b.useState(null),y=b.useMemo(()=>s.fields.filter(j=>!(j.implicit||j.internal||j.computed||r==="edit"&&j.immutable)),[s.fields,r]),m=b.useCallback((j,S)=>{c(M=>({...M,[j]:S})),h[j]&&f(M=>{const x={...M};return delete x[j],x})},[h]),p=b.useCallback(()=>{const j={};for(const S of y){const M=d[S.name];if(S.required&&(M==null||M==="")){j[S.name]=`${ja(S.name)} is required`;continue}if(M!=null&&M!==""){const x=va(S,M);x&&(j[S.name]=x)}}return f(j),Object.keys(j).length===0},[y,d]),C=async j=>{if(j.preventDefault(),v(null),!!p())try{await a(d)}catch(S){v(S instanceof Error?S.message:"An error occurred")}};return qt.useEffect(()=>{l(s)},[s,l]),t.jsxs("form",{onSubmit:C,className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:r==="create"?`Create ${J(s.module)}`:`Edit ${J(s.module)}`}),y.map(j=>t.jsx(Ks,{field:j,module:s,value:d[j.name],onChange:S=>m(j.name,S),error:h[j.name],disabled:o},j.name))]}),u&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"text-sm text-red-700",children:u})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n&&t.jsx("button",{type:"button",onClick:n,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 flex items-center gap-2",children:[o&&t.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r==="create"?"Create":"Save Changes"]})]})]})}function ja(s){return s.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function va(s,e){switch(s.type){case"email":if(typeof e=="string"&&!wa(e))return"Please enter a valid email address";break;case"url":if(typeof e=="string"&&!Na(e))return"Please enter a valid URL";break;case"enum":if(s.values&&!s.values.includes(String(e)))return`Must be one of: ${s.values.join(", ")}`;break}if(s.constraints)for(const r of s.constraints)switch(r.type){case"min_length":if(typeof e=="string"&&e.length<Number(r.value))return r.message||`Must be at least ${r.value} characters`;break;case"max_length":if(typeof e=="string"&&e.length>Number(r.value))return r.message||`Must be at most ${r.value} characters`;break;case"min":if(typeof e=="number"&&e<Number(r.value))return r.message||`Must be at least ${r.value}`;break;case"max":if(typeof e=="number"&&e>Number(r.value))return r.message||`Must be at most ${r.value}`;break;case"pattern":if(typeof e=="string")try{const n=String(r.value).replace(/\[([^\]]*)-([^\]]*)\]/g,(o,l,d)=>l&&d?`[${l}\\-${d}]`:o);if(!new RegExp(n).test(e))return r.message||"Invalid format"}catch(a){console.warn(`Invalid regex pattern: ${r.value}`,a)}break}return null}function wa(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}function Na(s){try{return new URL(s),!0}catch{return!1}}const ls=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function Ca({value:s,onChange:e,disabled:r,error:a}){const n=Array.isArray(s)?s:[],o=c=>{n.includes(c)?e(n.filter(h=>h!==c)):e([...n,c])},l=()=>e([...ls]),d=()=>e([]);return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("button",{type:"button",onClick:l,disabled:r,className:"text-xs text-primary-600 hover:text-primary-700 disabled:opacity-50",children:"Select all"}),t.jsx("span",{className:"text-gray-300",children:"|"}),t.jsx("button",{type:"button",onClick:d,disabled:r,className:"text-xs text-primary-600 hover:text-primary-700 disabled:opacity-50",children:"Clear"}),n.length===0&&t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(empty = all methods)"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:ls.map(c=>{const h=n.includes(c),f={GET:"bg-green-100 border-green-300 text-green-700",POST:"bg-blue-100 border-blue-300 text-blue-700",PUT:"bg-yellow-100 border-yellow-300 text-yellow-700",PATCH:"bg-orange-100 border-orange-300 text-orange-700",DELETE:"bg-red-100 border-red-300 text-red-700",HEAD:"bg-purple-100 border-purple-300 text-purple-700",OPTIONS:"bg-gray-100 border-gray-300 text-gray-700"};return t.jsxs("label",{className:`
                inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md border cursor-pointer
                transition-all text-sm font-medium
                ${r?"opacity-50 cursor-not-allowed":"hover:shadow-sm"}
                ${h?f[c]:"bg-gray-50 border-gray-200 text-gray-400"}
              `,children:[t.jsx("input",{type:"checkbox",checked:h,onChange:()=>o(c),disabled:r,className:"sr-only"}),c]},c)})}),a&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:a})]})}function ka({value:s,onChange:e,disabled:r,error:a}){const n=Array.isArray(s)?s:[],o=()=>{e([...n,{name:"",value:"",isRegex:!1,required:!1}])},l=(c,h)=>{const f=[...n];f[c]={...f[c],...h},e(f)},d=c=>{e(n.filter((h,f)=>f!==c))};return t.jsxs("div",{className:"space-y-3",children:[n.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No header conditions (route matches all requests)"}):t.jsx("div",{className:"space-y-2",children:n.map((c,h)=>t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Header Name"}),t.jsx("input",{type:"text",value:c.name,onChange:f=>l(h,{name:f.target.value}),disabled:r,placeholder:"X-Custom-Header",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Value"}),t.jsx("input",{type:"text",value:c.value,onChange:f=>l(h,{value:f.target.value}),disabled:r,placeholder:"expected-value",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]})]}),t.jsxs("div",{className:"flex flex-col gap-1 pt-5",children:[t.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-gray-600",children:[t.jsx("input",{type:"checkbox",checked:c.isRegex||!1,onChange:f=>l(h,{isRegex:f.target.checked}),disabled:r,className:"w-3 h-3"}),"Regex"]}),t.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-gray-600",children:[t.jsx("input",{type:"checkbox",checked:c.required||!1,onChange:f=>l(h,{required:f.target.checked}),disabled:r,className:"w-3 h-3"}),"Required"]})]}),t.jsx("button",{type:"button",onClick:()=>d(h),disabled:r,className:"p-1 text-gray-400 hover:text-red-500 disabled:opacity-50",title:"Remove header",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},h))}),t.jsxs("button",{type:"button",onClick:o,disabled:r,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-md disabled:opacity-50",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Header Condition"]}),a&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:a})]})}function cs({value:s,onChange:e,disabled:r,error:a,type:n}){const[o,l]=b.useState(null),d=s||{},c=g=>{e({...d,...g})},h=d.set_headers||{},f=d.delete_headers||[],u=()=>{c({set_headers:{...h,"":""}})},v=(g,N,O)=>{const P={...h};g!==N&&delete P[g],P[N]=O,c({set_headers:P})},y=g=>{const N={...h};delete N[g],c({set_headers:N})},m=()=>{c({delete_headers:[...f,""]})},p=(g,N)=>{const O=[...f];O[g]=N,c({delete_headers:O})},C=g=>{c({delete_headers:f.filter((N,O)=>O!==g)})},j=d.set_query||{},S=d.delete_query||[],M=Object.keys(h).length>0||f.length>0||Object.keys(j).length>0||S.length>0||!!d.body_expr,x=[{id:"headers",label:"Headers",available:!0},{id:"query",label:"Query Params",available:n==="request"},{id:"body",label:"Body",available:!0}];return t.jsxs("div",{className:"space-y-3",children:[!M&&!o&&t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No transforms configured"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:x.filter(g=>g.available).map(g=>t.jsxs("button",{type:"button",onClick:()=>l(o===g.id?null:g.id),disabled:r,className:`
              px-3 py-1.5 text-sm rounded-md border transition-colors
              ${o===g.id?"bg-primary-50 border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:border-gray-300"}
              disabled:opacity-50
            `,children:[g.label,g.id==="headers"&&(Object.keys(h).length>0||f.length>0)&&t.jsx("span",{className:"ml-1 text-xs bg-primary-100 text-primary-600 px-1.5 rounded-full",children:Object.keys(h).length+f.length}),g.id==="query"&&(Object.keys(j).length>0||S.length>0)&&t.jsx("span",{className:"ml-1 text-xs bg-primary-100 text-primary-600 px-1.5 rounded-full",children:Object.keys(j).length+S.length}),g.id==="body"&&d.body_expr&&t.jsx("span",{className:"ml-1 text-xs bg-primary-100 text-primary-600 px-1.5 rounded-full",children:"1"})]},g.id))}),o==="headers"&&t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Set Headers"}),Object.entries(h).map(([g,N],O)=>t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("input",{type:"text",value:g,onChange:P=>v(g,P.target.value,N),placeholder:"Header-Name",disabled:r,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded"}),t.jsx("span",{className:"text-gray-400",children:"="}),t.jsx("input",{type:"text",value:N,onChange:P=>v(g,g,P.target.value),placeholder:"value or {{expr}}",disabled:r,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded"}),t.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-500",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},O)),t.jsx("button",{type:"button",onClick:u,disabled:r,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Add header to set"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Delete Headers"}),f.map((g,N)=>t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("input",{type:"text",value:g,onChange:O=>p(N,O.target.value),placeholder:"Header-Name",disabled:r,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded"}),t.jsx("button",{type:"button",onClick:()=>C(N),className:"text-red-500",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},N)),t.jsx("button",{type:"button",onClick:m,disabled:r,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Add header to delete"})]})]}),o==="query"&&n==="request"&&t.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4",children:t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Set Query Parameters"}),Object.entries(j).map(([g,N],O)=>t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("input",{type:"text",value:g,onChange:P=>{const Q={...j};delete Q[g],Q[P.target.value]=N,c({set_query:Q})},placeholder:"param",disabled:r,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded"}),t.jsx("span",{className:"text-gray-400",children:"="}),t.jsx("input",{type:"text",value:N,onChange:P=>{c({set_query:{...j,[g]:P.target.value}})},placeholder:"value",disabled:r,className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded"}),t.jsx("button",{type:"button",onClick:()=>{const P={...j};delete P[g],c({set_query:P})},className:"text-red-500",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},O)),t.jsx("button",{type:"button",onClick:()=>c({set_query:{...j,"":""}}),disabled:r,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Add query parameter"})]})}),o==="body"&&t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Body Expression"}),t.jsx("textarea",{value:d.body_expr||"",onChange:g=>c({body_expr:g.target.value}),placeholder:"Expression to transform body, e.g.: { ...body, extra: 'value' }",disabled:r,rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded font-mono"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use expressions to transform the ",n," body. Available: body, headers, path, query"]})]}),a&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:a})]})}const ds={basic:{title:"Basic Information",description:"Route name and description",fields:["name","description","enabled"],defaultOpen:!0},matching:{title:"Request Matching",description:"How incoming requests are matched to this route",fields:["path_pattern","match_type","methods","headers"],defaultOpen:!0},target:{title:"Target & Rewriting",description:"Where to forward requests and how to transform paths",fields:["upstream_id","path_rewrite","method_override","protocol"],defaultOpen:!0},transforms:{title:"Request/Response Transforms",description:"Transform headers, query params, or body",fields:["request_transform","response_transform"],defaultOpen:!1},metering:{title:"Metering & Priority",description:"Usage tracking and route priority",fields:["metering_expr","metering_mode","priority"],defaultOpen:!1}};function Sa({module:s,initialData:e={},mode:r,onSubmit:a,onCancel:n,isLoading:o}){const[l,d]=b.useState(()=>{const x=new Set;return Object.entries(ds).forEach(([g,N])=>{N.defaultOpen&&x.add(g)}),x}),[c,h]=b.useState(()=>{if(r==="edit")return e;const x={...e};for(const g of s.fields)g.default!==void 0&&x[g.name]===void 0&&(x[g.name]=g.default);return x}),[f,u]=b.useState({}),[v,y]=b.useState(null),m=x=>{d(g=>{const N=new Set(g);return N.has(x)?N.delete(x):N.add(x),N})},p=b.useCallback((x,g)=>{h(N=>({...N,[x]:g})),f[x]&&u(N=>{const O={...N};return delete O[x],O})},[f]),C=b.useCallback(()=>{const x={},g=["name","path_pattern","upstream_id"];for(const N of g){const O=c[N];(O==null||O==="")&&(x[N]=`${Ma(N)} is required`)}return u(x),Object.keys(x).length===0},[c]),j=async x=>{if(x.preventDefault(),y(null),!!C())try{await a(c)}catch(g){y(g instanceof Error?g.message:"An error occurred")}},S=x=>s.fields.find(g=>g.name===x),M=x=>{const g=S(x);if(!g||r==="edit"&&g.immutable)return null;const N=c[x],O=f[x];switch(x){case"methods":return t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HTTP Methods"}),t.jsx(Ca,{value:N,onChange:P=>p(x,P),disabled:o,error:O}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:g.description})]},x);case"headers":return t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Header Conditions"}),t.jsx(ka,{value:N,onChange:P=>p(x,P),disabled:o,error:O}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:g.description})]},x);case"request_transform":return t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Request Transform"}),t.jsx(cs,{value:N,onChange:P=>p(x,P),disabled:o,error:O,type:"request"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:g.description})]},x);case"response_transform":return t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response Transform"}),t.jsx(cs,{value:N,onChange:P=>p(x,P),disabled:o,error:O,type:"response"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:g.description})]},x);default:return t.jsx(Ks,{field:g,module:s,value:N,onChange:P=>p(x,P),error:O,disabled:o},x)}};return t.jsxs("form",{onSubmit:j,className:"space-y-4",children:[Object.entries(ds).map(([x,g])=>{const N=l.has(x),O=g.fields.some(P=>f[P]);return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[t.jsxs("button",{type:"button",onClick:()=>m(x),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${N?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:g.title}),t.jsx("p",{className:"text-xs text-gray-500",children:g.description})]})]}),O&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:"Has errors"})]}),N&&t.jsx("div",{className:"px-4 py-4 border-t border-gray-200",children:g.fields.map(P=>M(P))})]},x)}),v&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"text-sm text-red-700",children:v})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",children:[n&&t.jsx("button",{type:"button",onClick:n,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 flex items-center gap-2",children:[o&&t.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r==="create"?"Create Route":"Save Changes"]})]})]})}function Ma(s){return s.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Pa({userId:s,userEmail:e,onClose:r,onSuccess:a}){const[n,o]=b.useState(""),[l,d]=b.useState(""),[c,h]=b.useState(""),f=it(),u=et({mutationFn:()=>Hs("users","set_password",s,{password:n}),onSuccess:()=>{f.invalidateQueries({queryKey:["records","user"]}),a==null||a(),r()},onError:y=>{h(y instanceof Error?y.message:"Failed to set password")}}),v=y=>{if(y.preventDefault(),h(""),!n){h("Password is required");return}if(n.length<8){h("Password must be at least 8 characters");return}if(n!==l){h("Passwords do not match");return}u.mutate()};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Set Password"}),t.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Set a new password for ",t.jsx("strong",{children:e})]}),t.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:t.jsx("p",{className:"text-sm text-red-700",children:c})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),t.jsx("input",{id:"password",type:"password",value:n,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter new password",autoComplete:"new-password",minLength:8}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 8 characters"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),t.jsx("input",{id:"confirmPassword",type:"password",value:l,onChange:y=>d(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Confirm new password",autoComplete:"new-password"})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:u.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:u.isPending?"Setting...":"Set Password"})]})]})]})})}function La(){var M,x,g;const{module:s,id:e}=Cs(),r=_t(),a=it(),n=e==="new",[o,l]=b.useState(null),[d,c]=b.useState(!1),{data:h,isLoading:f}=ee({queryKey:["schema",s],queryFn:()=>Us(s),enabled:!!s}),{data:u,isLoading:v}=ee({queryKey:["record",s,e],queryFn:()=>Br(h.plural,e),enabled:!!s&&!!e&&!n&&!!h}),y=et({mutationFn:N=>Qr(h.plural,N),onSuccess:N=>{var O;a.invalidateQueries({queryKey:["records",s]}),(O=N.meta)!=null&&O.raw_key?l({rawKey:N.meta.raw_key,recordId:N.data.id}):r(`/${s}/${N.data.id}`)}}),m=et({mutationFn:N=>Wr(h.plural,e,N),onSuccess:()=>{a.invalidateQueries({queryKey:["records",s]}),a.invalidateQueries({queryKey:["record",s,e]})}}),p=async N=>{n?await y.mutateAsync(N):await m.mutateAsync(N)},C=()=>{r(`/${s}`)};if(f||!n&&v)return t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[t.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})});if(!h)return t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Module not found"}),t.jsxs("p",{className:"text-red-600",children:['The module "',s,'" does not exist.']})]});const j=s==="user",S=(M=u==null?void 0:u.data)==null?void 0:M.email;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("nav",{className:"flex items-center gap-2 text-sm",children:[t.jsx(z,{to:`/${s}`,className:"text-gray-500 hover:text-gray-700",children:J(h.plural)}),t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),t.jsx("span",{className:"text-gray-900 font-medium",children:n?"Create New":((x=u==null?void 0:u.data)==null?void 0:x.name)||((g=u==null?void 0:u.data)==null?void 0:g.email)||e})]}),j&&!n&&t.jsxs("button",{type:"button",onClick:()=>c(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Set Password"]})]}),s==="route"?t.jsx(Sa,{module:h,initialData:n?{}:(u==null?void 0:u.data)||{},mode:n?"create":"edit",onSubmit:p,onCancel:C,isLoading:y.isPending||m.isPending}):t.jsx(ba,{module:h,initialData:n?{}:(u==null?void 0:u.data)||{},mode:n?"create":"edit",onSubmit:p,onCancel:C,isLoading:y.isPending||m.isPending}),m.isSuccess&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.jsx("p",{className:"text-sm text-green-700",children:"Changes saved successfully!"})]})}),o&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"API Key Created"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Copy this key now. You won't be able to see it again!"})]})]}),t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your API Key"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"flex-1 bg-white border border-gray-300 rounded px-3 py-2 text-sm font-mono break-all select-all",children:o.rawKey}),t.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(o.rawKey)},className:"flex-shrink-0 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm font-medium text-gray-700 transition-colors",children:"Copy"})]})]}),t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsxs("p",{className:"text-sm text-amber-800",children:[t.jsx("strong",{children:"Important:"})," This is the only time you'll see this key. Store it securely."]})]})}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>{l(null),r(`/${s}/${o.recordId}`)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"I've saved my key"})})]})}),d&&j&&e&&t.jsx(Pa,{userId:e,userEmail:S||"Unknown user",onClose:()=>c(!1),onSuccess:()=>{}})]})}async function Oa(s){const e=new URLSearchParams;s!=null&&s.period&&e.set("period",s.period),s!=null&&s.user_id&&e.set("user_id",s.user_id),s!=null&&s.start_date&&e.set("start_date",s.start_date),s!=null&&s.end_date&&e.set("end_date",s.end_date);const r=`/admin/usage${e.toString()?`?${e}`:""}`,a=await fetch(r,{credentials:"include"});if(!a.ok){const n=await a.json().catch(()=>({error:a.statusText}));throw new Error(n.error||"Failed to fetch usage")}return a.json()}function us(s){if(s===0)return"0 B";const e=1024,r=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(s)/Math.log(e));return`${parseFloat((s/Math.pow(e,a)).toFixed(2))} ${r[a]}`}function Xe(s){return s.toLocaleString()}function Ea(){const[s,e]=b.useState("month"),{data:r,isLoading:a,error:n}=ee({queryKey:["usage",s],queryFn:()=>Oa({period:s})});return a?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[t.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading analytics..."]})}):n?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Failed to load analytics"}),t.jsx("p",{className:"text-red-600 mt-1",children:n instanceof Error?n.message:"Unknown error"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Usage Analytics"}),t.jsx("p",{className:"text-gray-500",children:"Monitor API usage and activity"})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(Ra,{value:s,onChange:e})})]}),r&&t.jsx(Fa,{data:r}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(r==null?void 0:r.by_user)&&r.by_user.length>0&&t.jsx(Aa,{users:r.by_user}),(r==null?void 0:r.by_plan)&&r.by_plan.length>0&&t.jsx(Ta,{plans:r.by_plan})]}),r&&(!r.by_user||r.by_user.length===0)&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No usage data"}),t.jsx("p",{className:"text-gray-500",children:"Usage data will appear here once API requests are made."})]})]})}function Ra({value:s,onChange:e}){const r=[{value:"day",label:"Last 24 Hours"},{value:"week",label:"Last 7 Days"},{value:"month",label:"Last 30 Days"}];return t.jsx("div",{className:"flex rounded-lg border border-gray-200 bg-white p-1",children:r.map(a=>t.jsx("button",{onClick:()=>e(a.value),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${s===a.value?"bg-primary-100 text-primary-700":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.value))})}function Fa({data:s}){const e=[{label:"Total Requests",value:Xe(s.summary.total_requests),icon:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),color:"text-primary-600 bg-primary-100"},{label:"Active Users",value:Xe(s.summary.total_users),icon:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),color:"text-green-600 bg-green-100"},{label:"API Keys",value:Xe(s.summary.total_keys),icon:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),color:"text-orange-600 bg-orange-100"}];return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.map(r=>t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-lg ${r.color}`,children:r.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:r.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.value})]})]})},r.label))})}function Aa({users:s}){const r=[...s].sort((a,n)=>n.requests-a.requests).slice(0,10);return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Users by Requests"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Requests"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Data In"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Data Out"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(a=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx(z,{to:`/users/${a.user_id}`,className:"text-primary-600 hover:underline",children:a.email}),t.jsx("p",{className:"text-xs text-gray-500",children:a.plan_id})]}),t.jsx("td",{className:"px-6 py-4 text-right font-medium",children:Xe(a.requests)}),t.jsx("td",{className:"px-6 py-4 text-right text-gray-600",children:us(a.bytes_in)}),t.jsx("td",{className:"px-6 py-4 text-right text-gray-600",children:us(a.bytes_out)})]},a.user_id))})]})}),s.length>10&&t.jsx("div",{className:"px-6 py-3 border-t border-gray-200 bg-gray-50 text-center",children:t.jsxs("span",{className:"text-sm text-gray-500",children:["Showing top 10 of ",s.length," users"]})})]})}function Ta({plans:s}){const e=[...s].sort((a,n)=>n.requests-a.requests),r=e.reduce((a,n)=>a+n.requests,0);return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Usage by Plan"})}),t.jsx("div",{className:"p-6 space-y-4",children:e.map(a=>{const n=r>0?a.requests/r*100:0;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("div",{children:[t.jsx(z,{to:`/plans/${a.plan_id}`,className:"font-medium text-gray-900 hover:text-primary-600",children:a.plan_name}),t.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",a.user_count," users)"]})]}),t.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[Xe(a.requests)," requests"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${n}%`}})})]},a.plan_id)})})]})}function qa(){const[s,e]=b.useState(""),[r,a]=b.useState(""),[n,o]=b.useState(""),[l,d]=b.useState(!1),{login:c}=Je(),h=_t(),f=async u=>{u.preventDefault(),o(""),d(!0);try{await c(s,r),h("/")}catch(v){o(v instanceof Error?v.message:"Login failed")}finally{d(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-center text-3xl font-bold text-gray-900",children:"APIGate"}),t.jsx("h2",{className:"mt-6 text-center text-2xl font-semibold text-gray-900",children:"Sign in to your account"})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[n&&t.jsx("div",{className:"rounded-md bg-red-50 p-4",children:t.jsx("p",{className:"text-sm text-red-700",children:n})}),t.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:u=>e(u.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"you@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:u=>a(u.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Password"})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Signing in...":"Sign in"})}),t.jsx("div",{className:"text-center",children:t.jsxs("span",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",t.jsx(z,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})})]})]})})}function _a(){const[s,e]=b.useState(""),[r,a]=b.useState(""),[n,o]=b.useState(""),[l,d]=b.useState(""),[c,h]=b.useState(!1),{register:f}=Je(),u=_t(),v=async y=>{if(y.preventDefault(),d(""),r.length<8){d("Password must be at least 8 characters");return}h(!0);try{await f(s,r,n),u("/")}catch(m){d(m instanceof Error?m.message:"Registration failed")}finally{h(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-center text-3xl font-bold text-gray-900",children:"APIGate"}),t.jsx("h2",{className:"mt-6 text-center text-2xl font-semibold text-gray-900",children:"Create your account"})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[l&&t.jsx("div",{className:"rounded-md bg-red-50 p-4",children:t.jsx("p",{className:"text-sm text-red-700",children:l})}),t.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",value:n,onChange:y=>o(y.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Your name"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:y=>e(y.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"you@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:y=>a(y.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"At least 8 characters"})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:c?"Creating account...":"Create account"})}),t.jsx("div",{className:"text-center",children:t.jsxs("span",{className:"text-sm text-gray-600",children:["Already have an account?"," ",t.jsx(z,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})})]})]})})}function Ia(){const[s,e]=b.useState(""),[r,a]=b.useState(""),[n,o]=b.useState(""),[l,d]=b.useState(""),[c,h]=b.useState(""),[f,u]=b.useState(!1),{setup:v}=Je(),y=async m=>{if(m.preventDefault(),h(""),r.length<8){h("Password must be at least 8 characters");return}if(r!==n){h("Passwords do not match");return}u(!0);try{await v(s,r,l)}catch(p){h(p instanceof Error?p.message:"Setup failed")}finally{u(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-xl flex items-center justify-center",children:t.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),t.jsx("h1",{className:"mt-4 text-3xl font-bold text-gray-900",children:"Welcome to APIGate"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Let's set up your admin account to get started"})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[c&&t.jsx("div",{className:"rounded-md bg-red-50 p-4 border border-red-200",children:t.jsx("p",{className:"text-sm text-red-700",children:c})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Your Name"}),t.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",value:l,onChange:m=>d(m.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"John Doe"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:m=>e(m.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"admin@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:m=>a(m.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"At least 8 characters"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),t.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:m=>o(m.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"Confirm your password"})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors",children:f?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting up..."]}):"Complete Setup"})})]}),t.jsx("div",{className:"mt-6 border-t border-gray-200 pt-6",children:t.jsx("p",{className:"text-xs text-gray-500 text-center",children:"This will create your admin account. You can add more users later from the dashboard."})})]})})}function Qt(){return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}function Da({children:s}){const{isAuthenticated:e,isLoading:r,setupRequired:a}=Je();return r?t.jsx(Qt,{}):a?t.jsx(Re,{to:"/setup",replace:!0}):e?t.jsx(t.Fragment,{children:s}):t.jsx(Re,{to:"/login",replace:!0})}function hs({children:s}){const{isAuthenticated:e,isLoading:r,setupRequired:a}=Je();return r?t.jsx(Qt,{}):a?t.jsx(Re,{to:"/setup",replace:!0}):e?t.jsx(Re,{to:"/",replace:!0}):t.jsx(t.Fragment,{children:s})}function $a({children:s}){const{isLoading:e,setupRequired:r,isAuthenticated:a}=Je();return e?t.jsx(Qt,{}):r?t.jsx(t.Fragment,{children:s}):a?t.jsx(Re,{to:"/",replace:!0}):t.jsx(Re,{to:"/login",replace:!0})}function Ua(){return t.jsxs(Js,{children:[t.jsx(te,{path:"/setup",element:t.jsx($a,{children:t.jsx(Ia,{})})}),t.jsx(te,{path:"/login",element:t.jsx(hs,{children:t.jsx(qa,{})})}),t.jsx(te,{path:"/register",element:t.jsx(hs,{children:t.jsx(_a,{})})}),t.jsxs(te,{path:"/",element:t.jsx(Da,{children:t.jsx(na,{})}),children:[t.jsx(te,{index:!0,element:t.jsx(la,{})}),t.jsx(te,{path:"usage",element:t.jsx(Ea,{})}),t.jsx(te,{path:":module",element:t.jsx(xa,{})}),t.jsx(te,{path:":module/:id",element:t.jsx(La,{})})]}),t.jsx(te,{path:"*",element:t.jsx(Re,{to:"/",replace:!0})})]})}function Ha(){return t.jsx(Ur,{children:t.jsx(Dr,{children:t.jsx(Gs,{basename:"/mod/ui",children:t.jsx(Ua,{})})})})}const Ba=new Sr({defaultOptions:{queries:{staleTime:3e4,retry:1}}});jt.createRoot(document.getElementById("root")).render(t.jsx(qt.StrictMode,{children:t.jsx(Mr,{client:Ba,children:t.jsx(Ha,{})})}));

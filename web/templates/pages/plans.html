{{define "content"}}
<div class="page">
    <div class="page-header">
        <h1 class="page-title">Plans</h1>
        <a href="/plans/new" class="btn btn-primary">Create Plan</a>
    </div>

    <div class="card">
        <div class="card-body flush" id="plans-table" hx-get="/partials/plans" hx-trigger="load" hx-swap="innerHTML">
            <div class="table-empty">Loading plans...</div>
        </div>
    </div>
</div>
{{end}}

{{define "panel-docs"}}
<div class="panel-section">
    <h3>Plans</h3>
    <p>Plans define usage limits and pricing tiers for your API. Each user is assigned to one plan.</p>
</div>

<div class="panel-section">
    <h4>Plan Properties</h4>
    <ul class="panel-list">
        <li><strong>Rate Limit</strong> - Maximum requests per minute</li>
        <li><strong>Monthly Quota</strong> - Total requests allowed per month (0 = unlimited)</li>
        <li><strong>Price</strong> - Monthly subscription cost</li>
        <li><strong>Over Quota</strong> - What happens when quota is exceeded</li>
    </ul>
</div>

<div class="panel-section">
    <h4>Over Quota Behavior</h4>
    <ul class="panel-list">
        <li><strong>Blocked</strong> - Requests return 429 until next billing period</li>
        <li><strong>Overage Pricing</strong> - Allow continued usage at per-request rate (e.g., $0.001/request)</li>
    </ul>
</div>

<div class="panel-section">
    <h4>Typical Plan Structure</h4>
    <ul class="panel-list">
        <li><strong>Free</strong> - Low limits, blocked when exceeded</li>
        <li><strong>Starter</strong> - Moderate limits, blocked or low overage</li>
        <li><strong>Pro</strong> - Higher limits with overage pricing</li>
        <li><strong>Enterprise</strong> - Unlimited or custom limits</li>
    </ul>
</div>

<div class="panel-section">
    <h4>Default Plan</h4>
    <p>One plan can be marked as "default" - new users are automatically assigned to this plan when they sign up.</p>
</div>
{{end}}

{{define "panel-reference"}}
<div class="panel-section">
    <h3>Plans API</h3>
    <p>Manage plans programmatically.</p>
</div>

<div class="panel-section">
    <h4>Create Plan</h4>
    <pre class="panel-code">POST /mod/plan
Content-Type: application/json

{
  "id": "pro",
  "name": "Pro",
  "rate_limit": 600,
  "monthly_quota": 100000,
  "price_monthly": 29.99
}</pre>
</div>

<div class="panel-section">
    <h4>List Plans</h4>
    <pre class="panel-code">GET /mod/plan</pre>
</div>

<div class="panel-section">
    <h4>Update Plan</h4>
    <pre class="panel-code">PUT /mod/plan/{plan_id}</pre>
</div>
{{end}}

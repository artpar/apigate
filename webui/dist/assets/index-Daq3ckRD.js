var Tt=t=>{throw TypeError(t)};var ut=(t,e,s)=>e.has(t)||Tt("Cannot "+s);var i=(t,e,s)=>(ut(t,e,"read from private field"),s?s.call(t):e.get(t)),y=(t,e,s)=>e.has(t)?Tt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),m=(t,e,s,n)=>(ut(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),S=(t,e,s)=>(ut(t,e,"access private method"),s);var tt=(t,e,s,n)=>({set _(a){m(t,e,a,s)},get _(){return i(t,e,n)}});import{r as w,a as Ps,O as Rs,N as Dt,L as pe,R as Pt,u as os,b as Es,B as Ls,c as Fs,d as st}from"./vendor-BPCW4cx3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var cs={exports:{}},ct={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=w,Ds=Symbol.for("react.element"),Is=Symbol.for("react.fragment"),As=Object.prototype.hasOwnProperty,qs=Ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$s={key:!0,ref:!0,__self:!0,__source:!0};function ls(t,e,s){var n,a={},o=null,c=null;s!==void 0&&(o=""+s),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)As.call(e,n)&&!$s.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Ds,type:t,key:o,ref:c,props:a,_owner:qs.current}}ct.Fragment=Is;ct.jsx=ls;ct.jsxs=ls;cs.exports=ct;var r=cs.exports,dt={},It=Ps;dt.createRoot=It.createRoot,dt.hydrateRoot=It.hydrateRoot;var Ke=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qs={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ie,Ot,Jt,_s=(Jt=class{constructor(){y(this,ie,Qs);y(this,Ot,!1)}setTimeoutProvider(t){m(this,ie,t)}setTimeout(t,e){return i(this,ie).setTimeout(t,e)}clearTimeout(t){i(this,ie).clearTimeout(t)}setInterval(t,e){return i(this,ie).setInterval(t,e)}clearInterval(t){i(this,ie).clearInterval(t)}},ie=new WeakMap,Ot=new WeakMap,Jt),xe=new _s;function Us(t){setTimeout(t,0)}var Me=typeof window>"u"||"Deno"in globalThis;function $(){}function Bs(t,e){return typeof t=="function"?t(e):t}function mt(t){return typeof t=="number"&&t>=0&&t!==1/0}function us(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fe(t,e){return typeof t=="function"?t(e):t}function H(t,e){return typeof t=="function"?t(e):t}function At(t,e){const{type:s="all",exact:n,fetchStatus:a,predicate:o,queryKey:c,stale:l}=t;if(c){if(n){if(e.queryHash!==Rt(c,e.options))return!1}else if(!ze(e.queryKey,c))return!1}if(s!=="all"){const u=e.isActive();if(s==="active"&&!u||s==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||a&&a!==e.state.fetchStatus||o&&!o(e))}function qt(t,e){const{exact:s,status:n,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(s){if(Oe(e.options.mutationKey)!==Oe(o))return!1}else if(!ze(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function Rt(t,e){return((e==null?void 0:e.queryKeyHashFn)||Oe)(t)}function Oe(t){return JSON.stringify(t,(e,s)=>pt(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function ze(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>ze(t[s],e[s])):!1}var Hs=Object.prototype.hasOwnProperty;function hs(t,e){if(t===e)return t;const s=$t(t)&&$t(e);if(!s&&!(pt(t)&&pt(e)))return e;const a=(s?t:Object.keys(t)).length,o=s?e:Object.keys(e),c=o.length,l=s?new Array(c):{};let u=0;for(let p=0;p<c;p++){const g=s?p:o[p],h=t[g],f=e[g];if(h===f){l[g]=h,(s?p<a:Hs.call(t,g))&&u++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[g]=f;continue}const v=hs(h,f);l[g]=v,v===h&&u++}return a===c&&u===a?t:l}function at(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function $t(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function pt(t){if(!Qt(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Qt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Qt(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ks(t){return new Promise(e=>{xe.setTimeout(e,t)})}function ft(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?hs(t,e):e}function Ws(t,e,s=0){const n=[...t,e];return s&&n.length>s?n.slice(1):n}function zs(t,e,s=0){const n=[e,...t];return s&&n.length>s?n.slice(0,-1):n}var Et=Symbol();function ds(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Et?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function ms(t,e){return typeof t=="function"?t(...e):!!t}function Vs(t,e,s){let n=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??(a=e()),n||(n=!0,a.aborted?s():a.addEventListener("abort",s,{once:!0})),a)}),t}var ge,ae,Fe,Yt,Gs=(Yt=class extends Ke{constructor(){super();y(this,ge);y(this,ae);y(this,Fe);m(this,Fe,e=>{if(!Me&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,ae)||this.setEventListener(i(this,Fe))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,ae))==null||e.call(this),m(this,ae,void 0))}setEventListener(e){var s;m(this,Fe,e),(s=i(this,ae))==null||s.call(this),m(this,ae,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){i(this,ge)!==e&&(m(this,ge,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof i(this,ge)=="boolean"?i(this,ge):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ge=new WeakMap,ae=new WeakMap,Fe=new WeakMap,Yt),Lt=new Gs;function xt(){let t,e;const s=new Promise((a,o)=>{t=a,e=o});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},s.reject=a=>{n({status:"rejected",reason:a}),e(a)},s}var Js=Us;function Ys(){let t=[],e=0,s=l=>{l()},n=l=>{l()},a=Js;const o=l=>{e?t.push(l):a(()=>{s(l)})},c=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(u=>{s(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||c()}return u},batchCalls:l=>(...u)=>{o(()=>{l(...u)})},schedule:o,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var F=Ys(),Te,oe,De,Xt,Xs=(Xt=class extends Ke{constructor(){super();y(this,Te,!0);y(this,oe);y(this,De);m(this,De,e=>{if(!Me&&window.addEventListener){const s=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){i(this,oe)||this.setEventListener(i(this,De))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,oe))==null||e.call(this),m(this,oe,void 0))}setEventListener(e){var s;m(this,De,e),(s=i(this,oe))==null||s.call(this),m(this,oe,e(this.setOnline.bind(this)))}setOnline(e){i(this,Te)!==e&&(m(this,Te,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return i(this,Te)}},Te=new WeakMap,oe=new WeakMap,De=new WeakMap,Xt),ot=new Xs;function Zs(t){return Math.min(1e3*2**t,3e4)}function ps(t){return(t??"online")==="online"?ot.isOnline():!0}var yt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function fs(t){let e=!1,s=0,n;const a=xt(),o=()=>a.status!=="pending",c=x=>{var N;if(!o()){const j=new yt(x);f(j),(N=t.onCancel)==null||N.call(t,j)}},l=()=>{e=!0},u=()=>{e=!1},p=()=>Lt.isFocused()&&(t.networkMode==="always"||ot.isOnline())&&t.canRun(),g=()=>ps(t.networkMode)&&t.canRun(),h=x=>{o()||(n==null||n(),a.resolve(x))},f=x=>{o()||(n==null||n(),a.reject(x))},v=()=>new Promise(x=>{var N;n=j=>{(o()||p())&&x(j)},(N=t.onPause)==null||N.call(t)}).then(()=>{var x;n=void 0,o()||(x=t.onContinue)==null||x.call(t)}),d=()=>{if(o())return;let x;const N=s===0?t.initialPromise:void 0;try{x=N??t.fn()}catch(j){x=Promise.reject(j)}Promise.resolve(x).then(h).catch(j=>{var Q;if(o())return;const k=t.retry??(Me?0:3),C=t.retryDelay??Zs,b=typeof C=="function"?C(s,j):C,T=k===!0||typeof k=="number"&&s<k||typeof k=="function"&&k(s,j);if(e||!T){f(j);return}s++,(Q=t.onFail)==null||Q.call(t,s,j),Ks(b).then(()=>p()?void 0:v()).then(()=>{e?f(j):d()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:u,canStart:g,start:()=>(g()?d():v().then(d),a)}}var ve,Zt,xs=(Zt=class{constructor(){y(this,ve)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mt(this.gcTime)&&m(this,ve,xe.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Me?1/0:5*60*1e3))}clearGcTimeout(){i(this,ve)&&(xe.clearTimeout(i(this,ve)),m(this,ve,void 0))}},ve=new WeakMap,Zt),be,Ie,B,je,D,Ve,we,K,J,es,er=(es=class extends xs{constructor(e){super();y(this,K);y(this,be);y(this,Ie);y(this,B);y(this,je);y(this,D);y(this,Ve);y(this,we);m(this,we,!1),m(this,Ve,e.defaultOptions),this.setOptions(e.options),this.observers=[],m(this,je,e.client),m(this,B,i(this,je).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,m(this,be,Ut(this.options)),this.state=e.state??i(this,be),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=i(this,D))==null?void 0:e.promise}setOptions(e){if(this.options={...i(this,Ve),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Ut(this.options);s.data!==void 0&&(this.setState(_t(s.data,s.dataUpdatedAt)),m(this,be,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,B).remove(this)}setData(e,s){const n=ft(this.state.data,e,this.options);return S(this,K,J).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(e,s){S(this,K,J).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var n,a;const s=(n=i(this,D))==null?void 0:n.promise;return(a=i(this,D))==null||a.cancel(e),s?s.then($).catch($):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,be))}isActive(){return this.observers.some(e=>H(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Et||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>fe(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!us(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,D))==null||s.continue()}onOnline(){var s;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,D))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),i(this,B).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(i(this,D)&&(i(this,we)?i(this,D).cancel({revert:!0}):i(this,D).cancelRetry()),this.scheduleGc()),i(this,B).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||S(this,K,J).call(this,{type:"invalidate"})}async fetch(e,s){var u,p,g,h,f,v,d,x,N,j,k,C;if(this.state.fetchStatus!=="idle"&&((u=i(this,D))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(i(this,D))return i(this,D).continueRetry(),i(this,D).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(T=>T.options.queryFn);b&&this.setOptions(b.options)}const n=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(m(this,we,!0),n.signal)})},o=()=>{const b=ds(this.options,s),Q=(()=>{const se={client:i(this,je),queryKey:this.queryKey,meta:this.meta};return a(se),se})();return m(this,we,!1),this.options.persister?this.options.persister(b,Q,this):b(Q)},l=(()=>{const b={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:i(this,je),state:this.state,fetchFn:o};return a(b),b})();(p=this.options.behavior)==null||p.onFetch(l,this),m(this,Ie,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=l.fetchOptions)==null?void 0:g.meta))&&S(this,K,J).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),m(this,D,fs({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:b=>{b instanceof yt&&b.revert&&this.setState({...i(this,Ie),fetchStatus:"idle"}),n.abort()},onFail:(b,T)=>{S(this,K,J).call(this,{type:"failed",failureCount:b,error:T})},onPause:()=>{S(this,K,J).call(this,{type:"pause"})},onContinue:()=>{S(this,K,J).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const b=await i(this,D).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(v=(f=i(this,B).config).onSuccess)==null||v.call(f,b,this),(x=(d=i(this,B).config).onSettled)==null||x.call(d,b,this.state.error,this),b}catch(b){if(b instanceof yt){if(b.silent)return i(this,D).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw S(this,K,J).call(this,{type:"error",error:b}),(j=(N=i(this,B).config).onError)==null||j.call(N,b,this),(C=(k=i(this,B).config).onSettled)==null||C.call(k,this.state.data,b,this),b}finally{this.scheduleGc()}}},be=new WeakMap,Ie=new WeakMap,B=new WeakMap,je=new WeakMap,D=new WeakMap,Ve=new WeakMap,we=new WeakMap,K=new WeakSet,J=function(e){const s=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ys(n.data,this.options),fetchMeta:e.meta??null};case"success":const a={...n,..._t(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return m(this,Ie,e.manual?a:void 0),a;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=s(this.state),F.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),i(this,B).notify({query:this,type:"updated",action:e})})},es);function ys(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ps(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function _t(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ut(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var _,M,Ge,A,Ne,Ae,Y,ce,Je,qe,$e,Ce,Se,le,Qe,P,We,gt,vt,bt,jt,wt,Nt,Ct,gs,ts,tr=(ts=class extends Ke{constructor(e,s){super();y(this,P);y(this,_);y(this,M);y(this,Ge);y(this,A);y(this,Ne);y(this,Ae);y(this,Y);y(this,ce);y(this,Je);y(this,qe);y(this,$e);y(this,Ce);y(this,Se);y(this,le);y(this,Qe,new Set);this.options=s,m(this,_,e),m(this,ce,null),m(this,Y,xt()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,M).addObserver(this),Bt(i(this,M),this.options)?S(this,P,We).call(this):this.updateResult(),S(this,P,jt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return St(i(this,M),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return St(i(this,M),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,S(this,P,wt).call(this),S(this,P,Nt).call(this),i(this,M).removeObserver(this)}setOptions(e){const s=this.options,n=i(this,M);if(this.options=i(this,_).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof H(this.options.enabled,i(this,M))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");S(this,P,Ct).call(this),i(this,M).setOptions(this.options),s._defaulted&&!at(this.options,s)&&i(this,_).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,M),observer:this});const a=this.hasListeners();a&&Ht(i(this,M),n,this.options,s)&&S(this,P,We).call(this),this.updateResult(),a&&(i(this,M)!==n||H(this.options.enabled,i(this,M))!==H(s.enabled,i(this,M))||fe(this.options.staleTime,i(this,M))!==fe(s.staleTime,i(this,M)))&&S(this,P,gt).call(this);const o=S(this,P,vt).call(this);a&&(i(this,M)!==n||H(this.options.enabled,i(this,M))!==H(s.enabled,i(this,M))||o!==i(this,le))&&S(this,P,bt).call(this,o)}getOptimisticResult(e){const s=i(this,_).getQueryCache().build(i(this,_),e),n=this.createResult(s,e);return rr(this,n)&&(m(this,A,n),m(this,Ae,this.options),m(this,Ne,i(this,M).state)),n}getCurrentResult(){return i(this,A)}trackResult(e,s){return new Proxy(e,{get:(n,a)=>(this.trackProp(a),s==null||s(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&i(this,Y).status==="pending"&&i(this,Y).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(e){i(this,Qe).add(e)}getCurrentQuery(){return i(this,M)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,_).defaultQueryOptions(e),n=i(this,_).getQueryCache().build(i(this,_),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(e){return S(this,P,We).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,A)))}createResult(e,s){var re;const n=i(this,M),a=this.options,o=i(this,A),c=i(this,Ne),l=i(this,Ae),p=e!==n?e.state:i(this,Ge),{state:g}=e;let h={...g},f=!1,v;if(s._optimisticResults){const O=this.hasListeners(),L=!O&&Bt(e,s),Ee=O&&Ht(e,n,s,a);(L||Ee)&&(h={...h,...ys(g.data,e.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:d,errorUpdatedAt:x,status:N}=h;v=h.data;let j=!1;if(s.placeholderData!==void 0&&v===void 0&&N==="pending"){let O;o!=null&&o.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData)?(O=o.data,j=!0):O=typeof s.placeholderData=="function"?s.placeholderData((re=i(this,$e))==null?void 0:re.state.data,i(this,$e)):s.placeholderData,O!==void 0&&(N="success",v=ft(o==null?void 0:o.data,O,s),f=!0)}if(s.select&&v!==void 0&&!j)if(o&&v===(c==null?void 0:c.data)&&s.select===i(this,Je))v=i(this,qe);else try{m(this,Je,s.select),v=s.select(v),v=ft(o==null?void 0:o.data,v,s),m(this,qe,v),m(this,ce,null)}catch(O){m(this,ce,O)}i(this,ce)&&(d=i(this,ce),v=i(this,qe),x=Date.now(),N="error");const k=h.fetchStatus==="fetching",C=N==="pending",b=N==="error",T=C&&k,Q=v!==void 0,I={status:N,fetchStatus:h.fetchStatus,isPending:C,isSuccess:N==="success",isError:b,isInitialLoading:T,isLoading:T,data:v,dataUpdatedAt:h.dataUpdatedAt,error:d,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>p.dataUpdateCount||h.errorUpdateCount>p.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:b&&!Q,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&Q,isStale:Ft(e,s),refetch:this.refetch,promise:i(this,Y),isEnabled:H(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=et=>{I.status==="error"?et.reject(I.error):I.data!==void 0&&et.resolve(I.data)},L=()=>{const et=m(this,Y,I.promise=xt());O(et)},Ee=i(this,Y);switch(Ee.status){case"pending":e.queryHash===n.queryHash&&O(Ee);break;case"fulfilled":(I.status==="error"||I.data!==Ee.value)&&L();break;case"rejected":(I.status!=="error"||I.error!==Ee.reason)&&L();break}}return I}updateResult(){const e=i(this,A),s=this.createResult(i(this,M),this.options);if(m(this,Ne,i(this,M).state),m(this,Ae,this.options),i(this,Ne).data!==void 0&&m(this,$e,i(this,M)),at(s,e))return;m(this,A,s);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!i(this,Qe).size)return!0;const c=new Set(o??i(this,Qe));return this.options.throwOnError&&c.add("error"),Object.keys(i(this,A)).some(l=>{const u=l;return i(this,A)[u]!==e[u]&&c.has(u)})};S(this,P,gs).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&S(this,P,jt).call(this)}},_=new WeakMap,M=new WeakMap,Ge=new WeakMap,A=new WeakMap,Ne=new WeakMap,Ae=new WeakMap,Y=new WeakMap,ce=new WeakMap,Je=new WeakMap,qe=new WeakMap,$e=new WeakMap,Ce=new WeakMap,Se=new WeakMap,le=new WeakMap,Qe=new WeakMap,P=new WeakSet,We=function(e){S(this,P,Ct).call(this);let s=i(this,M).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch($)),s},gt=function(){S(this,P,wt).call(this);const e=fe(this.options.staleTime,i(this,M));if(Me||i(this,A).isStale||!mt(e))return;const n=us(i(this,A).dataUpdatedAt,e)+1;m(this,Ce,xe.setTimeout(()=>{i(this,A).isStale||this.updateResult()},n))},vt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,M)):this.options.refetchInterval)??!1},bt=function(e){S(this,P,Nt).call(this),m(this,le,e),!(Me||H(this.options.enabled,i(this,M))===!1||!mt(i(this,le))||i(this,le)===0)&&m(this,Se,xe.setInterval(()=>{(this.options.refetchIntervalInBackground||Lt.isFocused())&&S(this,P,We).call(this)},i(this,le)))},jt=function(){S(this,P,gt).call(this),S(this,P,bt).call(this,S(this,P,vt).call(this))},wt=function(){i(this,Ce)&&(xe.clearTimeout(i(this,Ce)),m(this,Ce,void 0))},Nt=function(){i(this,Se)&&(xe.clearInterval(i(this,Se)),m(this,Se,void 0))},Ct=function(){const e=i(this,_).getQueryCache().build(i(this,_),this.options);if(e===i(this,M))return;const s=i(this,M);m(this,M,e),m(this,Ge,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},gs=function(e){F.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,A))}),i(this,_).getQueryCache().notify({query:i(this,M),type:"observerResultsUpdated"})})},ts);function sr(t,e){return H(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Bt(t,e){return sr(t,e)||t.state.data!==void 0&&St(t,e,e.refetchOnMount)}function St(t,e,s){if(H(e.enabled,t)!==!1&&fe(e.staleTime,t)!=="static"){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&Ft(t,e)}return!1}function Ht(t,e,s,n){return(t!==e||H(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Ft(t,s)}function Ft(t,e){return H(e.enabled,t)!==!1&&t.isStaleByTime(fe(e.staleTime,t))}function rr(t,e){return!at(t.getCurrentResult(),e)}function Kt(t){return{onFetch:(e,s)=>{var g,h,f,v,d;const n=e.options,a=(f=(h=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,o=((v=e.state.data)==null?void 0:v.pages)||[],c=((d=e.state.data)==null?void 0:d.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const p=async()=>{let x=!1;const N=C=>{Vs(C,()=>e.signal,()=>x=!0)},j=ds(e.options,e.fetchOptions),k=async(C,b,T)=>{if(x)return Promise.reject();if(b==null&&C.pages.length)return Promise.resolve(C);const se=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:b,direction:T?"backward":"forward",meta:e.options.meta};return N(L),L})(),I=await j(se),{maxPages:re}=e.options,O=T?zs:Ws;return{pages:O(C.pages,I,re),pageParams:O(C.pageParams,b,re)}};if(a&&o.length){const C=a==="backward",b=C?nr:Wt,T={pages:o,pageParams:c},Q=b(n,T);l=await k(T,Q,C)}else{const C=t??o.length;do{const b=u===0?c[0]??n.initialPageParam:Wt(n,l);if(u>0&&b==null)break;l=await k(l,b),u++}while(u<C)}return l};e.options.persister?e.fetchFn=()=>{var x,N;return(N=(x=e.options).persister)==null?void 0:N.call(x,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=p}}}function Wt(t,{pages:e,pageParams:s}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,s[n],s):void 0}function nr(t,{pages:e,pageParams:s}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,s[0],s):void 0}var Ye,z,q,ke,V,ne,ss,ir=(ss=class extends xs{constructor(e){super();y(this,V);y(this,Ye);y(this,z);y(this,q);y(this,ke);m(this,Ye,e.client),this.mutationId=e.mutationId,m(this,q,e.mutationCache),m(this,z,[]),this.state=e.state||vs(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,z).includes(e)||(i(this,z).push(e),this.clearGcTimeout(),i(this,q).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){m(this,z,i(this,z).filter(s=>s!==e)),this.scheduleGc(),i(this,q).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,z).length||(this.state.status==="pending"?this.scheduleGc():i(this,q).remove(this))}continue(){var e;return((e=i(this,ke))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var c,l,u,p,g,h,f,v,d,x,N,j,k,C,b,T,Q,se,I,re;const s=()=>{S(this,V,ne).call(this,{type:"continue"})},n={client:i(this,Ye),meta:this.options.meta,mutationKey:this.options.mutationKey};m(this,ke,fs({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(O,L)=>{S(this,V,ne).call(this,{type:"failed",failureCount:O,error:L})},onPause:()=>{S(this,V,ne).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,q).canRun(this)}));const a=this.state.status==="pending",o=!i(this,ke).canStart();try{if(a)s();else{S(this,V,ne).call(this,{type:"pending",variables:e,isPaused:o}),await((l=(c=i(this,q).config).onMutate)==null?void 0:l.call(c,e,this,n));const L=await((p=(u=this.options).onMutate)==null?void 0:p.call(u,e,n));L!==this.state.context&&S(this,V,ne).call(this,{type:"pending",context:L,variables:e,isPaused:o})}const O=await i(this,ke).start();return await((h=(g=i(this,q).config).onSuccess)==null?void 0:h.call(g,O,e,this.state.context,this,n)),await((v=(f=this.options).onSuccess)==null?void 0:v.call(f,O,e,this.state.context,n)),await((x=(d=i(this,q).config).onSettled)==null?void 0:x.call(d,O,null,this.state.variables,this.state.context,this,n)),await((j=(N=this.options).onSettled)==null?void 0:j.call(N,O,null,e,this.state.context,n)),S(this,V,ne).call(this,{type:"success",data:O}),O}catch(O){try{await((C=(k=i(this,q).config).onError)==null?void 0:C.call(k,O,e,this.state.context,this,n))}catch(L){Promise.reject(L)}try{await((T=(b=this.options).onError)==null?void 0:T.call(b,O,e,this.state.context,n))}catch(L){Promise.reject(L)}try{await((se=(Q=i(this,q).config).onSettled)==null?void 0:se.call(Q,void 0,O,this.state.variables,this.state.context,this,n))}catch(L){Promise.reject(L)}try{await((re=(I=this.options).onSettled)==null?void 0:re.call(I,void 0,O,e,this.state.context,n))}catch(L){Promise.reject(L)}throw S(this,V,ne).call(this,{type:"error",error:O}),O}finally{i(this,q).runNext(this)}}},Ye=new WeakMap,z=new WeakMap,q=new WeakMap,ke=new WeakMap,V=new WeakSet,ne=function(e){const s=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),F.batch(()=>{i(this,z).forEach(n=>{n.onMutationUpdate(e)}),i(this,q).notify({mutation:this,type:"updated",action:e})})},ss);function vs(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var X,W,Xe,rs,ar=(rs=class extends Ke{constructor(e={}){super();y(this,X);y(this,W);y(this,Xe);this.config=e,m(this,X,new Set),m(this,W,new Map),m(this,Xe,0)}build(e,s,n){const a=new ir({client:e,mutationCache:this,mutationId:++tt(this,Xe)._,options:e.defaultMutationOptions(s),state:n});return this.add(a),a}add(e){i(this,X).add(e);const s=rt(e);if(typeof s=="string"){const n=i(this,W).get(s);n?n.push(e):i(this,W).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,X).delete(e)){const s=rt(e);if(typeof s=="string"){const n=i(this,W).get(s);if(n)if(n.length>1){const a=n.indexOf(e);a!==-1&&n.splice(a,1)}else n[0]===e&&i(this,W).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=rt(e);if(typeof s=="string"){const n=i(this,W).get(s),a=n==null?void 0:n.find(o=>o.state.status==="pending");return!a||a===e}else return!0}runNext(e){var n;const s=rt(e);if(typeof s=="string"){const a=(n=i(this,W).get(s))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){F.batch(()=>{i(this,X).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,X).clear(),i(this,W).clear()})}getAll(){return Array.from(i(this,X))}find(e){const s={exact:!0,...e};return this.getAll().find(n=>qt(s,n))}findAll(e={}){return this.getAll().filter(s=>qt(e,s))}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return F.batch(()=>Promise.all(e.map(s=>s.continue().catch($))))}},X=new WeakMap,W=new WeakMap,Xe=new WeakMap,rs);function rt(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Z,ue,U,ee,te,it,kt,ns,or=(ns=class extends Ke{constructor(s,n){super();y(this,te);y(this,Z);y(this,ue);y(this,U);y(this,ee);m(this,Z,s),this.setOptions(n),this.bindMethods(),S(this,te,it).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var a;const n=this.options;this.options=i(this,Z).defaultMutationOptions(s),at(this.options,n)||i(this,Z).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,U),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Oe(n.mutationKey)!==Oe(this.options.mutationKey)?this.reset():((a=i(this,U))==null?void 0:a.state.status)==="pending"&&i(this,U).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=i(this,U))==null||s.removeObserver(this)}onMutationUpdate(s){S(this,te,it).call(this),S(this,te,kt).call(this,s)}getCurrentResult(){return i(this,ue)}reset(){var s;(s=i(this,U))==null||s.removeObserver(this),m(this,U,void 0),S(this,te,it).call(this),S(this,te,kt).call(this)}mutate(s,n){var a;return m(this,ee,n),(a=i(this,U))==null||a.removeObserver(this),m(this,U,i(this,Z).getMutationCache().build(i(this,Z),this.options)),i(this,U).addObserver(this),i(this,U).execute(s)}},Z=new WeakMap,ue=new WeakMap,U=new WeakMap,ee=new WeakMap,te=new WeakSet,it=function(){var n;const s=((n=i(this,U))==null?void 0:n.state)??vs();m(this,ue,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},kt=function(s){F.batch(()=>{var n,a,o,c,l,u,p,g;if(i(this,ee)&&this.hasListeners()){const h=i(this,ue).variables,f=i(this,ue).context,v={client:i(this,Z),meta:this.options.meta,mutationKey:this.options.mutationKey};if((s==null?void 0:s.type)==="success"){try{(a=(n=i(this,ee)).onSuccess)==null||a.call(n,s.data,h,f,v)}catch(d){Promise.reject(d)}try{(c=(o=i(this,ee)).onSettled)==null||c.call(o,s.data,null,h,f,v)}catch(d){Promise.reject(d)}}else if((s==null?void 0:s.type)==="error"){try{(u=(l=i(this,ee)).onError)==null||u.call(l,s.error,h,f,v)}catch(d){Promise.reject(d)}try{(g=(p=i(this,ee)).onSettled)==null||g.call(p,void 0,s.error,h,f,v)}catch(d){Promise.reject(d)}}}this.listeners.forEach(h=>{h(i(this,ue))})})},ns),G,is,cr=(is=class extends Ke{constructor(e={}){super();y(this,G);this.config=e,m(this,G,new Map)}build(e,s,n){const a=s.queryKey,o=s.queryHash??Rt(a,s);let c=this.get(o);return c||(c=new er({client:e,queryKey:a,queryHash:o,options:e.defaultQueryOptions(s),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(c)),c}add(e){i(this,G).has(e.queryHash)||(i(this,G).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,G).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,G).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){F.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,G).get(e)}getAll(){return[...i(this,G).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(n=>At(s,n))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(n=>At(e,n)):s}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){F.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){F.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},G=new WeakMap,is),E,he,de,_e,Ue,me,Be,He,as,lr=(as=class{constructor(t={}){y(this,E);y(this,he);y(this,de);y(this,_e);y(this,Ue);y(this,me);y(this,Be);y(this,He);m(this,E,t.queryCache||new cr),m(this,he,t.mutationCache||new ar),m(this,de,t.defaultOptions||{}),m(this,_e,new Map),m(this,Ue,new Map),m(this,me,0)}mount(){tt(this,me)._++,i(this,me)===1&&(m(this,Be,Lt.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,E).onFocus())})),m(this,He,ot.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,E).onOnline())})))}unmount(){var t,e;tt(this,me)._--,i(this,me)===0&&((t=i(this,Be))==null||t.call(this),m(this,Be,void 0),(e=i(this,He))==null||e.call(this),m(this,He,void 0))}isFetching(t){return i(this,E).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,he).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,E).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=i(this,E).build(this,e),n=s.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(fe(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return i(this,E).findAll(t).map(({queryKey:e,state:s})=>{const n=s.data;return[e,n]})}setQueryData(t,e,s){const n=this.defaultQueryOptions({queryKey:t}),a=i(this,E).get(n.queryHash),o=a==null?void 0:a.state.data,c=Bs(e,o);if(c!==void 0)return i(this,E).build(this,n).setData(c,{...s,manual:!0})}setQueriesData(t,e,s){return F.batch(()=>i(this,E).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,E).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,E);F.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,E);return F.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},n=F.batch(()=>i(this,E).findAll(t).map(a=>a.cancel(s)));return Promise.all(n).then($).catch($)}invalidateQueries(t,e={}){return F.batch(()=>(i(this,E).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},n=F.batch(()=>i(this,E).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,s);return s.throwOnError||(o=o.catch($)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then($)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,E).build(this,e);return s.isStaleByTime(fe(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then($).catch($)}fetchInfiniteQuery(t){return t.behavior=Kt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then($).catch($)}ensureInfiniteQueryData(t){return t.behavior=Kt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ot.isOnline()?i(this,he).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,E)}getMutationCache(){return i(this,he)}getDefaultOptions(){return i(this,de)}setDefaultOptions(t){m(this,de,t)}setQueryDefaults(t,e){i(this,_e).set(Oe(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,_e).values()],s={};return e.forEach(n=>{ze(t,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(t,e){i(this,Ue).set(Oe(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,Ue).values()],s={};return e.forEach(n=>{ze(t,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,de).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Rt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Et&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,de).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,E).clear(),i(this,he).clear()}},E=new WeakMap,he=new WeakMap,de=new WeakMap,_e=new WeakMap,Ue=new WeakMap,me=new WeakMap,Be=new WeakMap,He=new WeakMap,as),bs=w.createContext(void 0),lt=t=>{const e=w.useContext(bs);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ur=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(bs.Provider,{value:t,children:e})),js=w.createContext(!1),hr=()=>w.useContext(js);js.Provider;function dr(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var mr=w.createContext(dr()),pr=()=>w.useContext(mr),fr=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},xr=t=>{w.useEffect(()=>{t.clearReset()},[t])},yr=({result:t,errorResetBoundary:e,throwOnError:s,query:n,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||ms(s,[t.error,n])),gr=t=>{if(t.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>s(n(...a)):s(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},vr=(t,e)=>t.isLoading&&t.isFetching&&!e,br=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,zt=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function jr(t,e,s){var h,f,v,d,x;const n=hr(),a=pr(),o=lt(),c=o.defaultQueryOptions(t);(f=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,c),c._optimisticResults=n?"isRestoring":"optimistic",gr(c),fr(c,a),xr(a);const l=!o.getQueryCache().get(c.queryHash),[u]=w.useState(()=>new e(o,c)),p=u.getOptimisticResult(c),g=!n&&t.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(N=>{const j=g?u.subscribe(F.batchCalls(N)):$;return u.updateResult(),j},[u,g]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),w.useEffect(()=>{u.setOptions(c)},[c,u]),br(c,p))throw zt(c,u,a);if(yr({result:p,errorResetBoundary:a,throwOnError:c.throwOnError,query:o.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw p.error;if((d=(v=o.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||d.call(v,c,p),c.experimental_prefetchInRender&&!Me&&vr(p,n)){const N=l?zt(c,u,a):(x=o.getQueryCache().get(c.queryHash))==null?void 0:x.promise;N==null||N.catch($).finally(()=>{u.updateResult()})}return c.notifyOnChangeProps?p:u.trackResult(p)}function Pe(t,e){return jr(t,tr)}function Mt(t,e){const s=lt(),[n]=w.useState(()=>new or(s,t));w.useEffect(()=>{n.setOptions(t)},[n,t]);const a=w.useSyncExternalStore(w.useCallback(c=>n.subscribe(F.batchCalls(c)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=w.useCallback((c,l)=>{n.mutate(c,l).catch($)},[n]);if(a.error&&ms(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}const ws=w.createContext(null);function wr({children:t}){const[e,s]=w.useState({type:"none"}),[n,a]=w.useState(!0),o=w.useCallback(f=>{s({type:"module",module:f})},[]),c=w.useCallback((f,v)=>{s({type:"field",field:f,module:v})},[]),l=w.useCallback((f,v)=>{s({type:"action",action:f,module:v})},[]),u=w.useCallback(()=>{s({type:"none"})},[]),p=w.useCallback(()=>{a(f=>!f)},[]),g=w.useCallback(f=>{a(f)},[]),h=w.useMemo(()=>({focus:e,focusModule:o,focusField:c,focusAction:l,clearFocus:u,isExpanded:n,toggleExpanded:p,setExpanded:g}),[e,o,c,l,u,n,p,g]);return r.jsx(ws.Provider,{value:h,children:t})}function Ze(){const t=w.useContext(ws);if(!t)throw new Error("useDocumentation must be used within a DocumentationProvider");return t}function Nr(t,e){const{focusField:s,clearFocus:n}=Ze();return w.useMemo(()=>({onFocus:()=>s(t,e),onMouseEnter:()=>s(t,e),onBlur:n,onMouseLeave:n}),[t,e,s,n])}const Re="/mod",Vt=new Map,Cr=5*60*1e3;async function Ns(){const t=await fetch(`${Re}/_schema`);if(!t.ok)throw new Error(`Failed to fetch modules: ${t.statusText}`);return((await t.json()).modules||[]).map(s=>({module:s.name,plural:s.plural,description:s.description||""}))}async function Cs(t){const e=Vt.get(t);if(e&&Date.now()-e.timestamp<Cr)return e.data;const s=await fetch(`${Re}/_schema/${t}`);if(!s.ok)throw new Error(`Failed to fetch schema for ${t}: ${s.statusText}`);const n=await s.json();return Vt.set(t,{data:n,timestamp:Date.now()}),n}async function Ss(t,e){const s=new URLSearchParams;e!=null&&e.limit&&s.set("limit",String(e.limit)),e!=null&&e.offset&&s.set("offset",String(e.offset));const n=`${Re}/${t}${s.toString()?`?${s}`:""}`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch ${t}: ${a.statusText}`);return a.json()}async function Sr(t,e){const s=await fetch(`${Re}/${t}/${encodeURIComponent(e)}`);if(!s.ok)throw s.status===404?new Error(`Record not found: ${e}`):new Error(`Failed to fetch record: ${s.statusText}`);return s.json()}async function kr(t,e){const s=await fetch(`${Re}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const n=await s.json().catch(()=>({error:s.statusText}));throw new Error(n.error||"Failed to create record")}return s.json()}async function Mr(t,e,s){const n=await fetch(`${Re}/${t}/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.json().catch(()=>({error:n.statusText}));throw new Error(a.error||"Failed to update record")}return n.json()}async function Or(t,e){const s=await fetch(`${Re}/${t}/${encodeURIComponent(e)}`,{method:"DELETE"});if(!s.ok){const n=await s.json().catch(()=>({error:s.statusText}));throw new Error(n.error||"Failed to delete record")}}function ks(t,e,s){const n="http://localhost:8080";let a=t.http.path.replace("{module}",e.plural).replace("{id}","<id>"),o=`curl -X ${t.http.method} "${n}${a}"`;return o+=` \\
  -H "Content-Type: application/json"`,t.auth&&t.auth!=="none"&&(o+=` \\
  -H "X-API-Key: <your-api-key>"`),["POST","PUT","PATCH"].includes(t.http.method)&&s&&(o+=` \\
  -d '${JSON.stringify(s,null,2)}'`),o}function ye(t,e="create"){const s={};for(const n of t.fields)n.internal||n.computed||e==="update"&&n.immutable||(s[n.name]=Pr(n));return s}function Pr(t){var e;if(t.default!==void 0)return t.default;switch(t.type){case"string":case"text":return`sample_${t.name}`;case"int":return 100;case"float":return 99.99;case"bool":return!0;case"email":return"user@example.com";case"url":return"https://example.com";case"uuid":return"550e8400-e29b-41d4-a716-446655440000";case"datetime":return new Date().toISOString();case"date":return new Date().toISOString().split("T")[0];case"time":return"12:00:00";case"duration":return"1h30m";case"json":return{key:"value"};case"secret":return"********";case"enum":return((e=t.values)==null?void 0:e[0])??"option1";case"ref":return`${t.ref}_id_123`;case"bytes":return"<binary data>";default:return null}}function Rr(t){const e=[];for(const s of t.actions){const n=Er(s,t);n&&e.push(n)}return e}function Er(t,e){const s=t.type==="create"||t.type==="update"?ye(e,t.type):void 0,n=t.http.path.replace("{module}",e.plural).replace("{id}","user_123");return{title:`${t.type.charAt(0).toUpperCase()+t.type.slice(1)} ${e.module}`,description:t.description,method:t.http.method,path:n,curl:ks(t,e,s),requestBody:s?JSON.stringify(s,null,2):void 0,responseBody:Lr(t,e)}}function Lr(t,e){switch(t.type){case"list":return JSON.stringify({module:e.module,count:2,data:[ye(e),ye(e)]},null,2);case"get":case"create":case"update":return JSON.stringify({module:e.module,data:ye(e)},null,2);case"delete":return JSON.stringify({success:!0},null,2);default:return JSON.stringify({module:e.module,data:ye(e)},null,2)}}function Ms(t){var e;return t.type==="enum"&&((e=t.values)!=null&&e.length)?`enum(${t.values.join(" | ")})`:t.type==="ref"&&t.ref?`ref(${t.ref})`:t.type}function Fr(t){switch(t.type){case"min":return`Minimum value: ${t.value}`;case"max":return`Maximum value: ${t.value}`;case"min_length":return`Minimum length: ${t.value} characters`;case"max_length":return`Maximum length: ${t.value} characters`;case"pattern":return`Must match pattern: ${t.value}`;case"ref_exists":return"Referenced record must exist";default:return`${t.type}: ${t.value}`}}function Tr(t){const e=[];if(t.required&&e.push("Required field"),t.unique&&e.push("Must be unique"),t.immutable&&e.push("Cannot be changed after creation"),t.constraints)for(const s of t.constraints)e.push(Fr(s));switch(t.type){case"email":e.push("Must be a valid email address");break;case"url":e.push("Must be a valid URL");break;case"uuid":e.push("Must be a valid UUID");break}return e}const Dr=[{id:"spec",label:"Spec"},{id:"details",label:"Details"},{id:"api",label:"API"},{id:"examples",label:"Examples"}];function Ir(){const{focus:t,isExpanded:e,toggleExpanded:s}=Ze(),[n,a]=w.useState("spec");return e?r.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Documentation"}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Hide Documentation",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"flex border-b border-gray-200",children:Dr.map(o=>r.jsx("button",{onClick:()=>a(o.id),className:`flex-1 px-3 py-2 text-xs font-medium transition-colors ${n===o.id?"text-primary-600 border-b-2 border-primary-600 bg-primary-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:o.label},o.id))}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[t.type==="none"&&r.jsx(Ar,{}),t.type==="module"&&t.module&&r.jsx(qr,{module:t.module,tab:n}),t.type==="field"&&t.field&&t.module&&r.jsx($r,{field:t.field,module:t.module,tab:n}),t.type==="action"&&t.action&&t.module&&r.jsx(Qr,{action:t.action,module:t.module,tab:n})]})]}):r.jsx("button",{onClick:s,className:"fixed right-0 top-1/2 -translate-y-1/2 bg-primary-600 text-white p-2 rounded-l-lg shadow-lg hover:bg-primary-700 transition-colors",title:"Show Documentation",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}function Ar(){return r.jsxs("div",{className:"text-center text-gray-500 py-8",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-sm",children:"Hover over or focus on a field to see its documentation."})]})}function qr({module:t,tab:e}){const s=w.useMemo(()=>Rr(t),[t]);switch(e){case"spec":return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(R,{title:"Module",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.module}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Plural: ",t.plural]})]}),r.jsx(R,{title:"Fields",children:r.jsx("ul",{className:"space-y-1",children:t.fields.filter(n=>!n.internal).map(n=>r.jsxs("li",{className:"text-xs",children:[r.jsx("code",{className:"text-primary-600",children:n.name}),r.jsxs("span",{className:"text-gray-500",children:[" : ",Ms(n)]}),n.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]},n.name))})}),r.jsx(R,{title:"Lookups",children:r.jsxs("p",{className:"text-xs text-gray-600",children:["Records can be looked up by: ",t.lookups.join(", ")]})})]});case"details":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{title:"Description",children:r.jsx("p",{className:"text-sm text-gray-700",children:t.description||"No description available."})}),r.jsx(R,{title:"Actions",children:r.jsx("ul",{className:"space-y-2",children:t.actions.map(n=>r.jsxs("li",{className:"text-xs",children:[r.jsx("span",{className:"font-medium text-gray-900",children:n.name}),r.jsx("p",{className:"text-gray-500",children:n.description})]},n.name))})})]});case"api":return r.jsx("div",{className:"space-y-4",children:r.jsx(R,{title:"Endpoints",children:t.actions.map(n=>r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Os,{method:n.http.method}),r.jsx("code",{className:"text-xs text-gray-700",children:n.http.path.replace("{module}",t.plural)})]}),r.jsx("p",{className:"text-xs text-gray-500",children:n.description})]},n.name))})});case"examples":return r.jsx("div",{className:"space-y-4",children:s.slice(0,3).map((n,a)=>r.jsx(R,{title:n.title,children:r.jsx(Le,{code:n.curl})},a))});default:return null}}function $r({field:t,module:e,tab:s}){const n=w.useMemo(()=>Tr(t),[t]);switch(s){case"spec":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{title:"Field",children:r.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name})}),r.jsx(R,{title:"Type",children:r.jsx("code",{className:"text-sm text-primary-600",children:Ms(t)})}),t.values&&t.values.length>0&&r.jsx(R,{title:"Allowed Values",children:r.jsx("ul",{className:"space-y-1",children:t.values.map(a=>r.jsx("li",{className:"text-xs",children:r.jsx("code",{className:"bg-gray-100 px-1 rounded",children:a})},a))})}),r.jsx(R,{title:"Attributes",children:r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsxs("li",{children:["Required: ",r.jsx("span",{className:t.required?"text-red-600":"text-gray-500",children:t.required?"Yes":"No"})]}),t.unique&&r.jsxs("li",{children:["Unique: ",r.jsx("span",{className:"text-amber-600",children:"Yes"})]}),t.immutable&&r.jsxs("li",{children:["Immutable: ",r.jsx("span",{className:"text-amber-600",children:"Yes"})]}),t.computed&&r.jsxs("li",{children:["Computed: ",r.jsx("span",{className:"text-blue-600",children:"Yes (auto-generated)"})]})]})})]});case"details":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{title:"Description",children:r.jsx("p",{className:"text-sm text-gray-700",children:t.description||"No description available."})}),n.length>0&&r.jsx(R,{title:"Validation Rules",children:r.jsx("ul",{className:"space-y-1",children:n.map((a,o)=>r.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[r.jsx("span",{className:"text-primary-500 mt-0.5",children:"*"}),a]},o))})}),t.ref&&r.jsx(R,{title:"Reference",children:r.jsxs("p",{className:"text-xs text-gray-600",children:["References a record in the ",r.jsx("code",{className:"text-primary-600",children:t.ref})," module."]})})]});case"api":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{title:"JSON Path",children:r.jsxs("code",{className:"text-sm text-gray-700",children:["$.data.",t.name]})}),r.jsx(R,{title:"In Request Body",children:r.jsx(Le,{code:JSON.stringify({[t.name]:Gt(t)},null,2)})})]});case"examples":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{title:"Example Values",children:r.jsx(Le,{code:String(Gt(t))})}),t.type==="enum"&&t.values&&r.jsx(R,{title:"Valid Options",children:r.jsx("ul",{className:"space-y-1",children:t.values.map(a=>r.jsx("li",{className:"text-xs",children:r.jsx("code",{className:"bg-gray-100 px-2 py-0.5 rounded",children:a})},a))})})]});default:return null}}function Gt(t){var e;if(t.default!==void 0)return t.default;switch(t.type){case"string":return`sample_${t.name}`;case"int":return 100;case"float":return 99.99;case"bool":return!0;case"email":return"user@example.com";case"url":return"https://example.com";case"enum":return((e=t.values)==null?void 0:e[0])??"option1";case"ref":return`${t.ref}_id`;default:return null}}function Qr({action:t,module:e,tab:s}){const n=w.useMemo(()=>t.type==="create"||t.type==="update"?ye(e,t.type):void 0,[t,e]),a=w.useMemo(()=>ks(t,e,n),[t,e,n]);switch(s){case"spec":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{title:"Action",children:r.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name})}),r.jsx(R,{title:"Type",children:r.jsx("span",{className:"inline-block px-2 py-0.5 bg-primary-100 text-primary-700 text-xs rounded",children:t.type})}),r.jsx(R,{title:"HTTP",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Os,{method:t.http.method}),r.jsx("code",{className:"text-xs text-gray-700",children:t.http.path.replace("{module}",e.plural)})]})}),t.auth&&t.auth!=="none"&&r.jsx(R,{title:"Authentication",children:r.jsxs("p",{className:"text-xs text-gray-600",children:["Requires: ",t.auth]})}),t.confirm&&r.jsx(R,{title:"Confirmation",children:r.jsx("p",{className:"text-xs text-amber-600",children:"This action requires confirmation"})})]});case"details":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{title:"Description",children:r.jsx("p",{className:"text-sm text-gray-700",children:t.description})}),t.input.length>0&&r.jsx(R,{title:"Input Fields",children:r.jsx("ul",{className:"space-y-2",children:t.input.map(o=>r.jsxs("li",{className:"text-xs",children:[r.jsx("code",{className:"text-primary-600",children:o.name}),r.jsxs("span",{className:"text-gray-500",children:[" : ",o.type]}),o.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"}),o.description&&r.jsx("p",{className:"text-gray-500 mt-0.5",children:o.description})]},o.name))})})]});case"api":return r.jsx("div",{className:"space-y-4",children:r.jsx(R,{title:"Curl Command",children:r.jsx(Le,{code:a})})});case"examples":return r.jsxs("div",{className:"space-y-4",children:[n&&r.jsx(R,{title:"Request Body",children:r.jsx(Le,{code:JSON.stringify(n,null,2)})}),r.jsx(R,{title:"Response",children:r.jsx(Le,{code:JSON.stringify({module:e.module,data:t.type==="delete"?null:ye(e)},null,2)})})]});default:return null}}function R({title:t,children:e}){return r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:t}),e]})}function Os({method:t}){const e={GET:"bg-green-100 text-green-700",POST:"bg-blue-100 text-blue-700",PUT:"bg-amber-100 text-amber-700",PATCH:"bg-orange-100 text-orange-700",DELETE:"bg-red-100 text-red-700"};return r.jsx("span",{className:`inline-block px-1.5 py-0.5 text-xs font-mono font-medium rounded ${e[t]||"bg-gray-100 text-gray-700"}`,children:t})}function Le({code:t}){const[e,s]=w.useState(!1),n=()=>{navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3)};return r.jsxs("div",{className:"relative group",children:[r.jsx("pre",{className:"bg-gray-900 text-gray-100 text-xs p-3 rounded-lg overflow-x-auto",children:r.jsx("code",{children:t})}),r.jsx("button",{onClick:n,className:"absolute top-2 right-2 p-1 bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy to clipboard",children:e?r.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):r.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}function _r(){const{isExpanded:t}=Ze();return r.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[r.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("svg",{className:"w-8 h-8 text-primary-600",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"APIGate"}),r.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-0.5 rounded-full",children:"Admin"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("a",{href:"/mod/_schema",target:"_blank",className:"text-sm text-gray-500 hover:text-gray-700",children:"Schema API"}),r.jsx("a",{href:"/swagger",target:"_blank",className:"text-sm text-gray-500 hover:text-gray-700",children:"Swagger"})]})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsx(Ur,{}),r.jsx("main",{className:`flex-1 overflow-y-auto p-6 transition-all ${t?"mr-80":""}`,children:r.jsx(Rs,{})}),r.jsx("div",{className:"fixed right-0 top-[57px] bottom-0",children:r.jsx(Ir,{})})]})]})}function Ur(){const{data:t,isLoading:e,error:s}=Pe({queryKey:["modules"],queryFn:Ns});return r.jsxs("aside",{className:"w-56 bg-white border-r border-gray-200 flex flex-col",children:[r.jsx("nav",{className:"p-4 border-b border-gray-100",children:r.jsxs(Dt,{to:"/",end:!0,className:({isActive:n})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[r.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Modules"}),e&&r.jsx("div",{className:"text-sm text-gray-500 px-3",children:"Loading..."}),s&&r.jsx("div",{className:"text-sm text-red-500 px-3",children:"Failed to load modules"}),t&&r.jsx("nav",{className:"space-y-1",children:t.map(n=>r.jsxs(Dt,{to:`/${n.plural}`,className:({isActive:a})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${a?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(Br,{module:n.module}),r.jsx("span",{className:"capitalize",children:n.plural})]},n.module))})]}),r.jsx("div",{className:"p-4 border-t border-gray-100",children:r.jsx("p",{className:"text-xs text-gray-400 text-center",children:"APIGate v1.0.0"})})]})}function Br({module:t}){return{user:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),plan:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),key:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),route:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),upstream:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}[t]||r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}function Hr(){const{data:t,isLoading:e,error:s}=Pe({queryKey:["modules"],queryFn:Ns});return e?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[r.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading modules..."]})}):s?r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Failed to load modules"}),r.jsx("p",{className:"text-red-600",children:"Please check that the API server is running."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),r.jsx("p",{className:"text-gray-500",children:"Manage your API resources"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t==null?void 0:t.map(n=>r.jsx(Kr,{module:n},n.module))}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs(pe,{to:"/users/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Add User"]}),r.jsxs(pe,{to:"/plans/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Create Plan"]}),r.jsxs(pe,{to:"/keys/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Generate Key"]})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg shadow-sm p-6 text-white",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Schema API"}),r.jsx("p",{className:"text-primary-100 mb-4",children:"Access the module schema API for integration and documentation."}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("a",{href:"/mod/_schema",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-lg hover:bg-white/30 transition-colors text-sm",children:[r.jsx("code",{children:"/mod/_schema"}),r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),r.jsxs("a",{href:"/swagger",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-lg hover:bg-white/30 transition-colors text-sm",children:["Swagger UI",r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})]})}function Kr({module:t}){const{data:e}=Pe({queryKey:["records",t.plural,{limit:1}],queryFn:()=>Ss(t.plural,{limit:1}),staleTime:3e4});return r.jsxs(pe,{to:`/${t.plural}`,className:"block bg-white rounded-lg shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:t.plural}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description||`Manage ${t.plural}`})]}),r.jsx("div",{className:"text-2xl font-bold text-primary-600",children:(e==null?void 0:e.count)??"-"})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm text-primary-600",children:["View all",r.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}function Wr({module:t,records:e,isLoading:s,onDelete:n,onAction:a}){const{focusModule:o,focusField:c}=Ze(),[l,u]=w.useState(null),[p,g]=w.useState("asc"),h=w.useMemo(()=>t.fields.filter(x=>!x.internal&&x.type!=="secret"&&x.type!=="bytes"),[t.fields]),f=w.useMemo(()=>t.actions.filter(x=>x.type==="custom"),[t.actions]),v=w.useMemo(()=>l?[...e].sort((x,N)=>{const j=x[l],k=N[l];if(j===k)return 0;if(j==null)return 1;if(k==null)return-1;const C=String(j).localeCompare(String(k));return p==="asc"?C:-C}):e,[e,l,p]),d=x=>{l===x?g(N=>N==="asc"?"desc":"asc"):(u(x),g("asc"))};return Pt.useEffect(()=>{o(t)},[t,o]),s?r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:r.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-500",children:[r.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):e.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",t.plural," found"]}),r.jsxs("p",{className:"text-gray-500 mb-4",children:["Get started by creating a new ",t.module,"."]}),r.jsxs(pe,{to:`/${t.plural}/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",t.module]})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[h.map(x=>r.jsx("th",{onClick:()=>d(x.name),onMouseEnter:()=>c(x,t),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-1",children:[zr(x.name),l===x.name&&r.jsx("svg",{className:`w-4 h-4 ${p==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},x.name)),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(x=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[h.map(N=>r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:Vr(x[N.name],N)},N.name)),r.jsx("td",{className:"px-4 py-3 text-right text-sm whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(pe,{to:`/${t.plural}/${x.id}`,className:"text-primary-600 hover:text-primary-800",title:"View",children:r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),f.map(N=>r.jsx("button",{onClick:()=>a==null?void 0:a(N.name,String(x.id)),className:"text-gray-400 hover:text-gray-600",title:N.name,children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},N.name)),n&&r.jsx("button",{onClick:()=>n(String(x.id)),className:"text-red-400 hover:text-red-600",title:"Delete",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},String(x.id)))})]})}),r.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:r.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," ",t.plural]})})]})}function zr(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Vr(t,e){if(t==null)return r.jsx("span",{className:"text-gray-400",children:"-"});switch(e.type){case"bool":return r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${t?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t?"Yes":"No"});case"enum":return r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-100 text-primary-800",children:String(t)});case"datetime":return new Date(String(t)).toLocaleString();case"date":return new Date(String(t)).toLocaleDateString();case"email":return r.jsx("a",{href:`mailto:${t}`,className:"text-primary-600 hover:underline",children:String(t)});case"url":return r.jsx("a",{href:String(t),target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:nt(String(t),30)});case"json":return r.jsx("code",{className:"text-xs bg-gray-100 px-1 rounded",children:nt(JSON.stringify(t),30)});case"ref":return r.jsx("span",{className:"text-gray-600",children:nt(String(t),20)});default:return nt(String(t),40)}}function nt(t,e){return t.length<=e?t:t.slice(0,e)+"..."}function Gr(){const{module:t}=os(),e=lt(),[s,n]=w.useState(null),{data:a,isLoading:o}=Pe({queryKey:["schema",t],queryFn:()=>Cs(t),enabled:!!t}),{data:c,isLoading:l}=Pe({queryKey:["records",t],queryFn:()=>Ss(a.plural,{limit:100}),enabled:!!t&&!!a}),u=Mt({mutationFn:h=>Or(a.plural,h),onSuccess:()=>{e.invalidateQueries({queryKey:["records",t]}),n(null)}}),p=h=>{n(h)},g=()=>{s&&u.mutate(s)};return o?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[r.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):a?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 capitalize",children:a.plural}),r.jsx("p",{className:"text-gray-500",children:a.description||`Manage ${a.plural}`})]}),r.jsxs(pe,{to:`/${t}/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",a.module]})]}),r.jsx(Wr,{module:a,records:(c==null?void 0:c.data)||[],isLoading:l,onDelete:p}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirm Delete"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",a.module,"? This action cannot be undone."]}),r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:g,disabled:u.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50",children:u.isPending?"Deleting...":"Delete"})]})]})})]}):r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Module not found"}),r.jsxs("p",{className:"text-red-600",children:['The module "',t,'" does not exist.']})]})}const Jr=w.forwardRef(function({field:e,module:s,value:n,onChange:a,error:o,disabled:c},l){var v;const u=Nr(e,s),p=`
      w-full px-3 py-2 border rounded-lg text-sm
      focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
      transition-colors
      ${o?"border-red-300 bg-red-50":"border-gray-300 bg-white"}
      ${c?"bg-gray-100 text-gray-500 cursor-not-allowed":""}
    `,g=r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[ht(e.name),e.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"}),e.computed&&r.jsx("span",{className:"text-gray-400 ml-1 text-xs",children:"(auto)"})]}),h=o&&r.jsx("p",{className:"mt-1 text-xs text-red-500",children:o}),f=e.description&&r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.description});switch(e.type){case"bool":return r.jsxs("div",{className:"mb-4",...u,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{ref:l,type:"checkbox",checked:!!n,onChange:d=>a(d.target.checked),disabled:c||e.computed,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),r.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[ht(e.name),e.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),f,h]});case"enum":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsxs("select",{value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p,children:[r.jsxs("option",{value:"",children:["Select ",ht(e.name),"..."]}),(v=e.values)==null?void 0:v.map(d=>r.jsx("option",{value:d,children:d},d))]}),f,h]});case"text":case"json":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("textarea",{value:e.type==="json"?Yr(n):String(n??""),onChange:d=>a(e.type==="json"?Xr(d.target.value):d.target.value),disabled:c||e.computed,rows:4,className:p}),f,h]});case"secret":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"password",value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p,autoComplete:"new-password"}),f,h]});case"email":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"email",value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p,placeholder:"user@example.com"}),f,h]});case"url":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"url",value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p,placeholder:"https://example.com"}),f,h]});case"int":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"number",value:n!=null?String(n):"",onChange:d=>a(d.target.value?parseInt(d.target.value,10):null),disabled:c||e.computed,className:p,step:"1"}),f,h]});case"float":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"number",value:n!=null?String(n):"",onChange:d=>a(d.target.value?parseFloat(d.target.value):null),disabled:c||e.computed,className:p,step:"any"}),f,h]});case"datetime":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"datetime-local",value:Zr(n),onChange:d=>a(d.target.value?new Date(d.target.value).toISOString():null),disabled:c||e.computed,className:p}),f,h]});case"date":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"date",value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p}),f,h]});case"time":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"time",value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p}),f,h]});case"ref":return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:l,type:"text",value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p,placeholder:`Enter ${e.ref} ID...`}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:e.ref})]}),f,h]});case"string":default:return r.jsxs("div",{className:"mb-4",...u,children:[g,r.jsx("input",{ref:l,type:"text",value:String(n??""),onChange:d=>a(d.target.value),disabled:c||e.computed,className:p}),f,h]})}});function ht(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Yr(t){return t==null?"":typeof t=="string"?t:JSON.stringify(t,null,2)}function Xr(t){try{return JSON.parse(t)}catch{return t}}function Zr(t){if(!t)return"";try{return new Date(String(t)).toISOString().slice(0,16)}catch{return""}}function en({module:t,initialData:e={},mode:s,onSubmit:n,onCancel:a,isLoading:o}){const{focusModule:c}=Ze(),[l,u]=w.useState(e),[p,g]=w.useState({}),[h,f]=w.useState(null),v=w.useMemo(()=>t.fields.filter(j=>!(j.internal||j.computed||s==="edit"&&j.immutable)),[t.fields,s]),d=w.useCallback((j,k)=>{u(C=>({...C,[j]:k})),p[j]&&g(C=>{const b={...C};return delete b[j],b})},[p]),x=w.useCallback(()=>{const j={};for(const k of v){const C=l[k.name];if(k.required&&(C==null||C==="")){j[k.name]=`${tn(k.name)} is required`;continue}if(C!=null&&C!==""){const b=sn(k,C);b&&(j[k.name]=b)}}return g(j),Object.keys(j).length===0},[v,l]),N=async j=>{if(j.preventDefault(),f(null),!!x())try{await n(l)}catch(k){f(k instanceof Error?k.message:"An error occurred")}};return Pt.useEffect(()=>{c(t)},[t,c]),r.jsxs("form",{onSubmit:N,className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:s==="create"?`Create ${t.module}`:`Edit ${t.module}`}),v.map(j=>r.jsx(Jr,{field:j,module:t,value:l[j.name],onChange:k=>d(j.name,k),error:p[j.name],disabled:o},j.name))]}),h&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-sm text-red-700",children:h})]})}),r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a&&r.jsx("button",{type:"button",onClick:a,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 flex items-center gap-2",children:[o&&r.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s==="create"?"Create":"Save Changes"]})]})]})}function tn(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function sn(t,e){switch(t.type){case"email":if(typeof e=="string"&&!rn(e))return"Please enter a valid email address";break;case"url":if(typeof e=="string"&&!nn(e))return"Please enter a valid URL";break;case"enum":if(t.values&&!t.values.includes(String(e)))return`Must be one of: ${t.values.join(", ")}`;break}if(t.constraints)for(const s of t.constraints)switch(s.type){case"min_length":if(typeof e=="string"&&e.length<Number(s.value))return s.message||`Must be at least ${s.value} characters`;break;case"max_length":if(typeof e=="string"&&e.length>Number(s.value))return s.message||`Must be at most ${s.value} characters`;break;case"min":if(typeof e=="number"&&e<Number(s.value))return s.message||`Must be at least ${s.value}`;break;case"max":if(typeof e=="number"&&e>Number(s.value))return s.message||`Must be at most ${s.value}`;break;case"pattern":if(typeof e=="string"&&!new RegExp(String(s.value)).test(e))return s.message||"Invalid format";break}return null}function rn(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function nn(t){try{return new URL(t),!0}catch{return!1}}function an(){var v;const{module:t,id:e}=os(),s=Es(),n=lt(),a=e==="new",{data:o,isLoading:c}=Pe({queryKey:["schema",t],queryFn:()=>Cs(t),enabled:!!t}),{data:l,isLoading:u}=Pe({queryKey:["record",t,e],queryFn:()=>Sr(o.plural,e),enabled:!!t&&!!e&&!a&&!!o}),p=Mt({mutationFn:d=>kr(o.plural,d),onSuccess:d=>{n.invalidateQueries({queryKey:["records",t]}),s(`/${t}/${d.data.id}`)}}),g=Mt({mutationFn:d=>Mr(o.plural,e,d),onSuccess:()=>{n.invalidateQueries({queryKey:["records",t]}),n.invalidateQueries({queryKey:["record",t,e]})}}),h=async d=>{a?await p.mutateAsync(d):await g.mutateAsync(d)},f=()=>{s(`/${t}`)};return c||!a&&u?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[r.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("nav",{className:"flex items-center gap-2 text-sm",children:[r.jsx(pe,{to:`/${t}`,className:"text-gray-500 hover:text-gray-700 capitalize",children:o.plural}),r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),r.jsx("span",{className:"text-gray-900 font-medium",children:a?"Create New":((v=l==null?void 0:l.data)==null?void 0:v.id)||e})]}),r.jsx(en,{module:o,initialData:a?{}:(l==null?void 0:l.data)||{},mode:a?"create":"edit",onSubmit:h,onCancel:f,isLoading:p.isPending||g.isPending}),g.isSuccess&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("p",{className:"text-sm text-green-700",children:"Changes saved successfully!"})]})})]}):r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Module not found"}),r.jsxs("p",{className:"text-red-600",children:['The module "',t,'" does not exist.']})]})}function on(){return r.jsx(wr,{children:r.jsx(Ls,{basename:"/mod/ui",children:r.jsx(Fs,{children:r.jsxs(st,{path:"/",element:r.jsx(_r,{}),children:[r.jsx(st,{index:!0,element:r.jsx(Hr,{})}),r.jsx(st,{path:":module",element:r.jsx(Gr,{})}),r.jsx(st,{path:":module/:id",element:r.jsx(an,{})})]})})})})}const cn=new lr({defaultOptions:{queries:{staleTime:3e4,retry:1}}});dt.createRoot(document.getElementById("root")).render(r.jsx(Pt.StrictMode,{children:r.jsx(ur,{client:cn,children:r.jsx(on,{})})}));

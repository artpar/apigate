var Qt=t=>{throw TypeError(t)};var mt=(t,e,r)=>e.has(t)||Qt("Cannot "+r);var i=(t,e,r)=>(mt(t,e,"read from private field"),r?r.call(t):e.get(t)),j=(t,e,r)=>e.has(t)?Qt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),x=(t,e,r,n)=>(mt(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),k=(t,e,r)=>(mt(t,e,"access private method"),r);var nt=(t,e,r,n)=>({set _(a){x(t,e,a,r)},get _(){return i(t,e,n)}});import{r as y,a as Ds,O as Is,N as Ut,L as J,R as Lt,u as fs,b as Et,B as qs,c as $s,d as ie,e as Re}from"./vendor-BEEOvD6K.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var xs={exports:{}},dt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qs=y,Us=Symbol.for("react.element"),_s=Symbol.for("react.fragment"),Bs=Object.prototype.hasOwnProperty,Hs=Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ks={key:!0,ref:!0,__self:!0,__source:!0};function ys(t,e,r){var n,a={},o=null,l=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)Bs.call(e,n)&&!Ks.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Us,type:t,key:o,ref:l,props:a,_owner:Hs.current}}dt.Fragment=_s;dt.jsx=ys;dt.jsxs=ys;xs.exports=dt;var s=xs.exports,pt={},_t=Ds;pt.createRoot=_t.createRoot,pt.hydrateRoot=_t.hydrateRoot;var ze=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ws={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},le,Ot,ns,zs=(ns=class{constructor(){j(this,le,Ws);j(this,Ot,!1)}setTimeoutProvider(t){x(this,le,t)}setTimeout(t,e){return i(this,le).setTimeout(t,e)}clearTimeout(t){i(this,le).clearTimeout(t)}setInterval(t,e){return i(this,le).setInterval(t,e)}clearInterval(t){i(this,le).clearInterval(t)}},le=new WeakMap,Ot=new WeakMap,ns),ge=new zs;function Vs(t){setTimeout(t,0)}var Oe=typeof window>"u"||"Deno"in globalThis;function $(){}function Gs(t,e){return typeof t=="function"?t(e):t}function ft(t){return typeof t=="number"&&t>=0&&t!==1/0}function gs(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ye(t,e){return typeof t=="function"?t(e):t}function H(t,e){return typeof t=="function"?t(e):t}function Bt(t,e){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:l,stale:c}=t;if(l){if(n){if(e.queryHash!==Ft(l,e.options))return!1}else if(!Je(e.queryKey,l))return!1}if(r!=="all"){const h=e.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||a&&a!==e.state.fetchStatus||o&&!o(e))}function Ht(t,e){const{exact:r,status:n,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Le(e.options.mutationKey)!==Le(o))return!1}else if(!Je(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function Ft(t,e){return((e==null?void 0:e.queryKeyHashFn)||Le)(t)}function Le(t){return JSON.stringify(t,(e,r)=>xt(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Je(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Je(t[r],e[r])):!1}var Js=Object.prototype.hasOwnProperty;function bs(t,e){if(t===e)return t;const r=Kt(t)&&Kt(e);if(!r&&!(xt(t)&&xt(e)))return e;const a=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),l=o.length,c=r?new Array(l):{};let h=0;for(let p=0;p<l;p++){const b=r?p:o[p],d=t[b],g=e[b];if(d===g){c[b]=d,(r?p<a:Js.call(t,b))&&h++;continue}if(d===null||g===null||typeof d!="object"||typeof g!="object"){c[b]=g;continue}const f=bs(d,g);c[b]=f,f===d&&h++}return a===l&&h===a?t:c}function ct(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Kt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function xt(t){if(!Wt(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Wt(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Wt(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ys(t){return new Promise(e=>{ge.setTimeout(e,t)})}function yt(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?bs(t,e):e}function Xs(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Zs(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Tt=Symbol();function vs(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Tt?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function js(t,e){return typeof t=="function"?t(...e):!!t}function er(t,e,r){let n=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??(a=e()),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),t}var ve,ce,Ae,as,tr=(as=class extends ze{constructor(){super();j(this,ve);j(this,ce);j(this,Ae);x(this,Ae,e=>{if(!Oe&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){i(this,ce)||this.setEventListener(i(this,Ae))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,ce))==null||e.call(this),x(this,ce,void 0))}setEventListener(e){var r;x(this,Ae,e),(r=i(this,ce))==null||r.call(this),x(this,ce,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){i(this,ve)!==e&&(x(this,ve,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof i(this,ve)=="boolean"?i(this,ve):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ve=new WeakMap,ce=new WeakMap,Ae=new WeakMap,as),At=new tr;function gt(){let t,e;const r=new Promise((a,o)=>{t=a,e=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),e(a)},r}var sr=Vs;function rr(){let t=[],e=0,r=c=>{c()},n=c=>{c()},a=sr;const o=c=>{e?t.push(c):a(()=>{r(c)})},l=()=>{const c=t;t=[],c.length&&a(()=>{n(()=>{c.forEach(h=>{r(h)})})})};return{batch:c=>{let h;e++;try{h=c()}finally{e--,e||l()}return h},batchCalls:c=>(...h)=>{o(()=>{c(...h)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{a=c}}}var F=rr(),De,ue,Ie,is,nr=(is=class extends ze{constructor(){super();j(this,De,!0);j(this,ue);j(this,Ie);x(this,Ie,e=>{if(!Oe&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){i(this,ue)||this.setEventListener(i(this,Ie))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,ue))==null||e.call(this),x(this,ue,void 0))}setEventListener(e){var r;x(this,Ie,e),(r=i(this,ue))==null||r.call(this),x(this,ue,e(this.setOnline.bind(this)))}setOnline(e){i(this,De)!==e&&(x(this,De,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return i(this,De)}},De=new WeakMap,ue=new WeakMap,Ie=new WeakMap,is),ut=new nr;function ar(t){return Math.min(1e3*2**t,3e4)}function ws(t){return(t??"online")==="online"?ut.isOnline():!0}var bt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ns(t){let e=!1,r=0,n;const a=gt(),o=()=>a.status!=="pending",l=m=>{var N;if(!o()){const v=new bt(m);g(v),(N=t.onCancel)==null||N.call(t,v)}},c=()=>{e=!0},h=()=>{e=!1},p=()=>At.isFocused()&&(t.networkMode==="always"||ut.isOnline())&&t.canRun(),b=()=>ws(t.networkMode)&&t.canRun(),d=m=>{o()||(n==null||n(),a.resolve(m))},g=m=>{o()||(n==null||n(),a.reject(m))},f=()=>new Promise(m=>{var N;n=v=>{(o()||p())&&m(v)},(N=t.onPause)==null||N.call(t)}).then(()=>{var m;n=void 0,o()||(m=t.onContinue)==null||m.call(t)}),u=()=>{if(o())return;let m;const N=r===0?t.initialPromise:void 0;try{m=N??t.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(d).catch(v=>{var Q;if(o())return;const C=t.retry??(Oe?0:3),S=t.retryDelay??ar,w=typeof S=="function"?S(r,v):S,T=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,v);if(e||!T){g(v);return}r++,(Q=t.onFail)==null||Q.call(t,r,v),Ys(w).then(()=>p()?void 0:f()).then(()=>{e?g(v):u()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:c,continueRetry:h,canStart:b,start:()=>(b()?u():f().then(u),a)}}var je,os,Cs=(os=class{constructor(){j(this,je)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ft(this.gcTime)&&x(this,je,ge.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Oe?1/0:5*60*1e3))}clearGcTimeout(){i(this,je)&&(ge.clearTimeout(i(this,je)),x(this,je,void 0))}},je=new WeakMap,os),we,qe,B,Ne,A,Ye,Ce,K,Y,ls,ir=(ls=class extends Cs{constructor(e){super();j(this,K);j(this,we);j(this,qe);j(this,B);j(this,Ne);j(this,A);j(this,Ye);j(this,Ce);x(this,Ce,!1),x(this,Ye,e.defaultOptions),this.setOptions(e.options),this.observers=[],x(this,Ne,e.client),x(this,B,i(this,Ne).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,x(this,we,Vt(this.options)),this.state=e.state??i(this,we),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=i(this,A))==null?void 0:e.promise}setOptions(e){if(this.options={...i(this,Ye),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Vt(this.options);r.data!==void 0&&(this.setState(zt(r.data,r.dataUpdatedAt)),x(this,we,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,B).remove(this)}setData(e,r){const n=yt(this.state.data,e,this.options);return k(this,K,Y).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){k(this,K,Y).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,a;const r=(n=i(this,A))==null?void 0:n.promise;return(a=i(this,A))==null||a.cancel(e),r?r.then($).catch($):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,we))}isActive(){return this.observers.some(e=>H(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Tt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ye(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!gs(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=i(this,A))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=i(this,A))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),i(this,B).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(i(this,A)&&(i(this,Ce)?i(this,A).cancel({revert:!0}):i(this,A).cancelRetry()),this.scheduleGc()),i(this,B).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,K,Y).call(this,{type:"invalidate"})}async fetch(e,r){var h,p,b,d,g,f,u,m,N,v,C,S;if(this.state.fetchStatus!=="idle"&&((h=i(this,A))==null?void 0:h.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(i(this,A))return i(this,A).continueRetry(),i(this,A).promise}if(e&&this.setOptions(e),!this.options.queryFn){const w=this.observers.find(T=>T.options.queryFn);w&&this.setOptions(w.options)}const n=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(x(this,Ce,!0),n.signal)})},o=()=>{const w=vs(this.options,r),Q=(()=>{const ne={client:i(this,Ne),queryKey:this.queryKey,meta:this.meta};return a(ne),ne})();return x(this,Ce,!1),this.options.persister?this.options.persister(w,Q,this):w(Q)},c=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:i(this,Ne),state:this.state,fetchFn:o};return a(w),w})();(p=this.options.behavior)==null||p.onFetch(c,this),x(this,qe,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((b=c.fetchOptions)==null?void 0:b.meta))&&k(this,K,Y).call(this,{type:"fetch",meta:(d=c.fetchOptions)==null?void 0:d.meta}),x(this,A,Ns({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:w=>{w instanceof bt&&w.revert&&this.setState({...i(this,qe),fetchStatus:"idle"}),n.abort()},onFail:(w,T)=>{k(this,K,Y).call(this,{type:"failed",failureCount:w,error:T})},onPause:()=>{k(this,K,Y).call(this,{type:"pause"})},onContinue:()=>{k(this,K,Y).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const w=await i(this,A).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(f=(g=i(this,B).config).onSuccess)==null||f.call(g,w,this),(m=(u=i(this,B).config).onSettled)==null||m.call(u,w,this.state.error,this),w}catch(w){if(w instanceof bt){if(w.silent)return i(this,A).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw k(this,K,Y).call(this,{type:"error",error:w}),(v=(N=i(this,B).config).onError)==null||v.call(N,w,this),(S=(C=i(this,B).config).onSettled)==null||S.call(C,this.state.data,w,this),w}finally{this.scheduleGc()}}},we=new WeakMap,qe=new WeakMap,B=new WeakMap,Ne=new WeakMap,A=new WeakMap,Ye=new WeakMap,Ce=new WeakMap,K=new WeakSet,Y=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Ss(n.data,this.options),fetchMeta:e.meta??null};case"success":const a={...n,...zt(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return x(this,qe,e.manual?a:void 0),a;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),F.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),i(this,B).notify({query:this,type:"updated",action:e})})},ls);function Ss(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ws(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zt(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Vt(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var U,M,Xe,I,Se,$e,X,de,Ze,Qe,Ue,ke,Me,he,_e,R,Ge,vt,jt,wt,Nt,Ct,St,kt,ks,cs,or=(cs=class extends ze{constructor(e,r){super();j(this,R);j(this,U);j(this,M);j(this,Xe);j(this,I);j(this,Se);j(this,$e);j(this,X);j(this,de);j(this,Ze);j(this,Qe);j(this,Ue);j(this,ke);j(this,Me);j(this,he);j(this,_e,new Set);this.options=r,x(this,U,e),x(this,de,null),x(this,X,gt()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,M).addObserver(this),Gt(i(this,M),this.options)?k(this,R,Ge).call(this):this.updateResult(),k(this,R,Nt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Mt(i(this,M),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Mt(i(this,M),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,k(this,R,Ct).call(this),k(this,R,St).call(this),i(this,M).removeObserver(this)}setOptions(e){const r=this.options,n=i(this,M);if(this.options=i(this,U).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof H(this.options.enabled,i(this,M))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");k(this,R,kt).call(this),i(this,M).setOptions(this.options),r._defaulted&&!ct(this.options,r)&&i(this,U).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,M),observer:this});const a=this.hasListeners();a&&Jt(i(this,M),n,this.options,r)&&k(this,R,Ge).call(this),this.updateResult(),a&&(i(this,M)!==n||H(this.options.enabled,i(this,M))!==H(r.enabled,i(this,M))||ye(this.options.staleTime,i(this,M))!==ye(r.staleTime,i(this,M)))&&k(this,R,vt).call(this);const o=k(this,R,jt).call(this);a&&(i(this,M)!==n||H(this.options.enabled,i(this,M))!==H(r.enabled,i(this,M))||o!==i(this,he))&&k(this,R,wt).call(this,o)}getOptimisticResult(e){const r=i(this,U).getQueryCache().build(i(this,U),e),n=this.createResult(r,e);return cr(this,n)&&(x(this,I,n),x(this,$e,this.options),x(this,Se,i(this,M).state)),n}getCurrentResult(){return i(this,I)}trackResult(e,r){return new Proxy(e,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&i(this,X).status==="pending"&&i(this,X).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(e){i(this,_e).add(e)}getCurrentQuery(){return i(this,M)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=i(this,U).defaultQueryOptions(e),n=i(this,U).getQueryCache().build(i(this,U),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return k(this,R,Ge).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,I)))}createResult(e,r){var ae;const n=i(this,M),a=this.options,o=i(this,I),l=i(this,Se),c=i(this,$e),p=e!==n?e.state:i(this,Xe),{state:b}=e;let d={...b},g=!1,f;if(r._optimisticResults){const P=this.hasListeners(),E=!P&&Gt(e,r),Fe=P&&Jt(e,n,r,a);(E||Fe)&&(d={...d,...Ss(b.data,e.options)}),r._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:u,errorUpdatedAt:m,status:N}=d;f=d.data;let v=!1;if(r.placeholderData!==void 0&&f===void 0&&N==="pending"){let P;o!=null&&o.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData)?(P=o.data,v=!0):P=typeof r.placeholderData=="function"?r.placeholderData((ae=i(this,Ue))==null?void 0:ae.state.data,i(this,Ue)):r.placeholderData,P!==void 0&&(N="success",f=yt(o==null?void 0:o.data,P,r),g=!0)}if(r.select&&f!==void 0&&!v)if(o&&f===(l==null?void 0:l.data)&&r.select===i(this,Ze))f=i(this,Qe);else try{x(this,Ze,r.select),f=r.select(f),f=yt(o==null?void 0:o.data,f,r),x(this,Qe,f),x(this,de,null)}catch(P){x(this,de,P)}i(this,de)&&(u=i(this,de),f=i(this,Qe),m=Date.now(),N="error");const C=d.fetchStatus==="fetching",S=N==="pending",w=N==="error",T=S&&C,Q=f!==void 0,D={status:N,fetchStatus:d.fetchStatus,isPending:S,isSuccess:N==="success",isError:w,isInitialLoading:T,isLoading:T,data:f,dataUpdatedAt:d.dataUpdatedAt,error:u,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>p.dataUpdateCount||d.errorUpdateCount>p.errorUpdateCount,isFetching:C,isRefetching:C&&!S,isLoadingError:w&&!Q,isPaused:d.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:w&&Q,isStale:Dt(e,r),refetch:this.refetch,promise:i(this,X),isEnabled:H(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=rt=>{D.status==="error"?rt.reject(D.error):D.data!==void 0&&rt.resolve(D.data)},E=()=>{const rt=x(this,X,D.promise=gt());P(rt)},Fe=i(this,X);switch(Fe.status){case"pending":e.queryHash===n.queryHash&&P(Fe);break;case"fulfilled":(D.status==="error"||D.data!==Fe.value)&&E();break;case"rejected":(D.status!=="error"||D.error!==Fe.reason)&&E();break}}return D}updateResult(){const e=i(this,I),r=this.createResult(i(this,M),this.options);if(x(this,Se,i(this,M).state),x(this,$e,this.options),i(this,Se).data!==void 0&&x(this,Ue,i(this,M)),ct(r,e))return;x(this,I,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!i(this,_e).size)return!0;const l=new Set(o??i(this,_e));return this.options.throwOnError&&l.add("error"),Object.keys(i(this,I)).some(c=>{const h=c;return i(this,I)[h]!==e[h]&&l.has(h)})};k(this,R,ks).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&k(this,R,Nt).call(this)}},U=new WeakMap,M=new WeakMap,Xe=new WeakMap,I=new WeakMap,Se=new WeakMap,$e=new WeakMap,X=new WeakMap,de=new WeakMap,Ze=new WeakMap,Qe=new WeakMap,Ue=new WeakMap,ke=new WeakMap,Me=new WeakMap,he=new WeakMap,_e=new WeakMap,R=new WeakSet,Ge=function(e){k(this,R,kt).call(this);let r=i(this,M).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch($)),r},vt=function(){k(this,R,Ct).call(this);const e=ye(this.options.staleTime,i(this,M));if(Oe||i(this,I).isStale||!ft(e))return;const n=gs(i(this,I).dataUpdatedAt,e)+1;x(this,ke,ge.setTimeout(()=>{i(this,I).isStale||this.updateResult()},n))},jt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,M)):this.options.refetchInterval)??!1},wt=function(e){k(this,R,St).call(this),x(this,he,e),!(Oe||H(this.options.enabled,i(this,M))===!1||!ft(i(this,he))||i(this,he)===0)&&x(this,Me,ge.setInterval(()=>{(this.options.refetchIntervalInBackground||At.isFocused())&&k(this,R,Ge).call(this)},i(this,he)))},Nt=function(){k(this,R,vt).call(this),k(this,R,wt).call(this,k(this,R,jt).call(this))},Ct=function(){i(this,ke)&&(ge.clearTimeout(i(this,ke)),x(this,ke,void 0))},St=function(){i(this,Me)&&(ge.clearInterval(i(this,Me)),x(this,Me,void 0))},kt=function(){const e=i(this,U).getQueryCache().build(i(this,U),this.options);if(e===i(this,M))return;const r=i(this,M);x(this,M,e),x(this,Xe,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},ks=function(e){F.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(i(this,I))}),i(this,U).getQueryCache().notify({query:i(this,M),type:"observerResultsUpdated"})})},cs);function lr(t,e){return H(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Gt(t,e){return lr(t,e)||t.state.data!==void 0&&Mt(t,e,e.refetchOnMount)}function Mt(t,e,r){if(H(e.enabled,t)!==!1&&ye(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Dt(t,e)}return!1}function Jt(t,e,r,n){return(t!==e||H(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Dt(t,r)}function Dt(t,e){return H(e.enabled,t)!==!1&&t.isStaleByTime(ye(e.staleTime,t))}function cr(t,e){return!ct(t.getCurrentResult(),e)}function Yt(t){return{onFetch:(e,r)=>{var b,d,g,f,u;const n=e.options,a=(g=(d=(b=e.fetchOptions)==null?void 0:b.meta)==null?void 0:d.fetchMore)==null?void 0:g.direction,o=((f=e.state.data)==null?void 0:f.pages)||[],l=((u=e.state.data)==null?void 0:u.pageParams)||[];let c={pages:[],pageParams:[]},h=0;const p=async()=>{let m=!1;const N=S=>{er(S,()=>e.signal,()=>m=!0)},v=vs(e.options,e.fetchOptions),C=async(S,w,T)=>{if(m)return Promise.reject();if(w==null&&S.pages.length)return Promise.resolve(S);const ne=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:w,direction:T?"backward":"forward",meta:e.options.meta};return N(E),E})(),D=await v(ne),{maxPages:ae}=e.options,P=T?Zs:Xs;return{pages:P(S.pages,D,ae),pageParams:P(S.pageParams,w,ae)}};if(a&&o.length){const S=a==="backward",w=S?ur:Xt,T={pages:o,pageParams:l},Q=w(n,T);c=await C(T,Q,S)}else{const S=t??o.length;do{const w=h===0?l[0]??n.initialPageParam:Xt(n,c);if(h>0&&w==null)break;c=await C(c,w),h++}while(h<S)}return c};e.options.persister?e.fetchFn=()=>{var m,N;return(N=(m=e.options).persister)==null?void 0:N.call(m,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=p}}}function Xt(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function ur(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var et,z,q,Pe,V,oe,us,dr=(us=class extends Cs{constructor(e){super();j(this,V);j(this,et);j(this,z);j(this,q);j(this,Pe);x(this,et,e.client),this.mutationId=e.mutationId,x(this,q,e.mutationCache),x(this,z,[]),this.state=e.state||Ms(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,z).includes(e)||(i(this,z).push(e),this.clearGcTimeout(),i(this,q).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){x(this,z,i(this,z).filter(r=>r!==e)),this.scheduleGc(),i(this,q).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,z).length||(this.state.status==="pending"?this.scheduleGc():i(this,q).remove(this))}continue(){var e;return((e=i(this,Pe))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var l,c,h,p,b,d,g,f,u,m,N,v,C,S,w,T,Q,ne,D,ae;const r=()=>{k(this,V,oe).call(this,{type:"continue"})},n={client:i(this,et),meta:this.options.meta,mutationKey:this.options.mutationKey};x(this,Pe,Ns({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(P,E)=>{k(this,V,oe).call(this,{type:"failed",failureCount:P,error:E})},onPause:()=>{k(this,V,oe).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,q).canRun(this)}));const a=this.state.status==="pending",o=!i(this,Pe).canStart();try{if(a)r();else{k(this,V,oe).call(this,{type:"pending",variables:e,isPaused:o}),await((c=(l=i(this,q).config).onMutate)==null?void 0:c.call(l,e,this,n));const E=await((p=(h=this.options).onMutate)==null?void 0:p.call(h,e,n));E!==this.state.context&&k(this,V,oe).call(this,{type:"pending",context:E,variables:e,isPaused:o})}const P=await i(this,Pe).start();return await((d=(b=i(this,q).config).onSuccess)==null?void 0:d.call(b,P,e,this.state.context,this,n)),await((f=(g=this.options).onSuccess)==null?void 0:f.call(g,P,e,this.state.context,n)),await((m=(u=i(this,q).config).onSettled)==null?void 0:m.call(u,P,null,this.state.variables,this.state.context,this,n)),await((v=(N=this.options).onSettled)==null?void 0:v.call(N,P,null,e,this.state.context,n)),k(this,V,oe).call(this,{type:"success",data:P}),P}catch(P){try{await((S=(C=i(this,q).config).onError)==null?void 0:S.call(C,P,e,this.state.context,this,n))}catch(E){Promise.reject(E)}try{await((T=(w=this.options).onError)==null?void 0:T.call(w,P,e,this.state.context,n))}catch(E){Promise.reject(E)}try{await((ne=(Q=i(this,q).config).onSettled)==null?void 0:ne.call(Q,void 0,P,this.state.variables,this.state.context,this,n))}catch(E){Promise.reject(E)}try{await((ae=(D=this.options).onSettled)==null?void 0:ae.call(D,void 0,P,e,this.state.context,n))}catch(E){Promise.reject(E)}throw k(this,V,oe).call(this,{type:"error",error:P}),P}finally{i(this,q).runNext(this)}}},et=new WeakMap,z=new WeakMap,q=new WeakMap,Pe=new WeakMap,V=new WeakSet,oe=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),F.batch(()=>{i(this,z).forEach(n=>{n.onMutationUpdate(e)}),i(this,q).notify({mutation:this,type:"updated",action:e})})},us);function Ms(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Z,W,tt,ds,hr=(ds=class extends ze{constructor(e={}){super();j(this,Z);j(this,W);j(this,tt);this.config=e,x(this,Z,new Set),x(this,W,new Map),x(this,tt,0)}build(e,r,n){const a=new dr({client:e,mutationCache:this,mutationId:++nt(this,tt)._,options:e.defaultMutationOptions(r),state:n});return this.add(a),a}add(e){i(this,Z).add(e);const r=at(e);if(typeof r=="string"){const n=i(this,W).get(r);n?n.push(e):i(this,W).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,Z).delete(e)){const r=at(e);if(typeof r=="string"){const n=i(this,W).get(r);if(n)if(n.length>1){const a=n.indexOf(e);a!==-1&&n.splice(a,1)}else n[0]===e&&i(this,W).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=at(e);if(typeof r=="string"){const n=i(this,W).get(r),a=n==null?void 0:n.find(o=>o.state.status==="pending");return!a||a===e}else return!0}runNext(e){var n;const r=at(e);if(typeof r=="string"){const a=(n=i(this,W).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){F.batch(()=>{i(this,Z).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,Z).clear(),i(this,W).clear()})}getAll(){return Array.from(i(this,Z))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Ht(r,n))}findAll(e={}){return this.getAll().filter(r=>Ht(e,r))}notify(e){F.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return F.batch(()=>Promise.all(e.map(r=>r.continue().catch($))))}},Z=new WeakMap,W=new WeakMap,tt=new WeakMap,ds);function at(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ee,me,_,te,se,lt,Pt,hs,mr=(hs=class extends ze{constructor(r,n){super();j(this,se);j(this,ee);j(this,me);j(this,_);j(this,te);x(this,ee,r),this.setOptions(n),this.bindMethods(),k(this,se,lt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=i(this,ee).defaultMutationOptions(r),ct(this.options,n)||i(this,ee).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,_),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Le(n.mutationKey)!==Le(this.options.mutationKey)?this.reset():((a=i(this,_))==null?void 0:a.state.status)==="pending"&&i(this,_).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=i(this,_))==null||r.removeObserver(this)}onMutationUpdate(r){k(this,se,lt).call(this),k(this,se,Pt).call(this,r)}getCurrentResult(){return i(this,me)}reset(){var r;(r=i(this,_))==null||r.removeObserver(this),x(this,_,void 0),k(this,se,lt).call(this),k(this,se,Pt).call(this)}mutate(r,n){var a;return x(this,te,n),(a=i(this,_))==null||a.removeObserver(this),x(this,_,i(this,ee).getMutationCache().build(i(this,ee),this.options)),i(this,_).addObserver(this),i(this,_).execute(r)}},ee=new WeakMap,me=new WeakMap,_=new WeakMap,te=new WeakMap,se=new WeakSet,lt=function(){var n;const r=((n=i(this,_))==null?void 0:n.state)??Ms();x(this,me,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Pt=function(r){F.batch(()=>{var n,a,o,l,c,h,p,b;if(i(this,te)&&this.hasListeners()){const d=i(this,me).variables,g=i(this,me).context,f={client:i(this,ee),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(a=(n=i(this,te)).onSuccess)==null||a.call(n,r.data,d,g,f)}catch(u){Promise.reject(u)}try{(l=(o=i(this,te)).onSettled)==null||l.call(o,r.data,null,d,g,f)}catch(u){Promise.reject(u)}}else if((r==null?void 0:r.type)==="error"){try{(h=(c=i(this,te)).onError)==null||h.call(c,r.error,d,g,f)}catch(u){Promise.reject(u)}try{(b=(p=i(this,te)).onSettled)==null||b.call(p,void 0,r.error,d,g,f)}catch(u){Promise.reject(u)}}}this.listeners.forEach(d=>{d(i(this,me))})})},hs),G,ms,pr=(ms=class extends ze{constructor(e={}){super();j(this,G);this.config=e,x(this,G,new Map)}build(e,r,n){const a=r.queryKey,o=r.queryHash??Ft(a,r);let l=this.get(o);return l||(l=new ir({client:e,queryKey:a,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(l)),l}add(e){i(this,G).has(e.queryHash)||(i(this,G).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=i(this,G).get(e.queryHash);r&&(e.destroy(),r===e&&i(this,G).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){F.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,G).get(e)}getAll(){return[...i(this,G).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Bt(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Bt(e,n)):r}notify(e){F.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){F.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){F.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},G=new WeakMap,ms),L,pe,fe,Be,He,xe,Ke,We,ps,fr=(ps=class{constructor(t={}){j(this,L);j(this,pe);j(this,fe);j(this,Be);j(this,He);j(this,xe);j(this,Ke);j(this,We);x(this,L,t.queryCache||new pr),x(this,pe,t.mutationCache||new hr),x(this,fe,t.defaultOptions||{}),x(this,Be,new Map),x(this,He,new Map),x(this,xe,0)}mount(){nt(this,xe)._++,i(this,xe)===1&&(x(this,Ke,At.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,L).onFocus())})),x(this,We,ut.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,L).onOnline())})))}unmount(){var t,e;nt(this,xe)._--,i(this,xe)===0&&((t=i(this,Ke))==null||t.call(this),x(this,Ke,void 0),(e=i(this,We))==null||e.call(this),x(this,We,void 0))}isFetching(t){return i(this,L).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,pe).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=i(this,L).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=i(this,L).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(ye(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return i(this,L).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),a=i(this,L).get(n.queryHash),o=a==null?void 0:a.state.data,l=Gs(e,o);if(l!==void 0)return i(this,L).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return F.batch(()=>i(this,L).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=i(this,L).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=i(this,L);F.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=i(this,L);return F.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=F.batch(()=>i(this,L).findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then($).catch($)}invalidateQueries(t,e={}){return F.batch(()=>(i(this,L).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=F.batch(()=>i(this,L).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch($)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then($)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=i(this,L).build(this,e);return r.isStaleByTime(ye(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then($).catch($)}fetchInfiniteQuery(t){return t.behavior=Yt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then($).catch($)}ensureInfiniteQueryData(t){return t.behavior=Yt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ut.isOnline()?i(this,pe).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,L)}getMutationCache(){return i(this,pe)}getDefaultOptions(){return i(this,fe)}setDefaultOptions(t){x(this,fe,t)}setQueryDefaults(t,e){i(this,Be).set(Le(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,Be).values()],r={};return e.forEach(n=>{Je(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){i(this,He).set(Le(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,He).values()],r={};return e.forEach(n=>{Je(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,fe).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ft(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Tt&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,fe).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,L).clear(),i(this,pe).clear()}},L=new WeakMap,pe=new WeakMap,fe=new WeakMap,Be=new WeakMap,He=new WeakMap,xe=new WeakMap,Ke=new WeakMap,We=new WeakMap,ps),Ps=y.createContext(void 0),ht=t=>{const e=y.useContext(Ps);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},xr=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(Ps.Provider,{value:t,children:e})),Rs=y.createContext(!1),yr=()=>y.useContext(Rs);Rs.Provider;function gr(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var br=y.createContext(gr()),vr=()=>y.useContext(br),jr=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},wr=t=>{y.useEffect(()=>{t.clearReset()},[t])},Nr=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||js(r,[t.error,n])),Cr=t=>{if(t.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Sr=(t,e)=>t.isLoading&&t.isFetching&&!e,kr=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Zt=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Mr(t,e,r){var d,g,f,u,m;const n=yr(),a=vr(),o=ht(),l=o.defaultQueryOptions(t);(g=(d=o.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||g.call(d,l),l._optimisticResults=n?"isRestoring":"optimistic",Cr(l),jr(l,a),wr(a);const c=!o.getQueryCache().get(l.queryHash),[h]=y.useState(()=>new e(o,l)),p=h.getOptimisticResult(l),b=!n&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(N=>{const v=b?h.subscribe(F.batchCalls(N)):$;return h.updateResult(),v},[h,b]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),y.useEffect(()=>{h.setOptions(l)},[l,h]),kr(l,p))throw Zt(l,h,a);if(Nr({result:p,errorResetBoundary:a,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw p.error;if((u=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||u.call(f,l,p),l.experimental_prefetchInRender&&!Oe&&Sr(p,n)){const N=c?Zt(l,h,a):(m=o.getQueryCache().get(l.queryHash))==null?void 0:m.promise;N==null||N.catch($).finally(()=>{h.updateResult()})}return l.notifyOnChangeProps?p:h.trackResult(p)}function re(t,e){return Mr(t,or)}function Rt(t,e){const r=ht(),[n]=y.useState(()=>new mr(r,t));y.useEffect(()=>{n.setOptions(t)},[n,t]);const a=y.useSyncExternalStore(y.useCallback(l=>n.subscribe(F.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=y.useCallback((l,c)=>{n.mutate(l,c).catch($)},[n]);if(a.error&&js(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}const Os=y.createContext(null);function Pr({children:t}){const[e,r]=y.useState({type:"none"}),[n,a]=y.useState(!0),o=y.useRef(null),l=y.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),c=y.useCallback(u=>{l(),r({type:"module",module:u})},[l]),h=y.useCallback((u,m)=>{l(),r({type:"field",field:u,module:m})},[l]),p=y.useCallback((u,m)=>{l(),r({type:"action",action:u,module:m})},[l]),b=y.useCallback(()=>{l(),o.current=setTimeout(()=>{r({type:"none"})},300)},[l]),d=y.useCallback(()=>{a(u=>!u)},[]),g=y.useCallback(u=>{a(u)},[]),f=y.useMemo(()=>({focus:e,focusModule:c,focusField:h,focusAction:p,clearFocus:b,cancelClearFocus:l,isExpanded:n,toggleExpanded:d,setExpanded:g}),[e,c,h,p,b,l,n,d,g]);return s.jsx(Os.Provider,{value:f,children:t})}function st(){const t=y.useContext(Os);if(!t)throw new Error("useDocumentation must be used within a DocumentationProvider");return t}function Rr(t,e){const{focusField:r,clearFocus:n}=st();return y.useMemo(()=>({onFocus:()=>r(t,e),onMouseEnter:()=>r(t,e),onBlur:n,onMouseLeave:n}),[t,e,r,n])}const Ls=y.createContext(null);function Or({children:t}){const[e,r]=y.useState(null),[n,a]=y.useState(!0),[o,l]=y.useState(!1),c=async()=>{try{if((await(await fetch("/mod/auth/setup-required")).json()).setup_required){l(!0),r(null),a(!1);return}l(!1);const u=await fetch("/mod/auth/me",{credentials:"include"});if(u.ok){const m=await u.json();r(m.user)}else r(null)}catch{r(null)}finally{a(!1)}};y.useEffect(()=>{c()},[]);const h=async(g,f)=>{const u=await fetch("/mod/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:g,password:f})}),m=await u.json();if(!u.ok)throw new Error(m.error||"Login failed");r(m.user)},p=async(g,f,u)=>{const m=await fetch("/mod/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:g,password:f,name:u})}),N=await m.json();if(!m.ok)throw new Error(N.error||"Registration failed");r(N.user)},b=async(g,f,u)=>{const m=await fetch("/mod/auth/setup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:g,password:f,name:u})}),N=await m.json();if(!m.ok)throw new Error(N.error||"Setup failed");l(!1),r(N.user)},d=async()=>{await fetch("/mod/auth/logout",{method:"POST",credentials:"include"}),r(null)};return s.jsx(Ls.Provider,{value:{user:e,isLoading:n,isAuthenticated:!!e,setupRequired:o,login:h,register:p,setup:b,logout:d,checkAuth:c},children:t})}function Ve(){const t=y.useContext(Ls);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const Ee="/mod",es=new Map,Lr=5*60*1e3;async function It(){const t=await fetch(`${Ee}/_schema`);if(!t.ok)throw new Error(`Failed to fetch modules: ${t.statusText}`);return((await t.json()).modules||[]).map(r=>({module:r.name,plural:r.plural,description:r.description||""}))}async function Es(t){const e=es.get(t);if(e&&Date.now()-e.timestamp<Lr)return e.data;const r=await fetch(`${Ee}/_schema/${t}`);if(!r.ok)throw new Error(`Failed to fetch schema for ${t}: ${r.statusText}`);const n=await r.json();return es.set(t,{data:n,timestamp:Date.now()}),n}async function qt(t,e){const r=new URLSearchParams;e!=null&&e.limit&&r.set("limit",String(e.limit)),e!=null&&e.offset&&r.set("offset",String(e.offset));const n=`${Ee}/${t}${r.toString()?`?${r}`:""}`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch ${t}: ${a.statusText}`);return a.json()}async function Er(t,e){const r=await fetch(`${Ee}/${t}/${encodeURIComponent(e)}`);if(!r.ok)throw r.status===404?new Error(`Record not found: ${e}`):new Error(`Failed to fetch record: ${r.statusText}`);return r.json()}async function Fr(t,e){const r=await fetch(`${Ee}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const n=await r.json().catch(()=>({error:r.statusText}));throw new Error(n.error||"Failed to create record")}return r.json()}async function Tr(t,e,r){const n=await fetch(`${Ee}/${t}/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const a=await n.json().catch(()=>({error:n.statusText}));throw new Error(a.error||"Failed to update record")}return n.json()}async function Ar(t,e){const r=await fetch(`${Ee}/${t}/${encodeURIComponent(e)}`,{method:"DELETE"});if(!r.ok){const n=await r.json().catch(()=>({error:r.statusText}));throw new Error(n.error||"Failed to delete record")}}function Fs(t,e,r){const n="http://localhost:8080";let a=t.http.path.replace("{module}",e.plural).replace("{id}","<id>"),o=`curl -X ${t.http.method} "${n}${a}"`;return o+=` \\
  -H "Content-Type: application/json"`,t.auth&&t.auth!=="none"&&(o+=` \\
  -H "X-API-Key: <your-api-key>"`),["POST","PUT","PATCH"].includes(t.http.method)&&r&&(o+=` \\
  -d '${JSON.stringify(r,null,2)}'`),o}function be(t,e="create"){const r={};for(const n of t.fields)n.internal||n.computed||e==="update"&&n.immutable||(r[n.name]=Dr(n));return r}function Dr(t){var e;if(t.default!==void 0)return t.default;switch(t.type){case"string":case"text":return`sample_${t.name}`;case"int":return 100;case"float":return 99.99;case"bool":return!0;case"email":return"user@example.com";case"url":return"https://example.com";case"uuid":return"550e8400-e29b-41d4-a716-446655440000";case"datetime":return new Date().toISOString();case"date":return new Date().toISOString().split("T")[0];case"time":return"12:00:00";case"duration":return"1h30m";case"json":return{key:"value"};case"secret":return"********";case"enum":return((e=t.values)==null?void 0:e[0])??"option1";case"ref":return`${t.ref}_id_123`;case"bytes":return"<binary data>";default:return null}}function Ir(t){const e=[];for(const r of t.actions){const n=qr(r,t);n&&e.push(n)}return e}function qr(t,e){const r=t.type==="create"||t.type==="update"?be(e,t.type):void 0,n=t.http.path.replace("{module}",e.plural).replace("{id}","user_123");return{title:`${t.type.charAt(0).toUpperCase()+t.type.slice(1)} ${e.module}`,description:t.description,method:t.http.method,path:n,curl:Fs(t,e,r),requestBody:r?JSON.stringify(r,null,2):void 0,responseBody:$r(t,e)}}function $r(t,e){switch(t.type){case"list":return JSON.stringify({module:e.module,count:2,data:[be(e),be(e)]},null,2);case"get":case"create":case"update":return JSON.stringify({module:e.module,data:be(e)},null,2);case"delete":return JSON.stringify({success:!0},null,2);default:return JSON.stringify({module:e.module,data:be(e)},null,2)}}function Ts(t){var e;return t.type==="enum"&&((e=t.values)!=null&&e.length)?`enum(${t.values.join(" | ")})`:t.type==="ref"&&t.ref?`ref(${t.ref})`:t.type}function Qr(t){switch(t.type){case"min":return`Minimum value: ${t.value}`;case"max":return`Maximum value: ${t.value}`;case"min_length":return`Minimum length: ${t.value} characters`;case"max_length":return`Maximum length: ${t.value} characters`;case"pattern":return`Must match pattern: ${t.value}`;case"ref_exists":return"Referenced record must exist";default:return`${t.type}: ${t.value}`}}function Ur(t){const e=[];if(t.required&&e.push("Required field"),t.unique&&e.push("Must be unique"),t.immutable&&e.push("Cannot be changed after creation"),t.constraints)for(const r of t.constraints)e.push(Qr(r));switch(t.type){case"email":e.push("Must be a valid email address");break;case"url":e.push("Must be a valid URL");break;case"uuid":e.push("Must be a valid UUID");break}return e}const _r=[{id:"spec",label:"Spec"},{id:"details",label:"Details"},{id:"api",label:"API"},{id:"examples",label:"Examples"}];function Br(){const{focus:t,isExpanded:e,toggleExpanded:r,cancelClearFocus:n}=st(),[a,o]=y.useState("spec");return e?s.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col h-full",onMouseEnter:n,children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50",children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Documentation"}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Hide Documentation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex border-b border-gray-200",children:_r.map(l=>s.jsx("button",{onClick:()=>o(l.id),className:`flex-1 px-3 py-2 text-xs font-medium transition-colors ${a===l.id?"text-primary-600 border-b-2 border-primary-600 bg-primary-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:l.label},l.id))}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[t.type==="none"&&s.jsx(Hr,{}),t.type==="module"&&t.module&&s.jsx(Kr,{module:t.module,tab:a}),t.type==="field"&&t.field&&t.module&&s.jsx(Wr,{field:t.field,module:t.module,tab:a}),t.type==="action"&&t.action&&t.module&&s.jsx(zr,{action:t.action,module:t.module,tab:a})]})]}):s.jsx("button",{onClick:r,className:"fixed right-0 top-1/2 -translate-y-1/2 bg-primary-600 text-white p-2 rounded-l-lg shadow-lg hover:bg-primary-700 transition-colors",title:"Show Documentation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}function Hr(){return s.jsxs("div",{className:"text-center text-gray-500 py-8",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-sm",children:"Hover over or focus on a field to see its documentation."})]})}function Kr({module:t,tab:e}){const r=y.useMemo(()=>Ir(t),[t]);switch(e){case"spec":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(O,{title:"Module",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.module}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Plural: ",t.plural]})]}),s.jsx(O,{title:"Fields",children:s.jsx("ul",{className:"space-y-1",children:t.fields.filter(n=>!n.internal).map(n=>s.jsxs("li",{className:"text-xs",children:[s.jsx("code",{className:"text-primary-600",children:n.name}),s.jsxs("span",{className:"text-gray-500",children:[" : ",Ts(n)]}),n.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]},n.name))})}),s.jsx(O,{title:"Lookups",children:s.jsxs("p",{className:"text-xs text-gray-600",children:["Records can be looked up by: ",t.lookups.join(", ")]})})]});case"details":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(O,{title:"Description",children:s.jsx("p",{className:"text-sm text-gray-700",children:t.description||"No description available."})}),s.jsx(O,{title:"Actions",children:s.jsx("ul",{className:"space-y-2",children:t.actions.map(n=>s.jsxs("li",{className:"text-xs",children:[s.jsx("span",{className:"font-medium text-gray-900",children:n.name}),s.jsx("p",{className:"text-gray-500",children:n.description})]},n.name))})})]});case"api":return s.jsx("div",{className:"space-y-4",children:s.jsx(O,{title:"Endpoints",children:t.actions.map(n=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(As,{method:n.http.method}),s.jsx("code",{className:"text-xs text-gray-700",children:n.http.path.replace("{module}",t.plural)})]}),s.jsx("p",{className:"text-xs text-gray-500",children:n.description})]},n.name))})});case"examples":return s.jsx("div",{className:"space-y-4",children:r.slice(0,3).map((n,a)=>s.jsx(O,{title:n.title,children:s.jsx(Te,{code:n.curl})},a))});default:return null}}function Wr({field:t,module:e,tab:r}){const n=y.useMemo(()=>Ur(t),[t]);switch(r){case"spec":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(O,{title:"Field",children:s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name})}),s.jsx(O,{title:"Type",children:s.jsx("code",{className:"text-sm text-primary-600",children:Ts(t)})}),t.values&&t.values.length>0&&s.jsx(O,{title:"Allowed Values",children:s.jsx("ul",{className:"space-y-1",children:t.values.map(a=>s.jsx("li",{className:"text-xs",children:s.jsx("code",{className:"bg-gray-100 px-1 rounded",children:a})},a))})}),s.jsx(O,{title:"Attributes",children:s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsxs("li",{children:["Required: ",s.jsx("span",{className:t.required?"text-red-600":"text-gray-500",children:t.required?"Yes":"No"})]}),t.unique&&s.jsxs("li",{children:["Unique: ",s.jsx("span",{className:"text-amber-600",children:"Yes"})]}),t.immutable&&s.jsxs("li",{children:["Immutable: ",s.jsx("span",{className:"text-amber-600",children:"Yes"})]}),t.computed&&s.jsxs("li",{children:["Computed: ",s.jsx("span",{className:"text-blue-600",children:"Yes (auto-generated)"})]})]})})]});case"details":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(O,{title:"Description",children:s.jsx("p",{className:"text-sm text-gray-700",children:t.description||"No description available."})}),n.length>0&&s.jsx(O,{title:"Validation Rules",children:s.jsx("ul",{className:"space-y-1",children:n.map((a,o)=>s.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-primary-500 mt-0.5",children:"*"}),a]},o))})}),t.ref&&s.jsx(O,{title:"Reference",children:s.jsxs("p",{className:"text-xs text-gray-600",children:["References a record in the ",s.jsx("code",{className:"text-primary-600",children:t.ref})," module."]})})]});case"api":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(O,{title:"JSON Path",children:s.jsxs("code",{className:"text-sm text-gray-700",children:["$.data.",t.name]})}),s.jsx(O,{title:"In Request Body",children:s.jsx(Te,{code:JSON.stringify({[t.name]:ts(t)},null,2)})})]});case"examples":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(O,{title:"Example Values",children:s.jsx(Te,{code:String(ts(t))})}),t.type==="enum"&&t.values&&s.jsx(O,{title:"Valid Options",children:s.jsx("ul",{className:"space-y-1",children:t.values.map(a=>s.jsx("li",{className:"text-xs",children:s.jsx("code",{className:"bg-gray-100 px-2 py-0.5 rounded",children:a})},a))})})]});default:return null}}function ts(t){var e;if(t.default!==void 0)return t.default;switch(t.type){case"string":return`sample_${t.name}`;case"int":return 100;case"float":return 99.99;case"bool":return!0;case"email":return"user@example.com";case"url":return"https://example.com";case"enum":return((e=t.values)==null?void 0:e[0])??"option1";case"ref":return`${t.ref}_id`;default:return null}}function zr({action:t,module:e,tab:r}){const n=y.useMemo(()=>t.type==="create"||t.type==="update"?be(e,t.type):void 0,[t,e]),a=y.useMemo(()=>Fs(t,e,n),[t,e,n]);switch(r){case"spec":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(O,{title:"Action",children:s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name})}),s.jsx(O,{title:"Type",children:s.jsx("span",{className:"inline-block px-2 py-0.5 bg-primary-100 text-primary-700 text-xs rounded",children:t.type})}),s.jsx(O,{title:"HTTP",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(As,{method:t.http.method}),s.jsx("code",{className:"text-xs text-gray-700",children:t.http.path.replace("{module}",e.plural)})]})}),t.auth&&t.auth!=="none"&&s.jsx(O,{title:"Authentication",children:s.jsxs("p",{className:"text-xs text-gray-600",children:["Requires: ",t.auth]})}),t.confirm&&s.jsx(O,{title:"Confirmation",children:s.jsx("p",{className:"text-xs text-amber-600",children:"This action requires confirmation"})})]});case"details":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(O,{title:"Description",children:s.jsx("p",{className:"text-sm text-gray-700",children:t.description})}),t.input.length>0&&s.jsx(O,{title:"Input Fields",children:s.jsx("ul",{className:"space-y-2",children:t.input.map(o=>s.jsxs("li",{className:"text-xs",children:[s.jsx("code",{className:"text-primary-600",children:o.name}),s.jsxs("span",{className:"text-gray-500",children:[" : ",o.type]}),o.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"}),o.description&&s.jsx("p",{className:"text-gray-500 mt-0.5",children:o.description})]},o.name))})})]});case"api":return s.jsx("div",{className:"space-y-4",children:s.jsx(O,{title:"Curl Command",children:s.jsx(Te,{code:a})})});case"examples":return s.jsxs("div",{className:"space-y-4",children:[n&&s.jsx(O,{title:"Request Body",children:s.jsx(Te,{code:JSON.stringify(n,null,2)})}),s.jsx(O,{title:"Response",children:s.jsx(Te,{code:JSON.stringify({module:e.module,data:t.type==="delete"?null:be(e)},null,2)})})]});default:return null}}function O({title:t,children:e}){return s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:t}),e]})}function As({method:t}){const e={GET:"bg-green-100 text-green-700",POST:"bg-blue-100 text-blue-700",PUT:"bg-amber-100 text-amber-700",PATCH:"bg-orange-100 text-orange-700",DELETE:"bg-red-100 text-red-700"};return s.jsx("span",{className:`inline-block px-1.5 py-0.5 text-xs font-mono font-medium rounded ${e[t]||"bg-gray-100 text-gray-700"}`,children:t})}function Te({code:t}){const[e,r]=y.useState(!1),n=()=>{navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)};return s.jsxs("div",{className:"relative group",children:[s.jsx("pre",{className:"bg-gray-900 text-gray-100 text-xs p-3 rounded-lg overflow-x-auto",children:s.jsx("code",{children:t})}),s.jsx("button",{onClick:n,className:"absolute top-2 right-2 p-1 bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy to clipboard",children:e?s.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):s.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}function Vr(){const{isExpanded:t}=st();return s.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[s.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("svg",{className:"w-8 h-8 text-primary-600",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"APIGate"}),s.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-0.5 rounded-full",children:"Admin"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("a",{href:"/mod/_schema",target:"_blank",className:"text-sm text-gray-500 hover:text-gray-700",children:"Schema API"}),s.jsx("a",{href:"/swagger",target:"_blank",className:"text-sm text-gray-500 hover:text-gray-700",children:"Swagger"})]})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsx(Gr,{}),s.jsx("main",{className:`flex-1 overflow-y-auto p-6 transition-all ${t?"mr-80":""}`,children:s.jsx(Is,{})}),s.jsx("div",{className:"fixed right-0 top-[57px] bottom-0",children:s.jsx(Br,{})})]})]})}function Gr(){const{data:t,isLoading:e,error:r}=re({queryKey:["modules"],queryFn:It});return s.jsxs("aside",{className:"w-56 bg-white border-r border-gray-200 flex flex-col",children:[s.jsx("nav",{className:"p-4 border-b border-gray-100",children:s.jsxs(Ut,{to:"/",end:!0,className:({isActive:n})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${n?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[s.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Modules"}),e&&s.jsx("div",{className:"text-sm text-gray-500 px-3",children:"Loading..."}),r&&s.jsx("div",{className:"text-sm text-red-500 px-3",children:"Failed to load modules"}),t&&s.jsx("nav",{className:"space-y-1",children:t.map(n=>s.jsxs(Ut,{to:`/${n.module}`,className:({isActive:a})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${a?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(Jr,{module:n.module}),s.jsx("span",{className:"capitalize",children:n.plural})]},n.module))})]}),s.jsx("div",{className:"p-4 border-t border-gray-100",children:s.jsx("p",{className:"text-xs text-gray-400 text-center",children:"APIGate v1.0.0"})})]})}function Jr({module:t}){return{user:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),plan:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),key:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),route:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),upstream:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})})}[t]||s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}function Yr(){const{data:t,isLoading:e,error:r}=re({queryKey:["modules"],queryFn:It});return e?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading modules..."]})}):r?s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Failed to load modules"}),s.jsx("p",{className:"text-red-600",children:"Please check that the API server is running."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-500",children:"Manage your API resources"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t==null?void 0:t.map(n=>s.jsx(Xr,{module:n},n.module))}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(J,{to:"/users/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Add User"]}),s.jsxs(J,{to:"/plans/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Create Plan"]}),s.jsxs(J,{to:"/keys/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Generate Key"]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg shadow-sm p-6 text-white",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Schema API"}),s.jsx("p",{className:"text-primary-100 mb-4",children:"Access the module schema API for integration and documentation."}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("a",{href:"/mod/_schema",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-lg hover:bg-white/30 transition-colors text-sm",children:[s.jsx("code",{children:"/mod/_schema"}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),s.jsxs("a",{href:"/swagger",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-lg hover:bg-white/30 transition-colors text-sm",children:["Swagger UI",s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})]})}function Xr({module:t}){const{data:e}=re({queryKey:["records",t.plural,{limit:1}],queryFn:()=>qt(t.plural,{limit:1}),staleTime:3e4});return s.jsxs(J,{to:`/${t.plural}`,className:"block bg-white rounded-lg shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:t.plural}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description||`Manage ${t.plural}`})]}),s.jsx("div",{className:"text-2xl font-bold text-primary-600",children:(e==null?void 0:e.count)??"-"})]}),s.jsxs("div",{className:"mt-4 flex items-center text-sm text-primary-600",children:["View all",s.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}function Zr({module:t,records:e,isLoading:r,onDelete:n,onAction:a}){const{focusModule:o,focusField:l}=st(),[c,h]=y.useState(null),[p,b]=y.useState("asc"),d=y.useMemo(()=>t.fields.filter(m=>!m.internal&&m.type!=="secret"&&m.type!=="bytes"),[t.fields]),g=y.useMemo(()=>t.actions.filter(m=>m.type==="custom"),[t.actions]),f=y.useMemo(()=>c?[...e].sort((m,N)=>{const v=m[c],C=N[c];if(v===C)return 0;if(v==null)return 1;if(C==null)return-1;const S=String(v).localeCompare(String(C));return p==="asc"?S:-S}):e,[e,c,p]),u=m=>{c===m?b(N=>N==="asc"?"desc":"asc"):(h(m),b("asc"))};return Lt.useEffect(()=>{o(t)},[t,o]),r?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:s.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-500",children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",t.plural," found"]}),s.jsxs("p",{className:"text-gray-500 mb-4",children:["Get started by creating a new ",t.module,"."]}),s.jsxs(J,{to:`/${t.plural}/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",t.module]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[d.map(m=>s.jsx("th",{onClick:()=>u(m.name),onMouseEnter:()=>l(m,t),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-1",children:[en(m.name),c===m.name&&s.jsx("svg",{className:`w-4 h-4 ${p==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},m.name)),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[d.map(N=>s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:tn(m[N.name],N)},N.name)),s.jsx("td",{className:"px-4 py-3 text-right text-sm whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(J,{to:`/${t.plural}/${m.id}`,className:"text-primary-600 hover:text-primary-800",title:"View",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),g.map(N=>s.jsx("button",{onClick:()=>a==null?void 0:a(N.name,String(m.id)),className:"text-gray-400 hover:text-gray-600",title:N.name,children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},N.name)),n&&s.jsx("button",{onClick:()=>n(String(m.id)),className:"text-red-400 hover:text-red-600",title:"Delete",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},String(m.id)))})]})}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," ",t.plural]})})]})}function en(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function tn(t,e){if(t==null)return s.jsx("span",{className:"text-gray-400",children:"-"});switch(e.type){case"bool":return s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${t?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t?"Yes":"No"});case"enum":return s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-100 text-primary-800",children:String(t)});case"datetime":return new Date(String(t)).toLocaleString();case"date":return new Date(String(t)).toLocaleDateString();case"email":return s.jsx("a",{href:`mailto:${t}`,className:"text-primary-600 hover:underline",children:String(t)});case"url":return s.jsx("a",{href:String(t),target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:it(String(t),30)});case"json":return s.jsx("code",{className:"text-xs bg-gray-100 px-1 rounded",children:it(JSON.stringify(t),30)});case"ref":return s.jsx("span",{className:"text-gray-600",children:it(String(t),20)});default:return it(String(t),40)}}function it(t,e){return t.length<=e?t:t.slice(0,e)+"..."}function sn(){const{module:t}=fs(),e=ht(),[r,n]=y.useState(null),{data:a,isLoading:o}=re({queryKey:["schema",t],queryFn:()=>Es(t),enabled:!!t}),{data:l,isLoading:c}=re({queryKey:["records",t],queryFn:()=>qt(a.plural,{limit:100}),enabled:!!t&&!!a}),h=Rt({mutationFn:d=>Ar(a.plural,d),onSuccess:()=>{e.invalidateQueries({queryKey:["records",t]}),n(null)}}),p=d=>{n(d)},b=()=>{r&&h.mutate(r)};return o?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 capitalize",children:a.plural}),s.jsx("p",{className:"text-gray-500",children:a.description||`Manage ${a.plural}`})]}),s.jsxs(J,{to:`/${t}/new`,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",a.module]})]}),s.jsx(Zr,{module:a,records:(l==null?void 0:l.data)||[],isLoading:c,onDelete:p}),r&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirm Delete"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",a.module,"? This action cannot be undone."]}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:b,disabled:h.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50",children:h.isPending?"Deleting...":"Delete"})]})]})})]}):s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Module not found"}),s.jsxs("p",{className:"text-red-600",children:['The module "',t,'" does not exist.']})]})}function ss(t){const e=["name","title","email","label","slug"];for(const r of e)if(t[r]&&typeof t[r]=="string")return t[r];return String(t.id||"Unknown")}function rn({targetModule:t,value:e,onChange:r,disabled:n,className:a="",placeholder:o,hasError:l}){var u;const{data:c}=re({queryKey:["modules"],queryFn:It,staleTime:3e5}),h=((u=c==null?void 0:c.find(m=>m.module===t))==null?void 0:u.plural)||`${t}s`,{data:p,isLoading:b,error:d}=re({queryKey:["records",h],queryFn:()=>qt(h,{limit:100}),enabled:!!h,staleTime:30*1e3}),g=(p==null?void 0:p.data)||[],f=`
    w-full px-3 py-2 border rounded-lg text-sm
    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
    transition-colors
    ${l?"border-red-300 bg-red-50":"border-gray-300 bg-white"}
    ${n?"bg-gray-100 text-gray-500 cursor-not-allowed":""}
    ${a}
  `.trim();return b?s.jsxs("div",{className:"relative",children:[s.jsx("select",{disabled:!0,className:f,children:s.jsxs("option",{children:["Loading ",t,"s..."]})}),s.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2",children:s.jsxs("svg",{className:"animate-spin w-4 h-4 text-gray-400",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})]}):d?s.jsxs("div",{className:"text-sm text-red-500",children:["Failed to load ",t,"s: ",d instanceof Error?d.message:"Unknown error"]}):g.length===0?s.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg px-3 py-2",children:["No ",t,"s available. Please create a ",t," first."]}):s.jsxs("select",{value:e||"",onChange:m=>r(m.target.value||null),disabled:n,className:f,children:[s.jsx("option",{value:"",children:o||`Select ${t}...`}),g.map(m=>s.jsxs("option",{value:String(m.id),children:[ss(m),m.id!==ss(m)&&` (${m.id})`]},String(m.id)))]})}const nn=y.forwardRef(function({field:e,module:r,value:n,onChange:a,error:o,disabled:l},c){var f;const h=Rr(e,r),p=`
      w-full px-3 py-2 border rounded-lg text-sm
      focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
      transition-colors
      ${o?"border-red-300 bg-red-50":"border-gray-300 bg-white"}
      ${l?"bg-gray-100 text-gray-500 cursor-not-allowed":""}
    `,b=s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[ot(e.name),e.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"}),e.computed&&s.jsx("span",{className:"text-gray-400 ml-1 text-xs",children:"(auto)"})]}),d=o&&s.jsx("p",{className:"mt-1 text-xs text-red-500",children:o}),g=e.description&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.description});switch(e.type){case"bool":return s.jsxs("div",{className:"mb-4",...h,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{ref:c,type:"checkbox",checked:!!n,onChange:u=>a(u.target.checked),disabled:l||e.computed,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),s.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[ot(e.name),e.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),g,d]});case"enum":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsxs("select",{value:String(n??""),onChange:u=>a(u.target.value),disabled:l||e.computed,className:p,children:[s.jsxs("option",{value:"",children:["Select ",ot(e.name),"..."]}),(f=e.values)==null?void 0:f.map(u=>s.jsx("option",{value:u,children:u},u))]}),g,d]});case"text":case"json":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("textarea",{value:e.type==="json"?an(n):String(n??""),onChange:u=>a(e.type==="json"?on(u.target.value):u.target.value),disabled:l||e.computed,rows:4,className:p}),g,d]});case"secret":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"password",value:String(n??""),onChange:u=>a(u.target.value),disabled:l||e.computed,className:p,autoComplete:"new-password"}),g,d]});case"email":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"email",value:String(n??""),onChange:u=>a(u.target.value),disabled:l||e.computed,className:p,placeholder:"user@example.com"}),g,d]});case"url":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"url",value:String(n??""),onChange:u=>a(u.target.value),disabled:l||e.computed,className:p,placeholder:"https://example.com"}),g,d]});case"int":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"number",value:n!=null?String(n):"",onChange:u=>a(u.target.value?parseInt(u.target.value,10):null),disabled:l||e.computed,className:p,step:"1"}),g,d]});case"float":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"number",value:n!=null?String(n):"",onChange:u=>a(u.target.value?parseFloat(u.target.value):null),disabled:l||e.computed,className:p,step:"any"}),g,d]});case"datetime":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"datetime-local",value:ln(n),onChange:u=>a(u.target.value?new Date(u.target.value).toISOString():null),disabled:l||e.computed,className:p}),g,d]});case"date":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"date",value:String(n??""),onChange:u=>a(u.target.value),disabled:l||e.computed,className:p}),g,d]});case"time":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"time",value:String(n??""),onChange:u=>a(u.target.value),disabled:l||e.computed,className:p}),g,d]});case"ref":return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx(rn,{targetModule:e.ref||"",value:n,onChange:u=>a(u),disabled:l||e.computed,hasError:!!o,placeholder:`Select ${ot(e.ref||"reference")}...`}),g,d]});case"string":default:return s.jsxs("div",{className:"mb-4",...h,children:[b,s.jsx("input",{ref:c,type:"text",value:String(n??""),onChange:u=>a(u.target.value),disabled:l||e.computed,className:p}),g,d]})}});function ot(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function an(t){return t==null?"":typeof t=="string"?t:JSON.stringify(t,null,2)}function on(t){try{return JSON.parse(t)}catch{return t}}function ln(t){if(!t)return"";try{return new Date(String(t)).toISOString().slice(0,16)}catch{return""}}function cn({module:t,initialData:e={},mode:r,onSubmit:n,onCancel:a,isLoading:o}){const{focusModule:l}=st(),[c,h]=y.useState(()=>{if(r==="edit")return e;const v={...e};for(const C of t.fields)C.default!==void 0&&v[C.name]===void 0&&(v[C.name]=C.default);return v}),[p,b]=y.useState({}),[d,g]=y.useState(null),f=y.useMemo(()=>t.fields.filter(v=>!(v.implicit||v.internal||v.computed||r==="edit"&&v.immutable)),[t.fields,r]),u=y.useCallback((v,C)=>{h(S=>({...S,[v]:C})),p[v]&&b(S=>{const w={...S};return delete w[v],w})},[p]),m=y.useCallback(()=>{const v={};for(const C of f){const S=c[C.name];if(C.required&&(S==null||S==="")){v[C.name]=`${un(C.name)} is required`;continue}if(S!=null&&S!==""){const w=dn(C,S);w&&(v[C.name]=w)}}return b(v),Object.keys(v).length===0},[f,c]),N=async v=>{if(v.preventDefault(),g(null),!!m())try{await n(c)}catch(C){g(C instanceof Error?C.message:"An error occurred")}};return Lt.useEffect(()=>{l(t)},[t,l]),s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:r==="create"?`Create ${t.module}`:`Edit ${t.module}`}),f.map(v=>s.jsx(nn,{field:v,module:t,value:c[v.name],onChange:C=>u(v.name,C),error:p[v.name],disabled:o},v.name))]}),d&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-sm text-red-700",children:d})]})}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a&&s.jsx("button",{type:"button",onClick:a,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 flex items-center gap-2",children:[o&&s.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r==="create"?"Create":"Save Changes"]})]})]})}function un(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function dn(t,e){switch(t.type){case"email":if(typeof e=="string"&&!hn(e))return"Please enter a valid email address";break;case"url":if(typeof e=="string"&&!mn(e))return"Please enter a valid URL";break;case"enum":if(t.values&&!t.values.includes(String(e)))return`Must be one of: ${t.values.join(", ")}`;break}if(t.constraints)for(const r of t.constraints)switch(r.type){case"min_length":if(typeof e=="string"&&e.length<Number(r.value))return r.message||`Must be at least ${r.value} characters`;break;case"max_length":if(typeof e=="string"&&e.length>Number(r.value))return r.message||`Must be at most ${r.value} characters`;break;case"min":if(typeof e=="number"&&e<Number(r.value))return r.message||`Must be at least ${r.value}`;break;case"max":if(typeof e=="number"&&e>Number(r.value))return r.message||`Must be at most ${r.value}`;break;case"pattern":if(typeof e=="string"&&!new RegExp(String(r.value)).test(e))return r.message||"Invalid format";break}return null}function hn(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function mn(t){try{return new URL(t),!0}catch{return!1}}function pn(){var f;const{module:t,id:e}=fs(),r=Et(),n=ht(),a=e==="new",{data:o,isLoading:l}=re({queryKey:["schema",t],queryFn:()=>Es(t),enabled:!!t}),{data:c,isLoading:h}=re({queryKey:["record",t,e],queryFn:()=>Er(o.plural,e),enabled:!!t&&!!e&&!a&&!!o}),p=Rt({mutationFn:u=>Fr(o.plural,u),onSuccess:u=>{n.invalidateQueries({queryKey:["records",t]}),r(`/${t}/${u.data.id}`)}}),b=Rt({mutationFn:u=>Tr(o.plural,e,u),onSuccess:()=>{n.invalidateQueries({queryKey:["records",t]}),n.invalidateQueries({queryKey:["record",t,e]})}}),d=async u=>{a?await p.mutateAsync(u):await b.mutateAsync(u)},g=()=>{r(`/${t}`)};return l||!a&&h?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center gap-3 text-gray-500",children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}):o?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("nav",{className:"flex items-center gap-2 text-sm",children:[s.jsx(J,{to:`/${t}`,className:"text-gray-500 hover:text-gray-700 capitalize",children:o.plural}),s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsx("span",{className:"text-gray-900 font-medium",children:a?"Create New":((f=c==null?void 0:c.data)==null?void 0:f.id)||e})]}),s.jsx(cn,{module:o,initialData:a?{}:(c==null?void 0:c.data)||{},mode:a?"create":"edit",onSubmit:d,onCancel:g,isLoading:p.isPending||b.isPending}),b.isSuccess&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsx("p",{className:"text-sm text-green-700",children:"Changes saved successfully!"})]})})]}):s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Module not found"}),s.jsxs("p",{className:"text-red-600",children:['The module "',t,'" does not exist.']})]})}function fn(){const[t,e]=y.useState(""),[r,n]=y.useState(""),[a,o]=y.useState(""),[l,c]=y.useState(!1),{login:h}=Ve(),p=Et(),b=async d=>{d.preventDefault(),o(""),c(!0);try{await h(t,r),p("/")}catch(g){o(g instanceof Error?g.message:"Login failed")}finally{c(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-center text-3xl font-bold text-gray-900",children:"APIGate"}),s.jsx("h2",{className:"mt-6 text-center text-2xl font-semibold text-gray-900",children:"Sign in to your account"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[a&&s.jsx("div",{className:"rounded-md bg-red-50 p-4",children:s.jsx("p",{className:"text-sm text-red-700",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:d=>e(d.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"you@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:d=>n(d.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Password"})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Signing in...":"Sign in"})}),s.jsx("div",{className:"text-center",children:s.jsxs("span",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",s.jsx(J,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})})]})]})})}function xn(){const[t,e]=y.useState(""),[r,n]=y.useState(""),[a,o]=y.useState(""),[l,c]=y.useState(""),[h,p]=y.useState(!1),{register:b}=Ve(),d=Et(),g=async f=>{if(f.preventDefault(),c(""),r.length<8){c("Password must be at least 8 characters");return}p(!0);try{await b(t,r,a),d("/")}catch(u){c(u instanceof Error?u.message:"Registration failed")}finally{p(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-center text-3xl font-bold text-gray-900",children:"APIGate"}),s.jsx("h2",{className:"mt-6 text-center text-2xl font-semibold text-gray-900",children:"Create your account"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[l&&s.jsx("div",{className:"rounded-md bg-red-50 p-4",children:s.jsx("p",{className:"text-sm text-red-700",children:l})}),s.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",value:a,onChange:f=>o(f.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Your name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:f=>e(f.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"you@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:f=>n(f.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"At least 8 characters"})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h?"Creating account...":"Create account"})}),s.jsx("div",{className:"text-center",children:s.jsxs("span",{className:"text-sm text-gray-600",children:["Already have an account?"," ",s.jsx(J,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})})]})]})})}function yn(){const[t,e]=y.useState(""),[r,n]=y.useState(""),[a,o]=y.useState(""),[l,c]=y.useState(""),[h,p]=y.useState(""),[b,d]=y.useState(!1),{setup:g}=Ve(),f=async u=>{if(u.preventDefault(),p(""),r.length<8){p("Password must be at least 8 characters");return}if(r!==a){p("Passwords do not match");return}d(!0);try{await g(t,r,l)}catch(m){p(m instanceof Error?m.message:"Setup failed")}finally{d(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-xl flex items-center justify-center",children:s.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsx("h1",{className:"mt-4 text-3xl font-bold text-gray-900",children:"Welcome to APIGate"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Let's set up your admin account to get started"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[h&&s.jsx("div",{className:"rounded-md bg-red-50 p-4 border border-red-200",children:s.jsx("p",{className:"text-sm text-red-700",children:h})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Your Name"}),s.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",value:l,onChange:u=>c(u.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"John Doe"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:u=>e(u.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"admin@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:u=>n(u.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"At least 8 characters"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:a,onChange:u=>o(u.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm",placeholder:"Confirm your password"})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:b,className:"w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors",children:b?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting up..."]}):"Complete Setup"})})]}),s.jsx("div",{className:"mt-6 border-t border-gray-200 pt-6",children:s.jsx("p",{className:"text-xs text-gray-500 text-center",children:"This will create your admin account. You can add more users later from the dashboard."})})]})})}function $t(){return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}function gn({children:t}){const{isAuthenticated:e,isLoading:r,setupRequired:n}=Ve();return r?s.jsx($t,{}):n?s.jsx(Re,{to:"/setup",replace:!0}):e?s.jsx(s.Fragment,{children:t}):s.jsx(Re,{to:"/login",replace:!0})}function rs({children:t}){const{isAuthenticated:e,isLoading:r,setupRequired:n}=Ve();return r?s.jsx($t,{}):n?s.jsx(Re,{to:"/setup",replace:!0}):e?s.jsx(Re,{to:"/",replace:!0}):s.jsx(s.Fragment,{children:t})}function bn({children:t}){const{isLoading:e,setupRequired:r,isAuthenticated:n}=Ve();return e?s.jsx($t,{}):r?s.jsx(s.Fragment,{children:t}):n?s.jsx(Re,{to:"/",replace:!0}):s.jsx(Re,{to:"/login",replace:!0})}function vn(){return s.jsxs($s,{children:[s.jsx(ie,{path:"/setup",element:s.jsx(bn,{children:s.jsx(yn,{})})}),s.jsx(ie,{path:"/login",element:s.jsx(rs,{children:s.jsx(fn,{})})}),s.jsx(ie,{path:"/register",element:s.jsx(rs,{children:s.jsx(xn,{})})}),s.jsxs(ie,{path:"/",element:s.jsx(gn,{children:s.jsx(Vr,{})}),children:[s.jsx(ie,{index:!0,element:s.jsx(Yr,{})}),s.jsx(ie,{path:":module",element:s.jsx(sn,{})}),s.jsx(ie,{path:":module/:id",element:s.jsx(pn,{})})]}),s.jsx(ie,{path:"*",element:s.jsx(Re,{to:"/",replace:!0})})]})}function jn(){return s.jsx(Or,{children:s.jsx(Pr,{children:s.jsx(qs,{basename:"/mod/ui",children:s.jsx(vn,{})})})})}const wn=new fr({defaultOptions:{queries:{staleTime:3e4,retry:1}}});pt.createRoot(document.getElementById("root")).render(s.jsx(Lt.StrictMode,{children:s.jsx(xr,{client:wn,children:s.jsx(jn,{})})}));
